{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\appsk\\\\Documents\\\\Projects\\\\PredictiveMaintenance\\\\React PDM\\\\env\\\\frontend\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport React, { Component, useState } from 'react';\nimport { Fabric } from 'office-ui-fabric-react/lib/Fabric';\nimport { DefaultButton } from 'office-ui-fabric-react/lib/Button';\nimport XLSX from 'xlsx';\nimport { make_cols } from './MakeColumns';\nimport { SheetJSFT } from './types';\nimport { GridComponent, ColumnDirective, ColumnsDirective, Page, Inject, Filter, gridObserver } from '@syncfusion/ej2-react-grids';\nimport { endOfToday, format, set } from 'date-fns';\nimport testData from './json.json';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider, KeyboardTimePicker, KeyboardDatePicker } from '@material-ui/pickers';\nimport { Grid } from '@material-ui/core';\n\nfunction App() {\n  _s();\n\n  // Preprocessed data state\n  const [preprocessedData, setData] = useState([]);\n\n  function updatepreprocessedDataState(e) {\n    setData(eq => (preprocessedData, e));\n  } // Equipment item state update\n\n\n  const [equipmentItems, setEq] = useState([]);\n\n  function updateEquipmentItemsState(e) {\n    setEq(eq => (equipmentItems, e));\n  }\n\n  const [equipmentLabel, setEquipmentLabel] = useState([]);\n\n  function updateEquipmentLabel(e) {\n    setEquipmentLabel(eq => (equipmentLabel, e));\n  } // Part number state update\n\n\n  const [partItems, setPart] = useState([]);\n\n  function updatePartNumberState(e) {\n    setPart(eq => (partItems, e));\n  }\n\n  const [partLabels, setPartLabels] = useState([]);\n\n  function updatePartLabels(e) {\n    setPartLabels(eq => (partLabels, e));\n  } // Code state update\n\n\n  const [codeItems, setCode] = useState([]);\n\n  function updateCodeState(e) {\n    setCode(eq => (codeItems, e));\n  }\n\n  const [codeLabels, setCodeLabels] = useState([]);\n\n  function updateCodeLabels(e) {\n    setCodeLabels(eq => (codeLabels, e));\n  } // Graph Coordinates State\n\n\n  const [graphCoordinates, setGraphCoordinates] = useState([]);\n\n  function updateGraphCoordinates(e) {\n    setGraphCoordinates(eq => (graphCoordinates, e));\n  } // Time range based Data\n\n\n  const [selectedCodes, setSelectedCodes] = useState([]);\n  const [radarGraphLabels, setRadarLabels] = useState([]);\n  const [radarGraphData, setRadarData] = useState([]);\n\n  function updateRangeData() {\n    var finalData = [];\n\n    if (minDate && maxDate) {\n      graphCoordinates.forEach(function (item) {\n        var codesDict = {};\n        selectedCodes.forEach(function (code) {\n          codesDict[code] = 0;\n        });\n        setRadarLabels(Object.keys(codesDict));\n        item.forEach(function (point) {\n          if (+point['x'] >= minDate && +point['x'] <= maxDate) {\n            codesDict[point['y']] += 1;\n          }\n        });\n        var vals = [];\n\n        for (var key in codesDict) {\n          vals.push(codesDict[key]);\n        }\n\n        finalData.push(vals);\n      });\n      setRadarData(finalData);\n    }\n  } // Date range states\n\n\n  const [minDate, setMinDate] = React.useState(null);\n\n  const handleMinDate = date => {\n    setMinDate(date);\n  };\n\n  const [maxDate, setMaxDate] = React.useState(null);\n\n  const handleMaxDate = date => {\n    setMaxDate(date);\n  }; // Excel File properties\n\n\n  var file = {};\n  var data = [];\n  var cols = [];\n\n  const groupBy = require('json-groupby');\n\n  const selectionOptions = {\n    type: 'Multiple'\n  }; // TABLE FORMATING\n  //1. Equipment list Row Selection\n\n  let equipmentGrid = null;\n\n  const equipmentRowSelected = () => {\n    if (equipmentGrid) {\n      const eqLabel = equipmentGrid.getSelectedRecords()[0][\"Equipment ID\"];\n      updateEquipmentLabel(eqLabel);\n      const keys = Object.keys(preprocessedData[eqLabel]);\n      var partsList = [];\n      keys.forEach(function (item) {\n        partsList.push({\n          \"Part Number\": item\n        });\n      });\n      updatePartNumberState(partsList);\n      updateCodeState([]);\n    }\n  }; //2. Part Number Row selection\n\n\n  let partGrid = null;\n\n  const partRowSelected = () => {\n    if (partGrid && partGrid.getSelectedRecords().length <= 3) {\n      const eqLabel = equipmentLabel;\n      const partLabels = partGrid.getSelectedRecords();\n      updatePartLabels(partLabels);\n      var keys = [];\n      partLabels.forEach(function (part) {\n        const name = part[\"Part Number\"];\n        keys.push(...Object.keys(preprocessedData[eqLabel][name]));\n      });\n      keys = [...new Set(keys)];\n      var codesList = [];\n      keys.forEach(function (code) {\n        codesList.push({\n          \"Code\": code\n        });\n      });\n      updateCodeState(codesList);\n    } else if (partGrid) {\n      partGrid.clearSelection();\n      updatePartLabels([]);\n      alert(\"Only 3 Part selections are available. Please select your Parts again.\");\n    }\n  }; //3. Repair Code Row selection\n\n\n  let rcodeGrid = null;\n\n  const rcodeRowSelected = () => {\n    if (rcodeGrid) {\n      const selectedRcodeLabel = rcodeGrid.getSelectedRecords();\n      updateCodeLabels(selectedRcodeLabel); // Load in data\n      ////////\n\n      var xAxisData;\n      var yAxisData;\n      var localGraphCoordinates = [];\n      var parts = [];\n      var minDate = null;\n      var maxDate = null;\n      partLabels.forEach(function (item) {\n        parts.push(item[\"Part Number\"]);\n      });\n      var codes = [];\n      selectedRcodeLabel.forEach(function (item) {\n        codes.push(item[\"Code\"]);\n      });\n      setSelectedCodes(codes);\n      parts.forEach(function (part) {\n        xAxisData = [];\n        yAxisData = [];\n        Object.keys(preprocessedData[equipmentLabel][part]).forEach(function (code) {\n          if (codes.includes(code)) {\n            preprocessedData[equipmentLabel][part][code].forEach(function (item) {\n              const newDate = new Date(new Date(item[\"Date\"]).toDateString());\n              yAxisData.push(item[\"Code\"]);\n              xAxisData.push(newDate);\n\n              if (minDate === null) {\n                minDate = newDate;\n              } else if (+minDate > +newDate) {\n                minDate = newDate;\n              }\n\n              if (maxDate === null) {\n                maxDate = newDate;\n              } else if (+maxDate < +newDate) {\n                maxDate = newDate;\n              }\n            });\n          }\n        });\n        localGraphCoordinates.push(generateCrd(xAxisData, yAxisData));\n      });\n      updateGraphCoordinates(localGraphCoordinates);\n      setMinDate(minDate);\n      setMaxDate(maxDate); /////////////\n    }\n  }; // Generate random color\n\n\n  function getRandomColor() {\n    var letters = '0123456789ABCDEF';\n    var color = '#';\n\n    for (var i = 0; i < 6; i++) {\n      color += letters[Math.floor(Math.random() * 16)];\n    }\n\n    return color;\n  } // Generate graph coordinates\n\n\n  function generateCrd(x, y) {\n    const coordinates = [];\n    var i;\n\n    for (i = 0; i < x.length; i++) {\n      const point = {\n        'x': x[i],\n        'y': y[i]\n      };\n      coordinates.push(point);\n    }\n\n    return coordinates;\n  }\n\n  function renderChart() {\n    // Load in Chart Data\n    var localGraphCoordinates = [];\n    var radarData = [];\n    var radarLabels = {};\n    var barRawData = {};\n    var barEmptyData = {};\n    selectedCodes.forEach(function (code) {\n      barRawData[code] = {};\n    });\n\n    if (minDate && maxDate) {\n      graphCoordinates.forEach(function (item) {\n        var codesDict = {};\n        var subGC = [];\n        selectedCodes.forEach(function (code) {\n          codesDict[code] = 0;\n        });\n        setRadarLabels(Object.keys(codesDict));\n        radarLabels = Object.keys(codesDict);\n        item.forEach(function (point) {\n          if (+point['x'] >= minDate && +point['x'] <= maxDate) {\n            codesDict[point['y']] += 1;\n            subGC.push(point);\n\n            if (point['x'] in barRawData[point['y']]) {\n              barRawData[point['y']][point['x']] += 1;\n            } else {\n              barRawData[point['y']][point['x']] = 1;\n            }\n\n            barEmptyData[point['x']] = 0;\n          }\n        });\n        var vals = [];\n\n        for (var key in codesDict) {\n          vals.push(codesDict[key]);\n        }\n\n        vals = vals.map(value => value === 0 ? NaN : value);\n        radarData.push(vals);\n        localGraphCoordinates.push(subGC);\n      });\n      setRadarData(radarData);\n    }\n\n    console.log(barEmptyData);\n    var barData = [];\n    Object.keys(barRawData).forEach(function (code) {\n      var barD = [];\n\n      for (const [k, v] of Object.entries(barRawData[code])) {\n        barD.push({\n          x: new Date(k),\n          y: v\n        });\n      }\n\n      for (const [k, v] of Object.entries(barEmptyData)) {\n        barD.push({\n          x: new Date(k),\n          y: v\n        });\n      }\n\n      console.log(barD);\n      var codeBar = {};\n      codeBar['label'] = code; //codeBar['stack'] = 1\n\n      codeBar['backgroundColor'] = getRandomColor();\n      codeBar['borderColor'] = codeBar['backgroundColor']; //codeBar['borderWidth'] = 1\n\n      codeBar['barThickness'] = 20;\n      codeBar['data'] = barD;\n      barData.push(codeBar);\n    });\n    console.log(barData);\n    var parts = [];\n    partLabels.forEach(function (item) {\n      parts.push(item[\"Part Number\"]);\n    }); // Set Time range for main chart\n\n    var codesUsed = [];\n    const dateOffset = 24 * 60 * 60 * 1000 * 31;\n    var minD = new Date(minDate.getTime() - dateOffset);\n    var maxD = new Date(maxDate.getTime() + dateOffset); // Main graph\n\n    var Chart = require('chart.js');\n\n    const ctx = document.getElementById('chart').getContext('2d');\n    const myChart = new Chart(ctx, {\n      type: 'scatter',\n      data: {\n        datasets: [{\n          label: \"Part number: \" + parts[0],\n          data: localGraphCoordinates[0],\n          backgroundColor: \"#FF4136\",\n          borderColor: \"#FF4136\",\n          fill: false,\n          showLine: false,\n          borderWidth: 1,\n          pointRadius: 5,\n          pointHoverRadius: 5\n        }, {\n          label: \"Part number: \" + parts[1],\n          data: localGraphCoordinates[1],\n          backgroundColor: \"#0074D9\",\n          borderColor: \"#0074D9\",\n          fill: false,\n          showLine: false,\n          borderWidth: 1,\n          pointRadius: 5,\n          pointHoverRadius: 5\n        }, {\n          label: \"Part number: \" + parts[2],\n          data: localGraphCoordinates[2],\n          backgroundColor: \"#228B22\",\n          borderColor: \"#228B22\",\n          fill: false,\n          showLine: false,\n          borderWidth: 1,\n          pointRadius: 5,\n          pointHoverRadius: 5\n        }]\n      },\n      options: {\n        scales: {\n          xAxes: [{\n            type: 'time',\n            //distribution: 'series',\n            time: {\n              unit: 'month' //displayFormats: {quarter: 'll'}\n\n            },\n            ticks: {\n              min: minD,\n              max: maxD\n            }\n          }],\n          yAxes: [{\n            gridLines: false,\n            ticks: {\n              min: 0,\n              autoSkip: false,\n              stepSize: 1,\n              callback: function (label, index, labels) {\n                var result = false;\n\n                if (localGraphCoordinates[0]) {\n                  localGraphCoordinates[0].forEach(function (item) {\n                    if (item['y'] == label && !codesUsed.includes(label)) {\n                      result = true;\n                      codesUsed.push(label);\n                    }\n                  });\n                }\n\n                if (result) {\n                  return label;\n                }\n\n                if (localGraphCoordinates[1]) {\n                  localGraphCoordinates[1].forEach(function (item) {\n                    if (item['y'] == label && !codesUsed.includes(label)) {\n                      result = true;\n                      codesUsed.push(label);\n                    }\n                  });\n                }\n\n                if (result) {\n                  return label;\n                }\n\n                if (localGraphCoordinates[2]) {\n                  localGraphCoordinates[2].forEach(function (item) {\n                    if (item['y'] == label && !codesUsed.includes(label)) {\n                      result = true;\n                      codesUsed.push(label);\n                    }\n                  });\n                }\n\n                if (result) {\n                  return label;\n                }\n              }\n            }\n          }]\n        }\n      }\n    }); // Radar Graph\n\n    const radarCtx = document.getElementById('radarChart').getContext('2d');\n    const radarChart = new Chart(radarCtx, {\n      type: 'radar',\n      data: {\n        labels: radarLabels,\n        datasets: [{\n          label: \"Part number: \" + parts[0],\n          backgroundColor: 'rgba(255, 00, 00, 0.1)',\n          borderColor: '#FF4136',\n          borderWidth: 2,\n          data: radarData[0],\n          spanGaps: true\n        }, {\n          label: \"Part number: \" + parts[1],\n          backgroundColor: 'rgba(00, 00, 255, 0.1)',\n          borderColor: '#0074D9',\n          borderWidth: 2,\n          data: radarData[1],\n          spanGaps: true\n        }, {\n          label: \"Part number: \" + parts[2],\n          backgroundColor: 'rgba(00, 255, 00, 0.1)',\n          borderColor: '#228B22',\n          borderWidth: 2,\n          data: radarData[2],\n          spanGaps: true\n        }]\n      },\n      options: {\n        scale: {\n          angleLines: {\n            display: true\n          },\n          ticks: {\n            min: 0,\n            stepSize: 1\n          }\n        }\n      }\n    }); // Bar Graph\n\n    const barCtx = document.getElementById('barGraph').getContext('2d');\n    var stackedBar = new Chart(barCtx, {\n      type: 'bar',\n      data: {\n        datasets: [{\n          backgroundColor: 'rgba(00, 255, 00, 0.1)',\n          barPercentage: 0.5,\n          barThickness: 6,\n          maxBarThickness: 8,\n          minBarLength: 2,\n          data: [{\n            x: '2016-12-25',\n            y: 20\n          }, {\n            x: '2016-12-26',\n            y: 10\n          }]\n        }, {\n          backgroundColor: 'rgba(255, 00, 00, 0.1)',\n          barPercentage: 0.5,\n          barThickness: 6,\n          maxBarThickness: 8,\n          minBarLength: 2,\n          data: [{\n            x: '2016-12-25',\n            y: 5\n          }, {\n            x: '2016-12-26',\n            y: 5\n          }]\n        }, {\n          backgroundColor: '#228B22',\n          barPercentage: 0.5,\n          barThickness: 6,\n          maxBarThickness: 8,\n          minBarLength: 2,\n          data: [{\n            x: '2016-12-25',\n            y: 20\n          }, {\n            x: '2016-12-26',\n            y: 10\n          }]\n        }, {\n          backgroundColor: '#0074D9',\n          barPercentage: 0.5,\n          barThickness: 6,\n          maxBarThickness: 8,\n          minBarLength: 2,\n          data: [{\n            x: '2016-12-25',\n            y: 0\n          }, {\n            x: '2016-12-26',\n            y: 5\n          }, {\n            x: '2016-12-27',\n            y: 5\n          }]\n        }]\n      },\n      options: {\n        scales: {\n          xAxes: [{\n            // ticks: {min: minD,\n            // max: maxD},\n            type: 'time',\n            distribution: 'series',\n            time: {\n              unit: 'month'\n            },\n            stacked: true\n          }],\n          yAxes: [{\n            ticks: {\n              stepSize: 1\n            },\n            stacked: true\n          }]\n        }\n      }\n    });\n  } //   function download(content, fileName, contentType) {\n  //     var a = document.createElement(\"a\");\n  //     var file = new Blob([content], {type: contentType});\n  //     a.href = URL.createObjectURL(file);\n  //     a.download = fileName;\n  //     a.click();\n  // }\n\n\n  function handleChange(e) {\n    const files = e.target.files;\n    if (files && files[0]) file = files[0];\n  }\n\n  ;\n\n  function handleFile() {\n    /* Boilerplate to set up FileReader */\n    const reader = new FileReader();\n    const rABS = !!reader.readAsBinaryString;\n\n    reader.onload = e => {\n      const bstr = e.target.result;\n      const wb = XLSX.read(bstr, {\n        type: rABS ? 'binary' : 'array',\n        bookVBA: true\n      });\n      const wsname = wb.SheetNames[0];\n      const ws = wb.Sheets[wsname];\n      data = XLSX.utils.sheet_to_json(ws, {\n        raw: false\n      });\n      cols = make_cols(ws['!ref']); // Preprocess data\n\n      const strData = JSON.stringify(data, null, 2);\n      var jsonObject = JSON.parse(strData);\n      var i;\n\n      for (i = 0; i < jsonObject.length; i++) {\n        if (!(\"Part Number\" in jsonObject[i] && \"Code\" in jsonObject[i] && \"Date\" in jsonObject[i])) {\n          delete jsonObject[i];\n        } else {\n          var d = new Date(jsonObject[i][\"Date\"]);\n\n          if (!jsonObject[i].Code.match(/^\\d+$/)) {\n            delete jsonObject[i];\n          } else if (isNaN(d.getMonth())) {\n            delete jsonObject[i];\n          }\n        }\n      }\n\n      const jsonRegroupedTest = groupBy(jsonObject, ['Equipment ID', 'Part Number']);\n      const jsonRegrouped = groupBy(jsonObject, ['Equipment ID', 'Part Number', 'Code']);\n      const equipmentComponentsList = Object.keys(jsonRegrouped);\n      var eqStateObject = [];\n      equipmentComponentsList.forEach(function (item) {\n        eqStateObject.push({\n          \"Equipment ID\": item\n        });\n      }); //Update states\n\n      updateEquipmentItemsState(eqStateObject);\n      updatepreprocessedDataState(jsonRegrouped);\n    };\n\n    if (rABS) {\n      reader.readAsBinaryString(file);\n    } else {\n      reader.readAsArrayBuffer(file);\n    }\n\n    ;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"file\",\n      children: \"Upload your Excel File\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 589,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      className: \"form-control\",\n      id: \"file\",\n      accept: SheetJSFT,\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"submit\",\n      value: \"Update\",\n      onClick: handleFile\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"parent\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"EqID\",\n        style: {\n          marginTop: '20%',\n          margin: '10%'\n        },\n        children: /*#__PURE__*/_jsxDEV(GridComponent, {\n          dataSource: equipmentItems,\n          allowPaging: true,\n          pageSettings: {\n            pageSize: 10\n          },\n          allowFiltering: true,\n          rowSelected: equipmentRowSelected,\n          ref: g => equipmentGrid = g,\n          children: [/*#__PURE__*/_jsxDEV(ColumnsDirective, {\n            children: /*#__PURE__*/_jsxDEV(ColumnDirective, {\n              field: \"Equipment ID\",\n              headerText: \"Equipment List\",\n              textAlign: \"Center\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Inject, {\n            services: [Page, Filter]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 598,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"PID\",\n        style: {\n          marginTop: '20%',\n          margin: '10%'\n        },\n        children: /*#__PURE__*/_jsxDEV(GridComponent, {\n          dataSource: partItems,\n          allowPaging: true,\n          pageSettings: {\n            pageSize: 10\n          },\n          allowFiltering: true,\n          rowSelected: partRowSelected,\n          rowDeselected: partRowSelected,\n          ref: g => partGrid = g //selectionSettings={selectionOptions}\n          ,\n          children: [/*#__PURE__*/_jsxDEV(ColumnsDirective, {\n            children: [/*#__PURE__*/_jsxDEV(ColumnDirective, {\n              type: \"checkbox\",\n              width: \"50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(ColumnDirective, {\n              field: \"Part Number\",\n              headerText: \"Part Number\",\n              textAlign: \"Center\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Inject, {\n            services: [Page, Filter]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"RC\",\n        style: {\n          marginTop: '20%',\n          margin: '10%'\n        },\n        children: /*#__PURE__*/_jsxDEV(GridComponent, {\n          dataSource: codeItems,\n          allowPaging: true,\n          pageSettings: {\n            pageSize: 10\n          },\n          allowFiltering: true,\n          rowSelected: rcodeRowSelected,\n          rowDeselected: rcodeRowSelected,\n          ref: g => rcodeGrid = g //selectionSettings={selectionOptions}\n          ,\n          children: [/*#__PURE__*/_jsxDEV(ColumnsDirective, {\n            children: [/*#__PURE__*/_jsxDEV(ColumnDirective, {\n              type: \"checkbox\",\n              width: \"50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(ColumnDirective, {\n              field: \"Code\",\n              headerText: \"Repair Code\",\n              textAlign: \"Center\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 642,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 640,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Inject, {\n            services: [Page, Filter]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 631,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 630,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"graphButton\",\n        children: [/*#__PURE__*/_jsxDEV(MuiPickersUtilsProvider, {\n          utils: DateFnsUtils,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            justify: \"space-around\",\n            children: [/*#__PURE__*/_jsxDEV(KeyboardDatePicker //disableToolbar\n            , {\n              variant: \"dialog\",\n              format: \"MM/dd/yyyy\",\n              margin: \"normal\",\n              id: \"min-date\",\n              label: \"Start Date\",\n              value: minDate,\n              onChange: handleMinDate,\n              KeyboardButtonProps: {\n                'arial-label': 'change date'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(KeyboardDatePicker //disableToolbar\n            , {\n              variant: \"dialog\",\n              format: \"MM/dd/yyyy\",\n              margin: \"normal\",\n              id: \"max-date\",\n              label: \"End Date\",\n              value: maxDate,\n              onChange: handleMaxDate,\n              KeyboardButtonProps: {\n                'arial-label': 'change date'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 649,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DefaultButton, {\n          onClick: renderChart,\n          children: \"Graph\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 675,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 648,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: \"chart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"secondaryGraphs\",\n      children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n        id: \"radarChart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 680,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        id: \"barGraph\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 679,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 587,\n    columnNumber: 7\n  }, this);\n}\n\n_s(App, \"o0G2lBq/QAk8htJpn++pwKTJ5Xg=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/appsk/Documents/Projects/PredictiveMaintenance/React PDM/env/frontend/src/App.js"],"names":["React","Component","useState","Fabric","DefaultButton","XLSX","make_cols","SheetJSFT","GridComponent","ColumnDirective","ColumnsDirective","Page","Inject","Filter","gridObserver","endOfToday","format","set","testData","DateFnsUtils","MuiPickersUtilsProvider","KeyboardTimePicker","KeyboardDatePicker","Grid","App","preprocessedData","setData","updatepreprocessedDataState","e","eq","equipmentItems","setEq","updateEquipmentItemsState","equipmentLabel","setEquipmentLabel","updateEquipmentLabel","partItems","setPart","updatePartNumberState","partLabels","setPartLabels","updatePartLabels","codeItems","setCode","updateCodeState","codeLabels","setCodeLabels","updateCodeLabels","graphCoordinates","setGraphCoordinates","updateGraphCoordinates","selectedCodes","setSelectedCodes","radarGraphLabels","setRadarLabels","radarGraphData","setRadarData","updateRangeData","finalData","minDate","maxDate","forEach","item","codesDict","code","Object","keys","point","vals","key","push","setMinDate","handleMinDate","date","setMaxDate","handleMaxDate","file","data","cols","groupBy","require","selectionOptions","type","equipmentGrid","equipmentRowSelected","eqLabel","getSelectedRecords","partsList","partGrid","partRowSelected","length","part","name","Set","codesList","clearSelection","alert","rcodeGrid","rcodeRowSelected","selectedRcodeLabel","xAxisData","yAxisData","localGraphCoordinates","parts","codes","includes","newDate","Date","toDateString","generateCrd","getRandomColor","letters","color","i","Math","floor","random","x","y","coordinates","renderChart","radarData","radarLabels","barRawData","barEmptyData","subGC","map","value","NaN","console","log","barData","barD","k","v","entries","codeBar","codesUsed","dateOffset","minD","getTime","maxD","Chart","ctx","document","getElementById","getContext","myChart","datasets","label","backgroundColor","borderColor","fill","showLine","borderWidth","pointRadius","pointHoverRadius","options","scales","xAxes","time","unit","ticks","min","max","yAxes","gridLines","autoSkip","stepSize","callback","index","labels","result","radarCtx","radarChart","spanGaps","scale","angleLines","display","barCtx","stackedBar","barPercentage","barThickness","maxBarThickness","minBarLength","distribution","stacked","handleChange","files","target","handleFile","reader","FileReader","rABS","readAsBinaryString","onload","bstr","wb","read","bookVBA","wsname","SheetNames","ws","Sheets","utils","sheet_to_json","raw","strData","JSON","stringify","jsonObject","parse","d","Code","match","isNaN","getMonth","jsonRegroupedTest","jsonRegrouped","equipmentComponentsList","eqStateObject","readAsArrayBuffer","marginTop","margin","pageSize","g"],"mappings":"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","sourcesContent":["import './App.css';\nimport React, { Component, useState } from 'react';\nimport { Fabric } from 'office-ui-fabric-react/lib/Fabric';\nimport { DefaultButton } from 'office-ui-fabric-react/lib/Button';\nimport XLSX from 'xlsx';\nimport { make_cols } from './MakeColumns';\nimport { SheetJSFT } from './types';\nimport {GridComponent, ColumnDirective, ColumnsDirective,\n  Page, Inject, Filter, gridObserver} from '@syncfusion/ej2-react-grids';\nimport { endOfToday, format, set } from 'date-fns' \nimport testData from './json.json';\nimport DateFnsUtils from '@date-io/date-fns'\nimport {MuiPickersUtilsProvider,\nKeyboardTimePicker,\nKeyboardDatePicker} from '@material-ui/pickers'\nimport { Grid } from '@material-ui/core';\n\n \nfunction App() {\n\n  // Preprocessed data state\n  const [preprocessedData, setData] = useState([]);\n  function updatepreprocessedDataState(e) {\n    setData(eq => (preprocessedData, e));\n  }\n\n  // Equipment item state update\n  const [equipmentItems, setEq] = useState([]);\n  function updateEquipmentItemsState(e) {\n    setEq(eq => (equipmentItems, e));\n  }\n\n  const [equipmentLabel, setEquipmentLabel] = useState([]);\n  function updateEquipmentLabel(e) {\n    setEquipmentLabel(eq => (equipmentLabel, e));\n  }\n\n  // Part number state update\n  const [partItems, setPart] = useState([]);\n  function updatePartNumberState(e) {\n    setPart(eq => (partItems, e));\n  }\n\n  const [partLabels, setPartLabels] = useState([]);\n  function updatePartLabels(e) {\n    setPartLabels(eq => (partLabels, e));\n  }\n\n    // Code state update\n    const [codeItems, setCode] = useState([]);\n    function updateCodeState(e) {\n      setCode(eq => (codeItems, e));\n    }\n\n    const [codeLabels, setCodeLabels] = useState([]);\n    function updateCodeLabels(e) {\n      setCodeLabels(eq => (codeLabels, e));\n    }\n\n    // Graph Coordinates State\n    const [graphCoordinates, setGraphCoordinates] = useState([]);\n    function updateGraphCoordinates(e) {\n      setGraphCoordinates(eq => (graphCoordinates, e));\n    }\n\n    // Time range based Data\n    const [selectedCodes, setSelectedCodes] = useState([]);\n    const [radarGraphLabels, setRadarLabels] = useState([]);\n    const [radarGraphData, setRadarData] = useState([]); \n\n  function updateRangeData() {\n      var finalData = [];\n      if(minDate && maxDate) {\n        graphCoordinates.forEach(function(item) {\n          var codesDict = {}\n          selectedCodes.forEach(function(code) {\n            codesDict[code] = 0;\n          })\n          setRadarLabels(Object.keys(codesDict))\n          item.forEach(function(point) {\n            if(+point['x'] >= minDate && +point['x'] <= maxDate) {\n              codesDict[point['y']] += 1\n            }\n          })\n          var vals = []\n          for (var key in codesDict){\n            vals.push(codesDict[key])\n        }\n          finalData.push(vals)\n        })\n        setRadarData(finalData)\n      }      \n    }\n\n    // Date range states\n    const [minDate, setMinDate] = React.useState(null)\n    const handleMinDate = (date) => {\n      setMinDate(date)\n    }\n    const [maxDate, setMaxDate] = React.useState(null)\n    const handleMaxDate = (date) => {\n      setMaxDate(date)\n    }\n    \n    // Excel File properties\n     var file = {};\n     var data = [];\n     var cols = [];\n    \n     const groupBy = require('json-groupby');\n\n     const selectionOptions = {\n      type: 'Multiple'\n    };\n\n    // TABLE FORMATING\n  \n    //1. Equipment list Row Selection\n    let equipmentGrid = null;\n    const equipmentRowSelected = () => { \n      if(equipmentGrid){\n        const eqLabel = equipmentGrid.getSelectedRecords()[0][\"Equipment ID\"];\n        updateEquipmentLabel(eqLabel);\n        const keys = Object.keys(preprocessedData[eqLabel]);\n        var partsList = [];\n        keys.forEach(function(item) {\n          partsList.push({\"Part Number\": item});\n        })\n        updatePartNumberState(partsList);\n        updateCodeState([]);\n      }\n    }\n\n    //2. Part Number Row selection\n    let partGrid = null;\n    const partRowSelected = () => {\n      if(partGrid && partGrid.getSelectedRecords().length <= 3) {\n        const eqLabel = equipmentLabel;\n        const partLabels = partGrid.getSelectedRecords();\n        updatePartLabels(partLabels);\n        var keys = []\n        partLabels.forEach(function(part) {\n        const name = part[\"Part Number\"];\n        keys.push(...Object.keys(preprocessedData[eqLabel][name]));\n        })\n        keys = [...new Set(keys)];\n        var codesList = [];\n        keys.forEach(function(code) {\n          codesList.push({\"Code\": code});\n        })\n        updateCodeState(codesList);\n      }\n      else if(partGrid) {\n        partGrid.clearSelection()\n        updatePartLabels([])\n        alert(\"Only 3 Part selections are available. Please select your Parts again.\")\n      }\n    }\n\n    //3. Repair Code Row selection\n    let rcodeGrid = null;\n    const rcodeRowSelected = () => {\n      if(rcodeGrid) {\n        const selectedRcodeLabel = rcodeGrid.getSelectedRecords();\n        updateCodeLabels(selectedRcodeLabel);\n        \n      // Load in data\n      ////////\n      var xAxisData;\n      var yAxisData;\n      var localGraphCoordinates = [];\n      var parts = [];\n      var minDate = null;\n      var maxDate = null;\n      partLabels.forEach(function(item) {\n        parts.push(item[\"Part Number\"]);\n      })\n      var codes = []\n      selectedRcodeLabel.forEach(function(item) {\n        codes.push(item[\"Code\"]);\n      })\n      setSelectedCodes(codes)\n\n      parts.forEach(function(part) {\n        xAxisData = [];\n        yAxisData = [];\n        Object.keys(preprocessedData[equipmentLabel][part]).forEach(function(code){\n          if(codes.includes(code)) {\n            preprocessedData[equipmentLabel][part][code].forEach(function(item){\n              const newDate = new Date(new Date(item[\"Date\"]).toDateString());\n              yAxisData.push(item[\"Code\"]);\n              xAxisData.push(newDate);\n\n              if(minDate === null) {\n                minDate = newDate;\n              }\n              else if(+minDate > +newDate) {\n                minDate = newDate;\n              }\n              if(maxDate === null) {\n                maxDate = newDate;\n              }\n              else if(+maxDate < +newDate) {\n                maxDate = newDate;\n              }\n            })\n          }\n        })\n        localGraphCoordinates.push(generateCrd(xAxisData, yAxisData));\n      })\n      updateGraphCoordinates(localGraphCoordinates);\n      setMinDate(minDate);\n      setMaxDate(maxDate);\n      /////////////\n      }\n    }\n\n    // Generate random color\n    function getRandomColor() {\n      var letters = '0123456789ABCDEF';\n      var color = '#';\n      for (var i = 0; i < 6; i++) {\n        color += letters[Math.floor(Math.random() * 16)];\n      }\n      return color;\n    }    \n\n    // Generate graph coordinates\n    function generateCrd(x, y) {\n      const coordinates = [];\n      var i;\n      for(i = 0; i < x.length; i++) {\n        const point = {'x': x[i], 'y':y[i]};\n        coordinates.push(point);\n      }\n      return coordinates;\n    }\n  \n  function renderChart() {\n\n    // Load in Chart Data\n    var localGraphCoordinates = []\n     var radarData = [];\n     var radarLabels = {};\n     var barRawData = {}\n     var barEmptyData = {};\n     selectedCodes.forEach(function(code) {\n      barRawData[code] = {}\n    })\n     if(minDate && maxDate) {\n       graphCoordinates.forEach(function(item) {\n         var codesDict = {}\n         var subGC = []\n         selectedCodes.forEach(function(code) {\n           codesDict[code] = 0;\n         })\n         setRadarLabels(Object.keys(codesDict))\n         radarLabels = Object.keys(codesDict)\n         item.forEach(function(point) {\n           if(+point['x'] >= minDate && +point['x'] <= maxDate) {\n             codesDict[point['y']] += 1\n             subGC.push(point)\n             if(point['x'] in barRawData[point['y']]) {barRawData[point['y']][point['x']] += 1}\n             else {barRawData[point['y']][point['x']] = 1}\n             barEmptyData[point['x']] = 0\n           }\n         })\n         var vals = []\n         for (var key in codesDict){\n           vals.push(codesDict[key])\n       }\n       vals = vals.map(value => value===0 ? NaN : value);\n       radarData.push(vals)\n       localGraphCoordinates.push(subGC)\n       })\n       setRadarData(radarData)\n     }\n     console.log(barEmptyData)\n\n      var barData = []\n      Object.keys(barRawData).forEach(function(code) {\n        var barD = []\n        for (const [k, v] of Object.entries(barRawData[code])) {\n          barD.push({x: new Date(k), y: v})\n        }\n        for (const [k, v] of Object.entries(barEmptyData)) {\n          barD.push({x: new Date(k), y: v})\n        }\n        console.log(barD)\n        var codeBar = {}\n        codeBar['label'] = code\n        //codeBar['stack'] = 1\n        codeBar['backgroundColor'] = getRandomColor()\n        codeBar['borderColor'] = codeBar['backgroundColor']\n        //codeBar['borderWidth'] = 1\n        codeBar['barThickness'] = 20\n        codeBar['data'] = barD\n        barData.push(codeBar)\n    })\n\n    console.log(barData)\n\n\n    var parts = [];\n    partLabels.forEach(function(item) {\n      parts.push(item[\"Part Number\"]);\n    })\n\n    // Set Time range for main chart\n    var codesUsed = []\n    const dateOffset = (24*60*60*1000) * 31;\n    var minD = new Date(minDate.getTime() - dateOffset);\n    var maxD = new Date(maxDate.getTime() + dateOffset);\n\n    // Main graph\n    var Chart = require('chart.js');\n    const ctx = document.getElementById('chart').getContext('2d');\n    const myChart = new Chart(ctx, {\n    type: 'scatter',\n\n    data: {\n        datasets: [{\n            label: \"Part number: \" + parts[0],\n            data: localGraphCoordinates[0],\n            backgroundColor: \"#FF4136\",\n            borderColor: \"#FF4136\",\n            fill: false,\n            showLine: false,\n            borderWidth: 1,\n            pointRadius: 5,\n            pointHoverRadius: 5,\n        },\n        {\n          label: \"Part number: \" + parts[1],\n          data: localGraphCoordinates[1],\n          backgroundColor: \"#0074D9\",\n          borderColor: \"#0074D9\",\n          fill: false,\n          showLine: false,\n          borderWidth: 1,\n          pointRadius: 5,\n          pointHoverRadius: 5,\n      },\n      {\n        label: \"Part number: \" + parts[2],\n        data: localGraphCoordinates[2],\n        backgroundColor: \"#228B22\",\n        borderColor: \"#228B22\",\n        fill: false,\n        showLine: false,\n        borderWidth: 1,\n        pointRadius: 5,\n        pointHoverRadius: 5,\n    }\n    ]\n    },\n    options: {\n        scales: {\n          xAxes: [{\n            type: 'time',\n            //distribution: 'series',\n            time: {\n              unit: 'month',\n              //displayFormats: {quarter: 'll'}\n            },\n            ticks: {\n              min: minD,\n              max: maxD\n            }\n          }],\n            yAxes: [{\n                gridLines: false,\n                ticks: {\n                  min: 0,\n                  autoSkip: false,\n                  stepSize:1,\n                  callback: function(label, index, labels) {\n                    var result = false;\n                    if(localGraphCoordinates[0]){\n                      localGraphCoordinates[0].forEach(function(item){\n                      if(item['y'] == label && !codesUsed.includes(label)) {\n                        result = true; \n                        codesUsed.push(label)}\n                    })}\n                    if (result) {\n                      return label\n                    }\n                    if(localGraphCoordinates[1]){\n                      localGraphCoordinates[1].forEach(function(item){\n                      if(item['y'] == label && !codesUsed.includes(label)) {\n                        result = true; \n                        codesUsed.push(label)}\n                    })}\n                    if (result) {\n                      return label\n                    }\n                    if(localGraphCoordinates[2]){\n                      localGraphCoordinates[2].forEach(function(item){\n                      if(item['y'] == label && !codesUsed.includes(label)) {\n                        result = true; \n                        codesUsed.push(label)}\n                    })}\n                    if (result) {\n                      return label\n                    }\n                  }\n                }\n            }]\n        }\n    }\n});\n\n    // Radar Graph\n    const radarCtx = document.getElementById('radarChart').getContext('2d');\n    const radarChart = new Chart(radarCtx, {\n      type: 'radar',\n      data: {\n        labels: radarLabels,\n        datasets: [\n          {\n            label: \"Part number: \" + parts[0],\n            backgroundColor: 'rgba(255, 00, 00, 0.1)',\n            borderColor: '#FF4136',\n            borderWidth: 2,\n            data: radarData[0],\n            spanGaps: true\n          },\n          {\n            label: \"Part number: \" + parts[1],\n            backgroundColor: 'rgba(00, 00, 255, 0.1)',\n            borderColor: '#0074D9',\n            borderWidth: 2,\n            data: radarData[1],\n            spanGaps: true\n          },\n          {\n            label: \"Part number: \" + parts[2],\n            backgroundColor: 'rgba(00, 255, 00, 0.1)',\n            borderColor: '#228B22',\n            borderWidth: 2,\n            data: radarData[2],\n            spanGaps: true\n          }\n        ]\n      },\n      options: {\n        scale: {\n            angleLines: {\n                display: true\n            },\n            ticks: {\n              min: 0,\n              stepSize: 1\n            }\n        }\n    }\n    })\n\n    // Bar Graph\n    const barCtx = document.getElementById('barGraph').getContext('2d');\n    var stackedBar = new Chart(barCtx, {\n      type: 'bar',\n      data: {\n        datasets: [{\n          backgroundColor: 'rgba(00, 255, 00, 0.1)',\n          barPercentage: 0.5,\n          barThickness: 6,\n          maxBarThickness: 8,\n          minBarLength: 2,\n          data: [{x:'2016-12-25', y:20}, {x:'2016-12-26', y:10}]\n      },\n      {\n        backgroundColor: 'rgba(255, 00, 00, 0.1)',\n        barPercentage: 0.5,\n        barThickness: 6,\n        maxBarThickness: 8,\n        minBarLength: 2,\n        data: [{x:'2016-12-25', y:5}, {x:'2016-12-26', y:5}]\n    },\n    {\n      backgroundColor: '#228B22',\n      barPercentage: 0.5,\n      barThickness: 6,\n      maxBarThickness: 8,\n      minBarLength: 2,\n      data: [{x:'2016-12-25', y:20}, {x:'2016-12-26', y:10}]\n  },\n  {\n    backgroundColor: '#0074D9',\n    barPercentage: 0.5,\n    barThickness: 6,\n    maxBarThickness: 8,\n    minBarLength: 2,\n    data: [{x:'2016-12-25', y:0}, {x:'2016-12-26', y:5}, {x:'2016-12-27', y:5}]\n}\n  ]\n      },\n      options: {\n          scales: {\n              xAxes: [{\n                // ticks: {min: minD,\n                // max: maxD},\n                    type: 'time',\n                     distribution: 'series',\n                    time: {\n                      unit: 'month'\n                    },\n                  stacked: true\n                }],\n              yAxes: [{\n                  ticks: {stepSize: 1},\n                  stacked: true\n              }]\n          }\n      }\n  });\n  }\n\n\n//   function download(content, fileName, contentType) {\n//     var a = document.createElement(\"a\");\n//     var file = new Blob([content], {type: contentType});\n//     a.href = URL.createObjectURL(file);\n//     a.download = fileName;\n//     a.click();\n// }\n \n function handleChange(e) {\n    const files = e.target.files;\n    if (files && files[0]) file = files[0];\n  };\n \n function handleFile() {\n    /* Boilerplate to set up FileReader */\n    const reader = new FileReader();\n    const rABS = !!reader.readAsBinaryString;\n \n    reader.onload = (e) => {\n      const bstr = e.target.result;\n      const wb = XLSX.read(bstr, { type: rABS ? 'binary' : 'array', bookVBA : true });\n      const wsname = wb.SheetNames[0];\n      const ws = wb.Sheets[wsname];\n      data = XLSX.utils.sheet_to_json(ws, {raw: false});\n\n      cols = make_cols(ws['!ref'])\n\n        // Preprocess data\n        const strData = JSON.stringify(data, null, 2)\n        var jsonObject = JSON.parse(strData);\n        var i;\n        for(i = 0; i < jsonObject.length; i++){\n          if (!(\"Part Number\" in jsonObject[i] && \"Code\" in jsonObject[i] && \"Date\" in jsonObject[i])) {\n            delete jsonObject[i];\n          }\n          else {\n            var d = new Date(jsonObject[i][\"Date\"]);\n            if(!jsonObject[i].Code.match(/^\\d+$/)) {\n              delete jsonObject[i];\n            }\n            else if(isNaN(d.getMonth())) {\n              delete jsonObject[i];\n            }\n          }\n        }\n        const jsonRegroupedTest = groupBy(jsonObject, ['Equipment ID', 'Part Number'])\n        const jsonRegrouped = groupBy(jsonObject, ['Equipment ID', 'Part Number', 'Code'])\n        const equipmentComponentsList = Object.keys(jsonRegrouped);\n        var eqStateObject = [];\n        equipmentComponentsList.forEach(function(item) {\n          eqStateObject.push({\"Equipment ID\": item});\n        })\n\n        //Update states\n        updateEquipmentItemsState(eqStateObject);\n        updatepreprocessedDataState(jsonRegrouped);        \n\n    };\n    if (rABS) {\n      reader.readAsBinaryString(file);\n    } else {\n      reader.readAsArrayBuffer(file);\n    };\n  }\n\n \n    return (\n      <div>\n        <label htmlFor=\"file\">Upload your Excel File</label>\n        <br />\n        <input type=\"file\" className=\"form-control\" id=\"file\" accept={SheetJSFT} onChange={handleChange} />\n        <br />\n        <input type='submit' \n          value=\"Update\"\n          onClick={handleFile} />\n        \n        <div id=\"parent\">\n          <div id=\"EqID\" style={{ marginTop: '20%', margin:'10%'}}>\n            <GridComponent dataSource={equipmentItems}  \n              allowPaging={true}\n              pageSettings={{pageSize:10}}\n              allowFiltering={true}\n              rowSelected={equipmentRowSelected}\n              ref={g => equipmentGrid = g}\n              >\n              <ColumnsDirective>\n            <ColumnDirective field='Equipment ID' headerText='Equipment List' textAlign='Center'/>\n            </ColumnsDirective>\n            <Inject services={[Page, Filter]}/>\n            </GridComponent>\n          </div>\n\n          <div id=\"PID\" style={{ marginTop: '20%', margin:'10%'}}>\n          <GridComponent dataSource={partItems}\n          allowPaging={true}\n          pageSettings={{pageSize:10}}\n          allowFiltering={true}\n          rowSelected={partRowSelected}\n          rowDeselected={partRowSelected}\n          ref={g => partGrid = g}\n          //selectionSettings={selectionOptions}\n          >\n            <ColumnsDirective>\n            <ColumnDirective type='checkbox' width='50'/>\n          <ColumnDirective field='Part Number' headerText='Part Number' textAlign='Center'/>\n          </ColumnsDirective>\n          <Inject services={[Page, Filter]}/>\n          </GridComponent>\n          </div> \n\n          <div id=\"RC\" style={{ marginTop: '20%', margin:'10%'}}>\n          <GridComponent dataSource={codeItems}\n          allowPaging={true}\n          pageSettings={{pageSize:10}}\n          allowFiltering={true}\n          rowSelected={rcodeRowSelected}\n          rowDeselected={rcodeRowSelected}\n          ref={g => rcodeGrid = g}\n          //selectionSettings={selectionOptions}\n          >\n            <ColumnsDirective>\n            <ColumnDirective type='checkbox' width='50'/>\n          <ColumnDirective field='Code' headerText='Repair Code' textAlign='Center'/>\n          </ColumnsDirective>\n          <Inject services={[Page, Filter]}/>\n          </GridComponent>\n          </div>\n\n          <div id='graphButton'>\n            <MuiPickersUtilsProvider utils={DateFnsUtils}>\n              <Grid container justify='space-around'>\n                <KeyboardDatePicker\n                  //disableToolbar\n                  variant='dialog'\n                  format='MM/dd/yyyy'\n                  margin='normal'\n                  id='min-date'\n                  label='Start Date'\n                  value={minDate}\n                  onChange={handleMinDate}\n                  KeyboardButtonProps={{'arial-label': 'change date'}}\n                />\n                <KeyboardDatePicker\n                  //disableToolbar\n                  variant='dialog'\n                  format='MM/dd/yyyy'\n                  margin='normal'\n                  id='max-date'\n                  label='End Date'\n                  value={maxDate}\n                  onChange={handleMaxDate}\n                  KeyboardButtonProps={{'arial-label': 'change date'}}\n                />\n              </Grid>\n            </MuiPickersUtilsProvider>\n            <DefaultButton  onClick={renderChart}>Graph</DefaultButton>\n          </div>\n        </div>\n        <canvas id=\"chart\"></canvas>\n        <div id='secondaryGraphs'>\n          <canvas id=\"radarChart\"></canvas>\n          <canvas id=\"barGraph\"></canvas>\n        </div>\n      </div>       \n\n    )\n  }\n\n \nexport default App;"]},"metadata":{},"sourceType":"module"}