{"ast":null,"code":"'use strict';\n\nvar propertyAt = require('./property-value.js');\n\nfunction groupBy(items, properties, collect) {\n  // TODO argument validation\n  if (arguments.length < 2) return arr;\n\n  var groups = _groupBy(items, properties); // collect other properties values in array\n\n\n  if (collect && collect.length > 0) groups = collectProperties(groups, collect);\n  return groups;\n}\n\nfunction _groupBy(items, properties) {\n  var group = {};\n\n  if (typeof properties[0] === 'string') {\n    group = groupByCategory(items, properties[0]);\n  } else {\n    group = groupByRange(items, properties[0]);\n  }\n\n  properties = properties.slice(1);\n\n  if (properties.length > 0) {\n    for (var key in group) {\n      group[key] = _groupBy(group[key], properties);\n    }\n  }\n\n  return group;\n}\n\nfunction groupByCategory(arr, prop) {\n  return arr.reduce(function (group, item) {\n    var tags = propertyAt(item, prop);\n    tags.forEach(function (tag) {\n      group[tag] = group[tag] || [];\n      group[tag].push(item);\n    });\n    return group;\n  }, {});\n}\n\nfunction groupByRange(arr, lookup) {\n  return arr.reduce(function (group, f) {\n    var val, ind, tag;\n    val = propertyAt(f, lookup.property);\n    ind = locationOf(val, lookup.intervals);\n    if (ind === lookup.intervals.length - 1) ind--;\n    tag = lookup.labels ? lookup.labels[ind] : ind;\n    group[tag] = group[tag] || [];\n    group[tag].push(f);\n    return group;\n  }, {});\n} // collect the properties in an array \n\n\nfunction collectProperties(groups, properties) {\n  var collection = {};\n\n  for (var key in groups) {\n    if (Array.isArray(groups[key])) {\n      collection[key] = groups[key].reduce(function (coll, item) {\n        properties.forEach(function (prop) {\n          if (!coll[prop]) coll[prop] = [];\n          coll[prop] = coll[prop].concat(propertyAt(item, prop));\n        });\n        return coll;\n      }, {});\n    } else {\n      collection[key] = collectProperties(groups[key], properties);\n    }\n  }\n\n  return collection;\n} // similar to Array.findIndex but more efficient\n// http://stackoverflow.com/q/1344500/713573\n\n\nfunction locationOf(element, array, start, end) {\n  start = start || 0;\n  end = end || array.length;\n  var pivot = parseInt(start + (end - start) / 2, 10);\n  if (end - start <= 1 || array[pivot] === element) return pivot;\n\n  if (array[pivot] < element) {\n    return locationOf(element, array, pivot, end);\n  } else {\n    return locationOf(element, array, start, pivot);\n  }\n}\n\nmodule.exports = groupBy;","map":{"version":3,"sources":["C:/Users/appsk/Documents/Projects/PredictiveMaintenance/React PDM/env/frontend/node_modules/json-groupby/json-groupby.js"],"names":["propertyAt","require","groupBy","items","properties","collect","arguments","length","arr","groups","_groupBy","collectProperties","group","groupByCategory","groupByRange","slice","key","prop","reduce","item","tags","forEach","tag","push","lookup","f","val","ind","property","locationOf","intervals","labels","collection","Array","isArray","coll","concat","element","array","start","end","pivot","parseInt","module","exports"],"mappings":"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","sourcesContent":["'use strict';\nvar propertyAt = require('./property-value.js')\n\nfunction groupBy(items, properties, collect) {\n  // TODO argument validation\n  if (arguments.length < 2) return arr;\n  var groups = _groupBy(items, properties);\n  // collect other properties values in array\n  if (collect && collect.length > 0)\n    groups = collectProperties(groups, collect);\n\n  return groups;\n}\n\nfunction _groupBy(items, properties) {\n  var group = {};\n \tif (typeof properties[0] === 'string') {\n \t  group = groupByCategory(items, properties[0]);\n \t} else {\n \t  group = groupByRange(items, properties[0]);\n \t}\n  properties = properties.slice(1);\n  if (properties.length > 0) {\n    for (var key in group) {\n      group[key] = _groupBy(group[key], properties);\n    }\n  }\n  return group;\n}\n\nfunction groupByCategory(arr, prop) {\n  return arr.reduce(function(group, item) {\n    var tags = propertyAt(item, prop);\n    tags.forEach(function(tag) { \n      group[tag] = group[tag] || [];\n      group[tag].push(item);\n    });\n    return group;\n  },{});\n}\n\nfunction groupByRange(arr, lookup) {\n  return arr.reduce(function(group, f) {\n    var val, ind, tag;\n    val = propertyAt(f, lookup.property);\n    ind = locationOf(val, lookup.intervals);\n    if (ind === lookup.intervals.length -1) ind--;\n    tag = lookup.labels ? lookup.labels[ind] : ind;\n    group[tag] = group[tag] || [];\n    group[tag].push(f);\n    return group;\n  },{});\n}\n\n// collect the properties in an array \nfunction collectProperties(groups, properties) { \n  var collection = {};\n  for (var key in groups) {\n    if (Array.isArray(groups[key])) {\n      collection[key] = groups[key].reduce(function(coll, item) {\n        properties.forEach(function(prop) { \n          if (!coll[prop]) coll[prop] = [];\n          coll[prop] = coll[prop].concat(propertyAt(item,prop));\n        })\n        return coll;\n      }, {})\n    } else {\n      collection[key] = collectProperties(groups[key], properties);\n    }\n  }\n  return collection;\n}\n\n// similar to Array.findIndex but more efficient\n// http://stackoverflow.com/q/1344500/713573\nfunction locationOf(element, array, start, end) {\n  start = start || 0;\n  end = end || array.length;\n  var pivot = parseInt(start + (end - start) / 2, 10);\n  if (end-start <= 1 || array[pivot] === element) return pivot;\n  if (array[pivot] < element) {\n    return locationOf(element, array, pivot, end);\n  } else {\n    return locationOf(element, array, start, pivot);\n  }\n}\nmodule.exports = groupBy;\n"]},"metadata":{},"sourceType":"script"}