{"ast":null,"code":"import { Observer, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Row } from '../models/row';\nimport { AriaService } from '../services/aria-service';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\nimport { DataUtil } from '@syncfusion/ej2-data';\nexport var gridObserver = new Observer();\n/**\n * BlazorAction is used for performing Blazor related Grid Actions.\n * @hidden\n */\n\nvar BlazorAction =\n/** @class */\nfunction () {\n  function BlazorAction(parent) {\n    this.aria = new AriaService();\n    this.actionArgs = {};\n    this.virtualHeight = 0;\n    this.parent = parent;\n    this.addEventListener();\n  }\n\n  BlazorAction.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on('detailclick', this.onDetailRowClick, this);\n    this.parent.on('add-delete-success', this.addDeleteSuccess, this);\n    this.parent.on('editsuccess', this.editSuccess, this);\n    this.parent.on('setvisibility', this.setColumnVisibility, this);\n    this.parent.on('offset', this.setServerOffSet, this);\n    this.parent.on('updateaction', this.modelChanged, this);\n    this.parent.on(events.modelChanged, this.modelChanged, this);\n    this.parent.on('group-expand-collapse', this.onGroupClick, this);\n    this.parent.on('setcolumnstyles', this.setColVTableWidthAndTranslate, this);\n    this.parent.on('refresh-virtual-indices', this.invokeServerDataBind, this);\n    this.parent.on('contentcolgroup', this.contentColGroup, this);\n    this.parent.on(events.dataSourceModified, this.dataSourceModified, this);\n  };\n\n  BlazorAction.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off('detailclick', this.onDetailRowClick);\n    this.parent.off('add-delete-success', this.addDeleteSuccess);\n    this.parent.off('editsuccess', this.editSuccess);\n    this.parent.off('setvisibility', this.setColumnVisibility);\n    this.parent.off('offset', this.setServerOffSet);\n    this.parent.off('updateaction', this.modelChanged);\n    this.parent.off(events.modelChanged, this.modelChanged);\n    this.parent.off('group-expand-collapse', this.onGroupClick);\n    this.parent.off('setcolumnstyles', this.setColVTableWidthAndTranslate);\n    this.parent.off('refresh-virtual-indices', this.invokeServerDataBind);\n    this.parent.off('contentcolgroup', this.contentColGroup);\n    this.parent.off(events.dataSourceModified, this.dataSourceModified);\n  };\n\n  BlazorAction.prototype.getModuleName = function () {\n    return 'blazor';\n  };\n\n  ;\n\n  BlazorAction.prototype.modelChanged = function (args) {\n    this.actionArgs = args;\n    this.parent.currentAction = args;\n  };\n\n  BlazorAction.prototype.addDeleteSuccess = function (args) {\n    var _this = this;\n\n    var editArgs;\n    var action = 'action';\n    var data = 'data';\n    var index = 'index';\n    editArgs = {\n      requestType: args.requestType,\n      data: args[data],\n      action: args[action]\n    };\n\n    if (!isNullOrUndefined(args[index])) {\n      editArgs[index] = args[index];\n    }\n\n    args.promise.then(function (e) {\n      return _this.editSuccess(editArgs);\n    }).catch(function (e) {\n      if (isBlazor() && _this.parent.isServerRendered) {\n        var error = 'error';\n        var message = 'message';\n\n        if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n          e[error] = e[error][message];\n        }\n      }\n\n      _this.parent.trigger(events.actionFailure, isBlazor() && e instanceof Array ? e[0] : e);\n\n      _this.parent.hideSpinner();\n\n      _this.parent.log('actionfailure', {\n        error: e\n      });\n    });\n  };\n\n  BlazorAction.prototype.editSuccess = function (args) {\n    this.parent.renderModule.resetTemplates();\n    this.invokeServerDataBind(args);\n  };\n\n  BlazorAction.prototype.invokeServerDataBind = function (args) {\n    this.actionArgs = args;\n    this.parent.currentAction = args;\n    this.parent.allowServerDataBinding = true;\n    this.parent.serverDataBind();\n    this.parent.allowServerDataBinding = false;\n  };\n\n  BlazorAction.prototype.onDetailRowClick = function (target) {\n    var gObj = this.parent;\n    var adaptor = 'interopAdaptor';\n    var rIndex = 'rowIndex';\n    var invokeMethodAsync = 'invokeMethodAsync';\n    var tr = target.parentElement;\n    var uid = tr.getAttribute('data-uid');\n    var rowObj = gObj.getRowObjectFromUID(uid);\n    var args = {\n      uid: uid,\n      classList: target.classList[0],\n      index: tr.getAttribute('aria-rowindex'),\n      rowIndex: gObj.getRowsObject().indexOf(rowObj),\n      colSpan: this.parent.getVisibleColumns().length\n    };\n    gObj[adaptor][invokeMethodAsync]('OnDetailClick', args);\n\n    if (target.classList.contains('e-detailrowcollapse')) {\n      var rows = gObj.getRowsObject();\n      var rowData = rowObj.data;\n      var gridRowId = this.parent.getRowUid('grid-row');\n      var len = gObj.groupSettings.columns.length;\n      var gridRow = new Row({\n        isDataRow: true,\n        isExpand: true,\n        uid: gridRowId,\n        isDetailRow: true,\n        cells: [new Cell({\n          cellType: CellType.Indent\n        }), new Cell({\n          isDataCell: true,\n          visible: true\n        })]\n      });\n\n      for (var i = 0; i < len; i++) {\n        gridRow.cells.unshift(new Cell({\n          cellType: CellType.Indent\n        }));\n      }\n\n      rows.splice(args[rIndex] + 1, 0, gridRow);\n      gObj.trigger(events.detailDataBound, {\n        data: rowData\n      });\n      gObj.notify(events.detailDataBound, {\n        rows: gObj.getRowsObject()\n      });\n      rowObj.isExpand = true;\n      this.aria.setExpand(target, true);\n    } else {\n      gObj.getRowsObject().splice(args[rIndex] + 1, 1);\n      gObj.notify(events.detailDataBound, {\n        rows: gObj.getRowsObject()\n      });\n      rowObj.isExpand = false;\n      this.aria.setExpand(target, false);\n    }\n  };\n\n  BlazorAction.prototype.setColumnVisibility = function (columns) {\n    var visible = {};\n    var adaptor = 'interopAdaptor';\n    var invokeMethodAsync = 'invokeMethodAsync';\n\n    for (var i = 0; i < columns.length; i++) {\n      visible[columns[i].uid] = columns[i].visible;\n    }\n\n    this.parent[adaptor][invokeMethodAsync]('setColumnVisibility', {\n      visible: visible\n    });\n  };\n\n  BlazorAction.prototype.dataSuccess = function (args) {\n    if (this.parent.enableVirtualization && Object.keys(this.actionArgs).length === 0) {\n      this.actionArgs.requestType = 'virtualscroll';\n    }\n\n    var startIndex = 'startIndex';\n    var endIndex = 'endIndex';\n    this.actionArgs[startIndex] = args[startIndex];\n    this.actionArgs[endIndex] = args[endIndex];\n\n    if (this.parent.enableVirtualization) {\n      this.virtualContentModule = this.parent.contentModule;\n\n      if (this.virtualContentModule.activeKey === 'downArrow' || this.virtualContentModule.activeKey === 'upArrow') {\n        var row = this.parent.getRowByIndex(this.virtualContentModule.blzRowIndex);\n\n        if (row) {\n          this.parent.selectRow(parseInt(row.getAttribute('aria-rowindex'), 10)); // tslint:disable-next-line:no-any\n\n          row.cells[0].focus({\n            preventScroll: true\n          });\n        }\n      }\n\n      this.virtualContentModule.blazorDataLoad = false;\n    }\n\n    if (args.foreignColumnsData) {\n      var columns = this.parent.getColumns();\n\n      for (var i = 0; i < columns.length; i++) {\n        if (args.foreignColumnsData[columns[i].field]) {\n          columns[i].columnData = args.foreignColumnsData[columns[i].field];\n        }\n      }\n    }\n\n    if (this.parent.allowGrouping && this.parent.groupSettings.columns) {\n      var agg = [];\n      var aggRows = this.parent.aggregates;\n\n      for (var i = 0; i < aggRows.length; i++) {\n        var aggRow = aggRows[i];\n\n        for (var j = 0; j < aggRow.columns.length; j++) {\n          var aggr = {};\n          var type = aggRow.columns[j].type.toString();\n          aggr = {\n            type: type.toLowerCase(),\n            field: aggRow.columns[j].field\n          };\n          agg.push(aggr);\n        }\n      }\n\n      var data = void 0;\n      var aggrds = void 0;\n      var groupedCols = this.parent.groupSettings.columns;\n\n      for (var k = 0; k < groupedCols.length; k++) {\n        aggrds = data ? data : args.result;\n        data = DataUtil.group(aggrds, groupedCols[k], agg, null, null);\n      }\n\n      args.result = data ? data : args.result;\n    }\n\n    var rowUid = 'rowUid';\n    var offsetTime = 'offsetTime';\n    var off = 'offset';\n    this.parent[rowUid] = args[rowUid];\n    args[off] = Math.sign(args[off]) === 1 ? -Math.abs(args[off]) : Math.abs(args[off]);\n    this.parent[offsetTime] = args[off];\n\n    if (this.parent[offsetTime] !== new Date().getTimezoneOffset() / 60) {\n      if (this.parent.editSettings.mode !== 'Batch') {\n        var action = 'action';\n        var rowIndex = 'rowIndex';\n        var index = 'index';\n\n        if (this.actionArgs[action] === 'edit') {\n          this.setClientOffSet(args, this.actionArgs[rowIndex]);\n        } else if (this.actionArgs[action] === 'add') {\n          this.setClientOffSet(args, this.actionArgs[index]);\n        }\n      } else if (this.parent.editSettings.mode === 'Batch') {\n        var changes = 'changes';\n        var changedRecords = 'changedRecords';\n        var addedRecords = 'addedRecords';\n        var keyField = this.parent.getPrimaryKeyFieldNames()[0];\n        var batchChanges = this.actionArgs[changes] || {\n          changedRecords: [],\n          addedRecords: []\n        };\n\n        for (var i = 0; i < batchChanges[changedRecords].length; i++) {\n          for (var j = 0; j < args.result.length; j++) {\n            if (batchChanges[changedRecords][i][keyField] === args.result[j][keyField]) {\n              this.setClientOffSet(args, j);\n            }\n          }\n        }\n\n        for (var i = 0; i < batchChanges[addedRecords].length; i++) {\n          for (var j = 0; j < args.result.length; j++) {\n            if (batchChanges[addedRecords][i][keyField] === args.result[j][keyField]) {\n              this.setClientOffSet(args, j);\n            }\n          }\n        }\n      }\n    }\n\n    this.parent.renderModule.dataManagerSuccess(args, this.actionArgs);\n    this.parent.getMediaColumns();\n\n    if (this.parent.enableVirtualization) {\n      this.virtualContentModule = this.parent.contentModule;\n      this.setColVTableWidthAndTranslate();\n\n      if (this.parent.groupSettings.columns.length) {\n        this.virtualContentModule.setVirtualHeight(this.virtualHeight);\n      }\n    }\n\n    this.actionArgs = this.parent.currentAction = {};\n  };\n\n  BlazorAction.prototype.removeDisplayNone = function () {\n    var renderedContentRows = this.parent.getContentTable().querySelectorAll('tr');\n\n    for (var i = 0; i < renderedContentRows.length; i++) {\n      var renderedContentCells = renderedContentRows[i].querySelectorAll('td');\n\n      for (var j = 0; j < renderedContentCells.length; j++) {\n        renderedContentCells[j].style.display = '';\n      }\n    }\n  };\n\n  BlazorAction.prototype.setVirtualTrackHeight = function (args) {\n    this.virtualHeight = args.VisibleGroupedRowsCount * this.parent.getRowHeight();\n    this.virtualContentModule.setVirtualHeight(this.virtualHeight);\n  };\n\n  BlazorAction.prototype.setColVTableWidthAndTranslate = function (args) {\n    if (this.parent.enableColumnVirtualization && this.virtualContentModule.prevInfo && JSON.stringify(this.virtualContentModule.currentInfo.columnIndexes) !== JSON.stringify(this.virtualContentModule.prevInfo.columnIndexes) || args && args.refresh) {\n      var translateX = this.virtualContentModule.getColumnOffset(this.virtualContentModule.startColIndex - 1);\n      var width = this.virtualContentModule.getColumnOffset(this.virtualContentModule.endColIndex - 1) - translateX + '';\n      this.virtualContentModule.header.virtualEle.setWrapperWidth(width);\n      this.virtualContentModule.virtualEle.setWrapperWidth(width);\n      this.virtualContentModule.header.virtualEle.adjustTable(translateX, 0);\n      this.parent.getContentTable().parentElement.style.width = width + 'px';\n    }\n\n    if (this.dataSourceChanged) {\n      this.virtualContentModule.getPanel().firstElementChild.scrollTop = 0;\n      this.virtualContentModule.getPanel().firstElementChild.scrollLeft = 0;\n\n      if (this.virtualContentModule.header.virtualEle) {\n        this.virtualContentModule.header.virtualEle.adjustTable(0, 0);\n      }\n\n      this.parent.getContentTable().parentElement.style.transform = 'translate(0px,0px)';\n      this.virtualContentModule.refreshOffsets();\n      this.virtualContentModule.refreshVirtualElement();\n      this.dataSourceChanged = false;\n    }\n  };\n\n  BlazorAction.prototype.dataSourceModified = function () {\n    this.dataSourceChanged = true;\n  };\n\n  BlazorAction.prototype.setClientOffSet = function (args, index) {\n    var timeZone = DataUtil.serverTimezoneOffset;\n    DataUtil.serverTimezoneOffset = 0;\n    args.result[index] = DataUtil.parse.parseJson(JSON.stringify(args.result[index]));\n    DataUtil.serverTimezoneOffset = timeZone;\n  };\n\n  BlazorAction.prototype.setServerOffSet = function (args) {\n    var serverTimeZone = DataUtil.serverTimezoneOffset;\n    var offsetTime = 'offsetTime';\n    var data = 'data';\n    var timeZone = new Date().getTimezoneOffset() / 60 * 2 + this.parent[offsetTime];\n    DataUtil.serverTimezoneOffset = timeZone;\n    args[data] = DataUtil.parse.parseJson(JSON.stringify(args[data]));\n    DataUtil.serverTimezoneOffset = serverTimeZone;\n  };\n\n  BlazorAction.prototype.onGroupClick = function (args) {\n    var _this = this;\n\n    var adaptor = 'interopAdaptor';\n    var content = 'contentModule';\n    var invokeMethodAsync = 'invokeMethodAsync';\n    var exactTopIndex = 'exactTopIndex';\n    args[exactTopIndex] = Math.round(this.parent.element.querySelector('.e-content').scrollTop / this.parent.getRowHeight());\n    var rowHeight = 'rowHeight';\n    args[rowHeight] = this.parent.getRowHeight();\n    this.parent[adaptor][invokeMethodAsync]('OnGroupExpandClick', args).then(function () {\n      _this.parent[content].rowElements = [].slice.call(_this.parent.getContentTable().querySelectorAll('tr.e-row[data-uid]'));\n    });\n  };\n\n  BlazorAction.prototype.setPersistData = function (args) {\n    var gObj = this.parent;\n    gObj.mergePersistGridData(args);\n    var bulkChanges = 'bulkChanges';\n\n    if (gObj[bulkChanges].columns) {\n      delete gObj[bulkChanges].columns;\n    }\n\n    gObj.headerModule.refreshUI();\n    gObj.notify('persist-data-changed', {});\n    gObj.notify(events.columnVisibilityChanged, gObj.getColumns());\n  };\n\n  ;\n\n  BlazorAction.prototype.resetPersistData = function (args) {\n    var gObj = this.parent;\n    var bulkChanges = 'bulkChanges';\n    var parseArgs = JSON.parse(args);\n    var persistArgs = {\n      filterSettings: parseArgs.filterSettings,\n      groupSettings: parseArgs.groupSettings,\n      pageSettings: parseArgs.pageSettings,\n      sortSettings: parseArgs.sortSettings,\n      searchSettings: parseArgs.searchSettings,\n      columns: parseArgs.columns\n    };\n\n    if (!persistArgs.sortSettings.columns) {\n      persistArgs.sortSettings.columns = [];\n    }\n\n    if (!persistArgs.groupSettings.columns) {\n      persistArgs.groupSettings.columns = [];\n    }\n\n    if (!persistArgs.pageSettings.currentPage) {\n      gObj.pageSettings.currentPage = 1;\n    }\n\n    for (var i = 0; i < gObj.columns.length; i++) {\n      if (gObj.groupSettings.columns.indexOf(gObj.columns[i].field) > -1) {\n        gObj.columns[i].visible = true;\n      }\n    }\n\n    gObj.mergePersistGridData(persistArgs);\n    gObj.notify('persist-data-changed', {});\n\n    if (gObj[bulkChanges].columns) {\n      delete gObj[bulkChanges].columns;\n    }\n\n    gObj.headerModule.refreshUI();\n\n    for (var i = 0; i < gObj.columns.length; i++) {\n      gObj.columns[i].editType = gObj.columns[i].editType.toLowerCase();\n    }\n\n    gObj.setProperties({\n      filterSettings: {\n        columns: []\n      }\n    }, true);\n  };\n\n  BlazorAction.prototype.contentColGroup = function () {\n    var gObj = this.parent;\n    var contentTable = gObj.getContent().querySelector('.e-table');\n    contentTable.insertBefore(contentTable.querySelector(\"#content-\" + gObj.element.id + \"colGroup\"), contentTable.querySelector('tbody'));\n\n    if (gObj.frozenRows) {\n      var headerTable = gObj.getHeaderContent().querySelector('.e-table');\n      headerTable.insertBefore(headerTable.querySelector(\"#\" + gObj.element.id + \"colGroup\"), headerTable.querySelector('tbody'));\n    }\n\n    if (gObj.getFrozenColumns() !== 0) {\n      var movableContentTable = gObj.getContent().querySelector('.e-movablecontent').querySelector('.e-table');\n      movableContentTable.insertBefore(movableContentTable.querySelector(\"#\" + gObj.element.id + \"colGroup\"), movableContentTable.querySelector('tbody'));\n\n      if (gObj.frozenRows) {\n        var movableHeaderTable = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('.e-table');\n        movableHeaderTable.insertBefore(movableHeaderTable.querySelector(\"#\" + gObj.element.id + \"colGroup\"), movableHeaderTable.querySelector('tbody'));\n      }\n    }\n  };\n\n  BlazorAction.prototype.dataFailure = function (args) {\n    this.parent.renderModule.dataManagerFailure(args, this.actionArgs);\n    this.actionArgs = this.parent.currentAction = {};\n  };\n\n  BlazorAction.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n\n  return BlazorAction;\n}();\n\nexport { BlazorAction };","map":{"version":3,"sources":["C:/Users/appsk/Documents/Projects/PredictiveMaintenance/React PDM/env/frontend/node_modules/@syncfusion/ej2-grids/src/grid/actions/blazor-action.js"],"names":["Observer","isBlazor","isNullOrUndefined","events","Row","AriaService","Cell","CellType","DataUtil","gridObserver","BlazorAction","parent","aria","actionArgs","virtualHeight","addEventListener","prototype","isDestroyed","on","onDetailRowClick","addDeleteSuccess","editSuccess","setColumnVisibility","setServerOffSet","modelChanged","onGroupClick","setColVTableWidthAndTranslate","invokeServerDataBind","contentColGroup","dataSourceModified","removeEventListener","off","getModuleName","args","currentAction","_this","editArgs","action","data","index","requestType","promise","then","e","catch","isServerRendered","error","message","trigger","actionFailure","Array","hideSpinner","log","renderModule","resetTemplates","allowServerDataBinding","serverDataBind","target","gObj","adaptor","rIndex","invokeMethodAsync","tr","parentElement","uid","getAttribute","rowObj","getRowObjectFromUID","classList","rowIndex","getRowsObject","indexOf","colSpan","getVisibleColumns","length","contains","rows","rowData","gridRowId","getRowUid","len","groupSettings","columns","gridRow","isDataRow","isExpand","isDetailRow","cells","cellType","Indent","isDataCell","visible","i","unshift","splice","detailDataBound","notify","setExpand","dataSuccess","enableVirtualization","Object","keys","startIndex","endIndex","virtualContentModule","contentModule","activeKey","row","getRowByIndex","blzRowIndex","selectRow","parseInt","focus","preventScroll","blazorDataLoad","foreignColumnsData","getColumns","field","columnData","allowGrouping","agg","aggRows","aggregates","aggRow","j","aggr","type","toString","toLowerCase","push","aggrds","groupedCols","k","result","group","rowUid","offsetTime","Math","sign","abs","Date","getTimezoneOffset","editSettings","mode","setClientOffSet","changes","changedRecords","addedRecords","keyField","getPrimaryKeyFieldNames","batchChanges","dataManagerSuccess","getMediaColumns","setVirtualHeight","removeDisplayNone","renderedContentRows","getContentTable","querySelectorAll","renderedContentCells","style","display","setVirtualTrackHeight","VisibleGroupedRowsCount","getRowHeight","enableColumnVirtualization","prevInfo","JSON","stringify","currentInfo","columnIndexes","refresh","translateX","getColumnOffset","startColIndex","width","endColIndex","header","virtualEle","setWrapperWidth","adjustTable","dataSourceChanged","getPanel","firstElementChild","scrollTop","scrollLeft","transform","refreshOffsets","refreshVirtualElement","timeZone","serverTimezoneOffset","parse","parseJson","serverTimeZone","content","exactTopIndex","round","element","querySelector","rowHeight","rowElements","slice","call","setPersistData","mergePersistGridData","bulkChanges","headerModule","refreshUI","columnVisibilityChanged","resetPersistData","parseArgs","persistArgs","filterSettings","pageSettings","sortSettings","searchSettings","currentPage","editType","setProperties","contentTable","getContent","insertBefore","id","frozenRows","headerTable","getHeaderContent","getFrozenColumns","movableContentTable","movableHeaderTable","dataFailure","dataManagerFailure","destroy"],"mappings":"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","sourcesContent":["import { Observer, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Row } from '../models/row';\nimport { AriaService } from '../services/aria-service';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\nimport { DataUtil } from '@syncfusion/ej2-data';\nexport var gridObserver = new Observer();\n/**\n * BlazorAction is used for performing Blazor related Grid Actions.\n * @hidden\n */\nvar BlazorAction = /** @class */ (function () {\n    function BlazorAction(parent) {\n        this.aria = new AriaService();\n        this.actionArgs = {};\n        this.virtualHeight = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    BlazorAction.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on('detailclick', this.onDetailRowClick, this);\n        this.parent.on('add-delete-success', this.addDeleteSuccess, this);\n        this.parent.on('editsuccess', this.editSuccess, this);\n        this.parent.on('setvisibility', this.setColumnVisibility, this);\n        this.parent.on('offset', this.setServerOffSet, this);\n        this.parent.on('updateaction', this.modelChanged, this);\n        this.parent.on(events.modelChanged, this.modelChanged, this);\n        this.parent.on('group-expand-collapse', this.onGroupClick, this);\n        this.parent.on('setcolumnstyles', this.setColVTableWidthAndTranslate, this);\n        this.parent.on('refresh-virtual-indices', this.invokeServerDataBind, this);\n        this.parent.on('contentcolgroup', this.contentColGroup, this);\n        this.parent.on(events.dataSourceModified, this.dataSourceModified, this);\n    };\n    BlazorAction.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('detailclick', this.onDetailRowClick);\n        this.parent.off('add-delete-success', this.addDeleteSuccess);\n        this.parent.off('editsuccess', this.editSuccess);\n        this.parent.off('setvisibility', this.setColumnVisibility);\n        this.parent.off('offset', this.setServerOffSet);\n        this.parent.off('updateaction', this.modelChanged);\n        this.parent.off(events.modelChanged, this.modelChanged);\n        this.parent.off('group-expand-collapse', this.onGroupClick);\n        this.parent.off('setcolumnstyles', this.setColVTableWidthAndTranslate);\n        this.parent.off('refresh-virtual-indices', this.invokeServerDataBind);\n        this.parent.off('contentcolgroup', this.contentColGroup);\n        this.parent.off(events.dataSourceModified, this.dataSourceModified);\n    };\n    BlazorAction.prototype.getModuleName = function () { return 'blazor'; };\n    ;\n    BlazorAction.prototype.modelChanged = function (args) {\n        this.actionArgs = args;\n        this.parent.currentAction = args;\n    };\n    BlazorAction.prototype.addDeleteSuccess = function (args) {\n        var _this = this;\n        var editArgs;\n        var action = 'action';\n        var data = 'data';\n        var index = 'index';\n        editArgs = {\n            requestType: args.requestType,\n            data: args[data],\n            action: args[action]\n        };\n        if (!isNullOrUndefined(args[index])) {\n            editArgs[index] = args[index];\n        }\n        args.promise.then(function (e) { return _this.editSuccess(editArgs); }).catch(function (e) {\n            if (isBlazor() && _this.parent.isServerRendered) {\n                var error = 'error';\n                var message = 'message';\n                if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n                    e[error] = e[error][message];\n                }\n            }\n            _this.parent.trigger(events.actionFailure, ((isBlazor() && e instanceof Array) ? e[0] : e));\n            _this.parent.hideSpinner();\n            _this.parent.log('actionfailure', { error: e });\n        });\n    };\n    BlazorAction.prototype.editSuccess = function (args) {\n        this.parent.renderModule.resetTemplates();\n        this.invokeServerDataBind(args);\n    };\n    BlazorAction.prototype.invokeServerDataBind = function (args) {\n        this.actionArgs = args;\n        this.parent.currentAction = args;\n        this.parent.allowServerDataBinding = true;\n        this.parent.serverDataBind();\n        this.parent.allowServerDataBinding = false;\n    };\n    BlazorAction.prototype.onDetailRowClick = function (target) {\n        var gObj = this.parent;\n        var adaptor = 'interopAdaptor';\n        var rIndex = 'rowIndex';\n        var invokeMethodAsync = 'invokeMethodAsync';\n        var tr = target.parentElement;\n        var uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(uid);\n        var args = {\n            uid: uid, classList: target.classList[0], index: tr.getAttribute('aria-rowindex'),\n            rowIndex: gObj.getRowsObject().indexOf(rowObj), colSpan: this.parent.getVisibleColumns().length\n        };\n        gObj[adaptor][invokeMethodAsync]('OnDetailClick', args);\n        if (target.classList.contains('e-detailrowcollapse')) {\n            var rows = gObj.getRowsObject();\n            var rowData = rowObj.data;\n            var gridRowId = this.parent.getRowUid('grid-row');\n            var len = gObj.groupSettings.columns.length;\n            var gridRow = new Row({\n                isDataRow: true,\n                isExpand: true,\n                uid: gridRowId,\n                isDetailRow: true,\n                cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n            });\n            for (var i = 0; i < len; i++) {\n                gridRow.cells.unshift(new Cell({ cellType: CellType.Indent }));\n            }\n            rows.splice(args[rIndex] + 1, 0, gridRow);\n            gObj.trigger(events.detailDataBound, { data: rowData });\n            gObj.notify(events.detailDataBound, { rows: gObj.getRowsObject() });\n            rowObj.isExpand = true;\n            this.aria.setExpand(target, true);\n        }\n        else {\n            gObj.getRowsObject().splice(args[rIndex] + 1, 1);\n            gObj.notify(events.detailDataBound, { rows: gObj.getRowsObject() });\n            rowObj.isExpand = false;\n            this.aria.setExpand(target, false);\n        }\n    };\n    BlazorAction.prototype.setColumnVisibility = function (columns) {\n        var visible = {};\n        var adaptor = 'interopAdaptor';\n        var invokeMethodAsync = 'invokeMethodAsync';\n        for (var i = 0; i < columns.length; i++) {\n            visible[columns[i].uid] = columns[i].visible;\n        }\n        this.parent[adaptor][invokeMethodAsync]('setColumnVisibility', { visible: visible });\n    };\n    BlazorAction.prototype.dataSuccess = function (args) {\n        if (this.parent.enableVirtualization && Object.keys(this.actionArgs).length === 0) {\n            this.actionArgs.requestType = 'virtualscroll';\n        }\n        var startIndex = 'startIndex';\n        var endIndex = 'endIndex';\n        this.actionArgs[startIndex] = args[startIndex];\n        this.actionArgs[endIndex] = args[endIndex];\n        if (this.parent.enableVirtualization) {\n            this.virtualContentModule = this.parent.contentModule;\n            if (this.virtualContentModule.activeKey === 'downArrow' || this.virtualContentModule.activeKey === 'upArrow') {\n                var row = this.parent.getRowByIndex(this.virtualContentModule.blzRowIndex);\n                if (row) {\n                    this.parent.selectRow(parseInt(row.getAttribute('aria-rowindex'), 10));\n                    // tslint:disable-next-line:no-any\n                    row.cells[0].focus({ preventScroll: true });\n                }\n            }\n            this.virtualContentModule.blazorDataLoad = false;\n        }\n        if (args.foreignColumnsData) {\n            var columns = this.parent.getColumns();\n            for (var i = 0; i < columns.length; i++) {\n                if (args.foreignColumnsData[columns[i].field]) {\n                    columns[i].columnData = args.foreignColumnsData[columns[i].field];\n                }\n            }\n        }\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns) {\n            var agg = [];\n            var aggRows = this.parent.aggregates;\n            for (var i = 0; i < aggRows.length; i++) {\n                var aggRow = aggRows[i];\n                for (var j = 0; j < aggRow.columns.length; j++) {\n                    var aggr = {};\n                    var type = aggRow.columns[j].type.toString();\n                    aggr = { type: type.toLowerCase(), field: aggRow.columns[j].field };\n                    agg.push(aggr);\n                }\n            }\n            var data = void 0;\n            var aggrds = void 0;\n            var groupedCols = this.parent.groupSettings.columns;\n            for (var k = 0; k < groupedCols.length; k++) {\n                aggrds = data ? data : args.result;\n                data = DataUtil.group(aggrds, groupedCols[k], agg, null, null);\n            }\n            args.result = data ? data : args.result;\n        }\n        var rowUid = 'rowUid';\n        var offsetTime = 'offsetTime';\n        var off = 'offset';\n        this.parent[rowUid] = args[rowUid];\n        args[off] = Math.sign(args[off]) === 1 ? -Math.abs(args[off]) : Math.abs(args[off]);\n        this.parent[offsetTime] = args[off];\n        if (this.parent[offsetTime] !== new Date().getTimezoneOffset() / 60) {\n            if (this.parent.editSettings.mode !== 'Batch') {\n                var action = 'action';\n                var rowIndex = 'rowIndex';\n                var index = 'index';\n                if (this.actionArgs[action] === 'edit') {\n                    this.setClientOffSet(args, this.actionArgs[rowIndex]);\n                }\n                else if (this.actionArgs[action] === 'add') {\n                    this.setClientOffSet(args, this.actionArgs[index]);\n                }\n            }\n            else if (this.parent.editSettings.mode === 'Batch') {\n                var changes = 'changes';\n                var changedRecords = 'changedRecords';\n                var addedRecords = 'addedRecords';\n                var keyField = this.parent.getPrimaryKeyFieldNames()[0];\n                var batchChanges = this.actionArgs[changes] || { changedRecords: [], addedRecords: [] };\n                for (var i = 0; i < batchChanges[changedRecords].length; i++) {\n                    for (var j = 0; j < args.result.length; j++) {\n                        if (batchChanges[changedRecords][i][keyField] === args.result[j][keyField]) {\n                            this.setClientOffSet(args, j);\n                        }\n                    }\n                }\n                for (var i = 0; i < batchChanges[addedRecords].length; i++) {\n                    for (var j = 0; j < args.result.length; j++) {\n                        if (batchChanges[addedRecords][i][keyField] === args.result[j][keyField]) {\n                            this.setClientOffSet(args, j);\n                        }\n                    }\n                }\n            }\n        }\n        this.parent.renderModule.dataManagerSuccess(args, this.actionArgs);\n        this.parent.getMediaColumns();\n        if (this.parent.enableVirtualization) {\n            this.virtualContentModule = this.parent.contentModule;\n            this.setColVTableWidthAndTranslate();\n            if (this.parent.groupSettings.columns.length) {\n                this.virtualContentModule.setVirtualHeight(this.virtualHeight);\n            }\n        }\n        this.actionArgs = this.parent.currentAction = {};\n    };\n    BlazorAction.prototype.removeDisplayNone = function () {\n        var renderedContentRows = this.parent.getContentTable().querySelectorAll('tr');\n        for (var i = 0; i < renderedContentRows.length; i++) {\n            var renderedContentCells = renderedContentRows[i].querySelectorAll('td');\n            for (var j = 0; j < renderedContentCells.length; j++) {\n                renderedContentCells[j].style.display = '';\n            }\n        }\n    };\n    BlazorAction.prototype.setVirtualTrackHeight = function (args) {\n        this.virtualHeight = args.VisibleGroupedRowsCount * this.parent.getRowHeight();\n        this.virtualContentModule.setVirtualHeight(this.virtualHeight);\n    };\n    BlazorAction.prototype.setColVTableWidthAndTranslate = function (args) {\n        if (this.parent.enableColumnVirtualization && this.virtualContentModule.prevInfo &&\n            (JSON.stringify(this.virtualContentModule.currentInfo.columnIndexes) !==\n                JSON.stringify(this.virtualContentModule.prevInfo.columnIndexes)) || ((args && args.refresh))) {\n            var translateX = this.virtualContentModule.getColumnOffset(this.virtualContentModule.startColIndex - 1);\n            var width = this.virtualContentModule.getColumnOffset(this.virtualContentModule.endColIndex - 1) - translateX + '';\n            this.virtualContentModule.header.virtualEle.setWrapperWidth(width);\n            this.virtualContentModule.virtualEle.setWrapperWidth(width);\n            this.virtualContentModule.header.virtualEle.adjustTable(translateX, 0);\n            this.parent.getContentTable().parentElement.style.width = width + 'px';\n        }\n        if (this.dataSourceChanged) {\n            this.virtualContentModule.getPanel().firstElementChild.scrollTop = 0;\n            this.virtualContentModule.getPanel().firstElementChild.scrollLeft = 0;\n            if (this.virtualContentModule.header.virtualEle) {\n                this.virtualContentModule.header.virtualEle.adjustTable(0, 0);\n            }\n            this.parent.getContentTable().parentElement.style.transform = 'translate(0px,0px)';\n            this.virtualContentModule.refreshOffsets();\n            this.virtualContentModule.refreshVirtualElement();\n            this.dataSourceChanged = false;\n        }\n    };\n    BlazorAction.prototype.dataSourceModified = function () {\n        this.dataSourceChanged = true;\n    };\n    BlazorAction.prototype.setClientOffSet = function (args, index) {\n        var timeZone = DataUtil.serverTimezoneOffset;\n        DataUtil.serverTimezoneOffset = 0;\n        args.result[index] = DataUtil.parse.parseJson(JSON.stringify(args.result[index]));\n        DataUtil.serverTimezoneOffset = timeZone;\n    };\n    BlazorAction.prototype.setServerOffSet = function (args) {\n        var serverTimeZone = DataUtil.serverTimezoneOffset;\n        var offsetTime = 'offsetTime';\n        var data = 'data';\n        var timeZone = new Date().getTimezoneOffset() / 60 * 2 + this.parent[offsetTime];\n        DataUtil.serverTimezoneOffset = timeZone;\n        args[data] = DataUtil.parse.parseJson(JSON.stringify(args[data]));\n        DataUtil.serverTimezoneOffset = serverTimeZone;\n    };\n    BlazorAction.prototype.onGroupClick = function (args) {\n        var _this = this;\n        var adaptor = 'interopAdaptor';\n        var content = 'contentModule';\n        var invokeMethodAsync = 'invokeMethodAsync';\n        var exactTopIndex = 'exactTopIndex';\n        args[exactTopIndex] = Math.round((this.parent.element.querySelector('.e-content').scrollTop) / this.parent.getRowHeight());\n        var rowHeight = 'rowHeight';\n        args[rowHeight] = this.parent.getRowHeight();\n        this.parent[adaptor][invokeMethodAsync]('OnGroupExpandClick', args).then(function () {\n            _this.parent[content].rowElements = [].slice.call(_this.parent.getContentTable().querySelectorAll('tr.e-row[data-uid]'));\n        });\n    };\n    BlazorAction.prototype.setPersistData = function (args) {\n        var gObj = this.parent;\n        gObj.mergePersistGridData(args);\n        var bulkChanges = 'bulkChanges';\n        if (gObj[bulkChanges].columns) {\n            delete gObj[bulkChanges].columns;\n        }\n        gObj.headerModule.refreshUI();\n        gObj.notify('persist-data-changed', {});\n        gObj.notify(events.columnVisibilityChanged, gObj.getColumns());\n    };\n    ;\n    BlazorAction.prototype.resetPersistData = function (args) {\n        var gObj = this.parent;\n        var bulkChanges = 'bulkChanges';\n        var parseArgs = JSON.parse(args);\n        var persistArgs = { filterSettings: parseArgs.filterSettings,\n            groupSettings: parseArgs.groupSettings, pageSettings: parseArgs.pageSettings, sortSettings: parseArgs.sortSettings,\n            searchSettings: parseArgs.searchSettings, columns: parseArgs.columns };\n        if (!persistArgs.sortSettings.columns) {\n            persistArgs.sortSettings.columns = [];\n        }\n        if (!persistArgs.groupSettings.columns) {\n            persistArgs.groupSettings.columns = [];\n        }\n        if (!persistArgs.pageSettings.currentPage) {\n            gObj.pageSettings.currentPage = 1;\n        }\n        for (var i = 0; i < gObj.columns.length; i++) {\n            if (gObj.groupSettings.columns.indexOf(gObj.columns[i].field) > -1) {\n                gObj.columns[i].visible = true;\n            }\n        }\n        gObj.mergePersistGridData(persistArgs);\n        gObj.notify('persist-data-changed', {});\n        if (gObj[bulkChanges].columns) {\n            delete gObj[bulkChanges].columns;\n        }\n        gObj.headerModule.refreshUI();\n        for (var i = 0; i < gObj.columns.length; i++) {\n            gObj.columns[i].editType = gObj.columns[i].editType.toLowerCase();\n        }\n        gObj.setProperties({ filterSettings: { columns: [] } }, true);\n    };\n    BlazorAction.prototype.contentColGroup = function () {\n        var gObj = this.parent;\n        var contentTable = gObj.getContent().querySelector('.e-table');\n        contentTable.insertBefore(contentTable.querySelector(\"#content-\" + gObj.element.id + \"colGroup\"), contentTable.querySelector('tbody'));\n        if (gObj.frozenRows) {\n            var headerTable = gObj.getHeaderContent().querySelector('.e-table');\n            headerTable.insertBefore(headerTable.querySelector(\"#\" + gObj.element.id + \"colGroup\"), headerTable.querySelector('tbody'));\n        }\n        if (gObj.getFrozenColumns() !== 0) {\n            var movableContentTable = gObj.getContent().querySelector('.e-movablecontent').querySelector('.e-table');\n            movableContentTable.insertBefore(movableContentTable.querySelector(\"#\" + gObj.element.id + \"colGroup\"), movableContentTable.querySelector('tbody'));\n            if (gObj.frozenRows) {\n                var movableHeaderTable = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('.e-table');\n                movableHeaderTable.insertBefore(movableHeaderTable.querySelector(\"#\" + gObj.element.id + \"colGroup\"), movableHeaderTable.querySelector('tbody'));\n            }\n        }\n    };\n    BlazorAction.prototype.dataFailure = function (args) {\n        this.parent.renderModule.dataManagerFailure(args, this.actionArgs);\n        this.actionArgs = this.parent.currentAction = {};\n    };\n    BlazorAction.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return BlazorAction;\n}());\nexport { BlazorAction };\n"]},"metadata":{},"sourceType":"module"}