{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\appsk\\\\Documents\\\\Projects\\\\PredictiveMaintenance\\\\React PDM\\\\env\\\\frontend\\\\src\\\\App.js\";\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport { ExcelRenderer } from \"react-excel-renderer\"; //import ExcelPage from \"./components/excelPage\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.onFileChange = fileList => {\n      console.log(\"fileList\", fileList);\n      let fileObj = fileList;\n\n      if (!fileObj) {\n        this.setState({\n          errorMessage: \"No file uploaded!\"\n        });\n        return false;\n      }\n\n      console.log(\"fileObj.type:\", fileObj.type);\n\n      if (!(fileObj.type === \"application/vnd.ms-excel\" || fileObj.type === \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\")) {\n        this.setState({\n          errorMessage: \"Unknown file format. Only Excel files are uploaded!\"\n        });\n        return false;\n      } //just pass the fileObj as parameter\n\n\n      ExcelRenderer(fileObj, (err, resp) => {\n        if (err) {\n          console.log(err);\n        } else {\n          let newRows = [];\n          resp.rows.slice(1).map((row, index) => {\n            if (row && row !== \"undefined\") {\n              newRows.push({\n                key: index,\n                name: row[0],\n                age: row[1],\n                gender: row[2]\n              });\n            }\n          });\n\n          if (newRows.length === 0) {\n            this.setState({\n              errorMessage: \"No data found in file!\"\n            });\n            return false;\n          } else {\n            this.setState({\n              cols: resp.cols,\n              rows: newRows,\n              errorMessage: null\n            });\n          }\n        }\n      });\n      return false;\n    };\n\n    this.onFileUpload = async () => {\n      console.log(\"submitting: \", this.state.rows); //submit to API\n      //if successful, banigate and clear the data\n      //this.setState({ rows: [] })\n    };\n\n    this.state = {\n      // Initially, no file is selected \n      selectedFile: null\n    };\n  }\n\n  checkFile(file) {\n    let errorMessage = \"\";\n\n    if (!file || !file[0]) {\n      return;\n    }\n\n    const isExcel = file[0].type === \"application/vnd.ms-excel\" || file[0].type === \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\";\n\n    if (!isExcel) {\n      errorMessage = \"You can only upload Excel file!\";\n    }\n\n    console.log(\"file\", file[0].type);\n    const isLt2M = file[0].size / 1024 / 1024 < 2;\n\n    if (!isLt2M) {\n      errorMessage = \"File must be smaller than 2MB!\";\n    }\n\n    console.log(\"errorMessage\", errorMessage);\n    return errorMessage;\n  }\n\n  // On file select (from the pop up) \n  // onFileChange = event => { \n  //   // Update the state \n  //   this.setState({ selectedFile: event.target.files[0] }); \n  // }; \n  // // On file upload (click the upload button) \n  // onFileUpload = () => { \n  //   // Create an object of formData \n  //   const formData = new FormData(); \n  //   // Update the formData object \n  //   formData.append( \n  //     \"myFile\", \n  //     this.state.selectedFile, \n  //     this.state.selectedFile.name \n  //   ); \n  //   // Details of the uploaded file \n  //   console.log(this.state.selectedFile); \n  //   // Request made to the backend api \n  //   // Send formData object \n  //   axios.post(\"api/uploadfile\", formData); \n  // }; \n  // File content to be displayed after \n  // file upload is complete \n  // fileData = () => { \n  //   if (this.state.selectedFile) { \n  //     return ( \n  //       <div> \n  //         <h2>File Details:</h2> \n  //         <p>File Name: {this.state.selectedFile.name}</p> \n  //         <p>File Type: {this.state.selectedFile.type}</p> \n  //         <p> \n  //           Last Modified:{\" \"} \n  //           {this.state.selectedFile.lastModifiedDate.toDateString()} \n  //         </p> \n  //       </div> \n  //     ); \n  //   } else { \n  //     return ( \n  //       <div> \n  //         <br /> \n  //         <h4>Choose before Pressing the Upload button</h4> \n  //       </div> \n  //     ); \n  //   } \n  // }; \n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"PdM Modeler\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Upload your Excel File\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Upload, {\n          name: \"file\",\n          beforeUpload: this.fileHandler,\n          onRemove: () => this.setState({\n            rows: []\n          }),\n          multiple: false,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            children: [/*#__PURE__*/_jsxDEV(Icon, {\n              type: \"upload\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 7\n            }, this), \" Click to Upload Excel File\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 3\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: this.onFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.onFileUpload,\n          children: \"Upload!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }, this), this.fileData()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/appsk/Documents/Projects/PredictiveMaintenance/React PDM/env/frontend/src/App.js"],"names":["axios","React","Component","ExcelRenderer","App","onFileChange","fileList","console","log","fileObj","setState","errorMessage","type","err","resp","newRows","rows","slice","map","row","index","push","key","name","age","gender","length","cols","onFileUpload","state","selectedFile","checkFile","file","isExcel","isLt2M","size","render","fileHandler","fileData"],"mappings":"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","sourcesContent":["import axios from 'axios'; \n  \nimport React,{Component} from 'react';\nimport { ExcelRenderer } from \"react-excel-renderer\";\n//import ExcelPage from \"./components/excelPage\";\n  \nclass App extends Component { \n\n  checkFile(file) {\n    let errorMessage = \"\";\n    if (!file || !file[0]) {\n      return;\n    }\n    const isExcel =\n      file[0].type === \"application/vnd.ms-excel\" ||\n      file[0].type ===\n        \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\";\n    if (!isExcel) {\n      errorMessage = \"You can only upload Excel file!\";\n    }\n    console.log(\"file\", file[0].type);\n    const isLt2M = file[0].size / 1024 / 1024 < 2;\n    if (!isLt2M) {\n      errorMessage = \"File must be smaller than 2MB!\";\n    }\n    console.log(\"errorMessage\", errorMessage);\n    return errorMessage;\n  }\n\n\n  onFileChange = fileList => {\n    console.log(\"fileList\", fileList)\n    let fileObj = fileList\n    if (!fileObj) {\n      this.setState({\n        errorMessage: \"No file uploaded!\",\n      })\n      return false\n    }\n    console.log(\"fileObj.type:\", fileObj.type)\n    if (\n      !(\n        fileObj.type === \"application/vnd.ms-excel\" ||\n        fileObj.type ===\n          \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n      )\n    ) {\n      this.setState({\n        errorMessage: \"Unknown file format. Only Excel files are uploaded!\",\n      })\n      return false\n    }\n    //just pass the fileObj as parameter\n    ExcelRenderer(fileObj, (err, resp) => {\n      if (err) {\n        console.log(err)\n      } else {\n        let newRows = []\n        resp.rows.slice(1).map((row, index) => {\n          if (row && row !== \"undefined\") {\n            newRows.push({\n              key: index,\n              name: row[0],\n              age: row[1],\n              gender: row[2],\n            })\n          }\n        })\n        if (newRows.length === 0) {\n          this.setState({\n            errorMessage: \"No data found in file!\",\n          })\n          return false\n        } else {\n          this.setState({\n            cols: resp.cols,\n            rows: newRows,\n            errorMessage: null,\n          })\n        }\n      }\n    })\n    return false\n  }\n\n  onFileUpload = async () => {\n  console.log(\"submitting: \", this.state.rows)\n  //submit to API\n  //if successful, banigate and clear the data\n  //this.setState({ rows: [] })\n}\n\n\n   \n    state = { \n  \n      // Initially, no file is selected \n      selectedFile: null\n    }; \n     \n    // On file select (from the pop up) \n    // onFileChange = event => { \n     \n    //   // Update the state \n    //   this.setState({ selectedFile: event.target.files[0] }); \n     \n    // }; \n     \n    // // On file upload (click the upload button) \n    // onFileUpload = () => { \n     \n    //   // Create an object of formData \n    //   const formData = new FormData(); \n     \n    //   // Update the formData object \n    //   formData.append( \n    //     \"myFile\", \n    //     this.state.selectedFile, \n    //     this.state.selectedFile.name \n    //   ); \n     \n    //   // Details of the uploaded file \n    //   console.log(this.state.selectedFile); \n     \n    //   // Request made to the backend api \n    //   // Send formData object \n    //   axios.post(\"api/uploadfile\", formData); \n    // }; \n     \n    // File content to be displayed after \n    // file upload is complete \n    // fileData = () => { \n     \n    //   if (this.state.selectedFile) { \n          \n    //     return ( \n    //       <div> \n    //         <h2>File Details:</h2> \n    //         <p>File Name: {this.state.selectedFile.name}</p> \n    //         <p>File Type: {this.state.selectedFile.type}</p> \n    //         <p> \n    //           Last Modified:{\" \"} \n    //           {this.state.selectedFile.lastModifiedDate.toDateString()} \n    //         </p> \n    //       </div> \n    //     ); \n    //   } else { \n    //     return ( \n    //       <div> \n    //         <br /> \n    //         <h4>Choose before Pressing the Upload button</h4> \n    //       </div> \n    //     ); \n    //   } \n    // }; \n     \n    render() { \n     \n      return ( \n        <div> \n            <h1> \n              PdM Modeler \n            </h1> \n            <h3> \n              Upload your Excel File \n            </h3> \n            <div>\n  <Upload\n    name=\"file\"\n    beforeUpload={this.fileHandler}\n    onRemove={() => this.setState({ rows: [] })}\n    multiple={false}\n  >\n    <Button>\n      <Icon type=\"upload\" /> Click to Upload Excel File\n    </Button>\n  </Upload>\n</div>\n            <div> \n                <input type=\"file\" onChange={this.onFileChange} /> \n                <button onClick={this.onFileUpload}> \n                  Upload! \n                </button> \n            </div> \n          {this.fileData()} \n        </div> \n      ); \n    } \n  } \n  \n  export default App; "]},"metadata":{},"sourceType":"module"}