{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { FreezeContentRender, FreezeRender } from './freeze-renderer';\nimport { ColumnFreezeContentRenderer } from './column-freeze-renderer';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from './virtual-content-renderer';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { RenderType } from '../base/enum';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport * as events from '../base/constant';\nimport { getFrozenTableName, splitFrozenRowObjectCells } from '../base/util';\n/**\n * VirtualFreezeRenderer is used to render the virtual table within the frozen and movable content table\n * @hidden\n */\n\nvar VirtualFreezeRenderer =\n/** @class */\nfunction (_super) {\n  __extends(VirtualFreezeRenderer, _super);\n\n  function VirtualFreezeRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n    /** @hidden */\n\n\n    _this.frzRows = [];\n    /** @hidden */\n\n    _this.mvblRows = [];\n    /** @hidden */\n\n    _this.frRows = [];\n    _this.serviceLoc = locator;\n\n    _this.eventListener('on');\n\n    _this.rowModelGenerator = new RowModelGenerator(_this.parent);\n    return _this;\n  }\n\n  VirtualFreezeRenderer.prototype.eventListener = function (action) {\n    this.parent[action](events.getVirtualData, this.getVirtualData, this);\n    this.parent[action](events.setFreezeSelection, this.setFreezeSelection, this);\n    this.parent[action](events.refreshVirtualFrozenRows, this.refreshVirtualFrozenRows, this);\n    this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n  };\n\n  VirtualFreezeRenderer.prototype.actionComplete = function (args) {\n    if (args.requestType === 'delete' && this.parent.frozenRows) {\n      for (var i = 0; i < this.parent.frozenRows; i++) {\n        setCache(this, i);\n      }\n    }\n  };\n\n  VirtualFreezeRenderer.prototype.refreshVirtualFrozenRows = function (args) {\n    var _this = this;\n\n    var gObj = this.parent;\n\n    if (args.requestType === 'delete' && gObj.frozenRows) {\n      args.isFrozenRowsRender = true;\n      var selectedIdx_1 = gObj.getSelectedRowIndexes();\n      var query = gObj.renderModule.data.generateQuery(true).clone();\n      query.page(1, gObj.pageSettings.pageSize);\n      gObj.renderModule.data.getData({}, query).then(function (e) {\n        renderFrozenRows(args, e.result, selectedIdx_1, gObj, _this.rowModelGenerator, _this.serviceLoc, _this.virtualRenderer, _this);\n      });\n    }\n  };\n\n  VirtualFreezeRenderer.prototype.getVirtualData = function (data) {\n    this.virtualRenderer.getVirtualData(data);\n  };\n\n  VirtualFreezeRenderer.prototype.setFreezeSelection = function (args) {\n    setFreezeSelection(args, this.virtualRenderer);\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.renderTable = function () {\n    this.freezeRowGenerator = new FreezeRowModelGenerator(this.parent);\n    this.virtualRenderer = new VirtualContentRenderer(this.parent, this.serviceLoc);\n    this.virtualRenderer.header = this.serviceLoc.getService('rendererFactory').getRenderer(RenderType.Header).virtualHdrRenderer;\n\n    _super.prototype.renderTable.call(this);\n\n    this.virtualRenderer.setPanel(this.parent.getContent());\n    this.scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n    var frzCont = this.getFrozenContent();\n    var movableCont = this.getMovableContent();\n    var minHeight = this.parent.height;\n    this.virtualRenderer.virtualEle.content = this.virtualRenderer.content = this.getPanel().querySelector('.e-content');\n    this.virtualRenderer.virtualEle.content.style.overflowX = 'hidden';\n    this.virtualRenderer.virtualEle.renderFrozenWrapper(minHeight);\n    this.virtualRenderer.virtualEle.renderFrozenPlaceHolder();\n\n    if (this.parent.enableColumnVirtualization) {\n      this.virtualRenderer.virtualEle.movableContent = this.virtualRenderer.movableContent = this.getPanel().querySelector('.e-movablecontent');\n      this.virtualRenderer.virtualEle.renderMovableWrapper(minHeight);\n      this.virtualRenderer.virtualEle.renderMovablePlaceHolder();\n      var tbl = movableCont.querySelector('table');\n      this.virtualRenderer.virtualEle.movableTable = tbl;\n      this.virtualRenderer.virtualEle.movableWrapper.appendChild(tbl);\n      movableCont.appendChild(this.virtualRenderer.virtualEle.movableWrapper);\n      movableCont.appendChild(this.virtualRenderer.virtualEle.movablePlaceholder);\n    }\n\n    this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n    this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n    this.virtualRenderer.virtualEle.table = this.getTable();\n    setDebounce(this.parent, this.virtualRenderer, this.scrollbar, this.getMovableContent());\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.appendContent = function (target, newChild, e) {\n    appendContent(this.virtualRenderer, this.widthService, target, newChild, e);\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.generateRows = function (data, notifyArgs) {\n    if (!this.firstPageRecords) {\n      this.firstPageRecords = data;\n    }\n\n    return generateRows(this.virtualRenderer, data, notifyArgs, this.freezeRowGenerator, this.parent);\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getRowByIndex = function (index) {\n    return this.virtualRenderer.getRowByIndex(index);\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getMovableRowByIndex = function (index) {\n    return this.virtualRenderer.getMovableVirtualRowByIndex(index);\n  };\n\n  VirtualFreezeRenderer.prototype.collectRows = function (tableName) {\n    return collectRows(tableName, this.virtualRenderer, this.parent);\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getMovableRows = function () {\n    return this.collectRows('movable');\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getRows = function () {\n    return this.collectRows('frozen-left');\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getColGroup = function () {\n    var mCol = this.parent.getMovableVirtualContent();\n    return this.isXaxis() ? mCol.querySelector('colgroup') : this.colgroup;\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getReorderedFrozenRows = function (args) {\n    return getReorderedFrozenRows(args, this.virtualRenderer, this.parent, this.freezeRowGenerator, this.firstPageRecords);\n  };\n\n  VirtualFreezeRenderer.prototype.isXaxis = function () {\n    return isXaxis(this.virtualRenderer);\n  };\n\n  VirtualFreezeRenderer.prototype.getHeaderCells = function () {\n    return getHeaderCells(this.virtualRenderer, this.parent);\n  };\n\n  VirtualFreezeRenderer.prototype.getVirtualFreezeHeader = function () {\n    return getVirtualFreezeHeader(this.virtualRenderer, this.parent);\n  };\n\n  VirtualFreezeRenderer.prototype.ensureFrozenCols = function (columns) {\n    return ensureFrozenCols(columns, this.parent);\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getRowObjectByIndex = function (index) {\n    return this.virtualRenderer.getRowObjectByIndex(index);\n  };\n  /**\n   * Set the header colgroup element\n   * @param {Element} colgroup\n   * @returns {Element}\n   */\n\n\n  VirtualFreezeRenderer.prototype.setColGroup = function (colGroup) {\n    return setColGroup(colGroup, this.virtualRenderer, this);\n  };\n\n  return VirtualFreezeRenderer;\n}(FreezeContentRender);\n\nexport { VirtualFreezeRenderer };\n/**\n * VirtualFreezeHdrRenderer is used to render the virtual table within the frozen and movable header table\n * @hidden\n */\n\nvar VirtualFreezeHdrRenderer =\n/** @class */\nfunction (_super) {\n  __extends(VirtualFreezeHdrRenderer, _super);\n\n  function VirtualFreezeHdrRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n\n    _this.serviceLoc = locator;\n    return _this;\n  }\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeHdrRenderer.prototype.renderTable = function () {\n    this.virtualHdrRenderer = new VirtualHeaderRenderer(this.parent, this.serviceLoc);\n    this.virtualHdrRenderer.gen.refreshColOffsets();\n    this.parent.setColumnIndexesInView(this.virtualHdrRenderer.gen.getColumnIndexes(this.getPanel().querySelector('.e-headercontent')));\n    this.virtualHdrRenderer.virtualEle.content = this.getPanel().querySelector('.e-headercontent');\n    this.virtualHdrRenderer.virtualEle.renderFrozenWrapper();\n    this.virtualHdrRenderer.virtualEle.renderFrozenPlaceHolder();\n\n    if (this.parent.enableColumnVirtualization) {\n      this.virtualHdrRenderer.virtualEle.movableContent = this.getPanel().querySelector('.e-movableheader');\n      this.virtualHdrRenderer.virtualEle.renderMovableWrapper();\n      this.virtualHdrRenderer.virtualEle.renderMovablePlaceHolder();\n    }\n\n    _super.prototype.renderTable.call(this);\n\n    this.virtualHdrRenderer.setPanel(this.parent.getHeaderContent());\n  };\n\n  VirtualFreezeHdrRenderer.prototype.rfshMovable = function () {\n    this.getFrozenHeader().appendChild(this.getTable());\n    this.virtualHdrRenderer.virtualEle.wrapper.appendChild(this.getFrozenHeader());\n\n    if (this.parent.enableColumnVirtualization) {\n      this.virtualHdrRenderer.virtualEle.movableWrapper.appendChild(this.createTable());\n    } else {\n      this.getMovableHeader().appendChild(this.createTable());\n    }\n\n    this.virtualHdrRenderer.virtualEle.wrapper.appendChild(this.getMovableHeader());\n  };\n\n  return VirtualFreezeHdrRenderer;\n}(FreezeRender);\n\nexport { VirtualFreezeHdrRenderer };\n/** @hidden */\n\nexport function renderFrozenRows(args, data, selectedIdx, parent, rowModelGenerator, locator, virtualRenderer, instance) {\n  parent.clearSelection();\n  args.startIndex = 0;\n  var rowRenderer = new RowRenderer(locator, null, parent);\n  var rows = rowModelGenerator.generateRows(data, args);\n\n  if (args.renderMovableContent) {\n    virtualRenderer.vgenerator.movableCache[1] = rows;\n    rows = parent.getMovableRowsObject();\n  } else if (!args.renderFrozenRightContent && !args.renderMovableContent) {\n    virtualRenderer.vgenerator.cache[1] = rows;\n    rows = parent.getRowsObject();\n  } else if (args.renderFrozenRightContent) {\n    virtualRenderer.vgenerator.frozenRightCache[1] = rows;\n    rows = parent.getFrozenRightRowsObject();\n  }\n\n  var hdr = !args.renderMovableContent && !args.renderFrozenRightContent ? parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody') : args.renderMovableContent ? parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody') : parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector('tbody');\n  hdr.innerHTML = '';\n\n  for (var i = 0; i < parent.frozenRows; i++) {\n    hdr.appendChild(rowRenderer.render(rows[i], parent.getColumns()));\n\n    if (selectedIdx.indexOf(i) > -1) {\n      rows[i].isSelected = true;\n\n      for (var k = 0; k < rows[i].cells.length; k++) {\n        rows[i].cells[k].isSelected = true;\n      }\n    }\n  }\n\n  if (args.renderMovableContent) {\n    instance.mvblRows = virtualRenderer.vgenerator.movableCache[1];\n  } else if (!args.renderMovableContent && !args.renderFrozenRightContent) {\n    instance.frzRows = virtualRenderer.vgenerator.cache[1];\n  } else if (args.renderFrozenRightContent) {\n    instance.frRows = virtualRenderer.vgenerator.frozenRightCache[1];\n  }\n\n  args.renderMovableContent = !args.renderMovableContent && !args.renderFrozenRightContent;\n  args.renderFrozenRightContent = parent.getFrozenMode() === 'Left-Right' && !args.renderMovableContent && !args.renderFrozenRightContent;\n\n  if (args.renderMovableContent || args.renderFrozenRightContent) {\n    renderFrozenRows(args, data, selectedIdx, parent, rowModelGenerator, locator, virtualRenderer, instance);\n\n    if (!args.renderMovableContent && !args.renderFrozenRightContent) {\n      args.isFrozenRowsRender = false;\n    }\n  }\n}\n/** @hidden */\n\nexport function splitCells(data, tableName, parent) {\n  var rows = [];\n\n  for (var i = 0; i < data.length; i++) {\n    rows.push(extend({}, data[i]));\n    rows[i].cells = splitFrozenRowObjectCells(parent, rows[i].cells, tableName);\n  }\n\n  return rows;\n}\n/** @hidden */\n\nexport function collectRows(tableName, virtualRenderer, parent) {\n  var rows = [];\n  var cache;\n\n  if (tableName === 'frozen-left') {\n    cache = virtualRenderer.vgenerator.cache;\n  } else if (tableName === 'movable') {\n    cache = virtualRenderer.vgenerator.movableCache;\n  } else if (tableName === 'frozen-right') {\n    cache = parent.getFrozenMode() === 'Right' ? virtualRenderer.vgenerator.cache : virtualRenderer.vgenerator.frozenRightCache;\n  }\n\n  var keys = Object.keys(cache);\n\n  for (var i = 0; i < keys.length; i++) {\n    rows = rows.concat(splitCells(cache[keys[i]], tableName, parent));\n  }\n\n  return rows;\n}\n/** @hidden */\n\nexport function setFreezeSelection(args, virtualRenderer) {\n  var leftKeys = Object.keys(virtualRenderer.vgenerator.cache);\n  var movableKeys = Object.keys(virtualRenderer.vgenerator.movableCache);\n  var rightKeys = Object.keys(virtualRenderer.vgenerator.frozenRightCache);\n\n  for (var i = 0; i < leftKeys.length; i++) {\n    selectFreezeRows(args, virtualRenderer.vgenerator.cache[leftKeys[i]]);\n  }\n\n  for (var i = 0; i < movableKeys.length; i++) {\n    selectFreezeRows(args, virtualRenderer.vgenerator.movableCache[movableKeys[i]]);\n  }\n\n  for (var i = 0; i < rightKeys.length; i++) {\n    selectFreezeRows(args, virtualRenderer.vgenerator.frozenRightCache[rightKeys[i]]);\n  }\n}\n/** @hidden */\n\nexport function selectFreezeRows(args, cache) {\n  var rows = cache.filter(function (row) {\n    return args.clearAll || args.uid === row.uid;\n  });\n\n  for (var j = 0; j < rows.length; j++) {\n    rows[j].isSelected = args.set;\n    var cells = rows[j].cells;\n\n    for (var k = 0; k < cells.length; k++) {\n      cells[k].isSelected = args.set;\n    }\n  }\n}\n/** @hidden */\n\nexport function appendContent(virtualRenderer, widthService, target, newChild, e) {\n  virtualRenderer.appendContent(target, newChild, e);\n  widthService.refreshFrozenScrollbar();\n}\n/** @hidden */\n\nexport function generateRows(virtualRenderer, data, notifyArgs, freezeRowGenerator, parent) {\n  var virtualRows = virtualRenderer.vgenerator.generateRows(data, notifyArgs);\n  var arr = [];\n  arr = virtualRows.map(function (row) {\n    return extend({}, row);\n  });\n  var rows = freezeRowGenerator.generateRows(data, notifyArgs, arr);\n\n  if (parent.frozenRows && notifyArgs.requestType === 'delete' && parent.pageSettings.currentPage === 1) {\n    rows = rows.slice(parent.frozenRows);\n  }\n\n  return rows;\n}\n/** @hidden */\n\nexport function getReorderedFrozenRows(args, virtualRenderer, parent, freezeRowGenerator, firstPageRecords) {\n  var rows;\n  var bIndex = args.virtualInfo.blockIndexes;\n  var colIndex = args.virtualInfo.columnIndexes;\n  var page = args.virtualInfo.page;\n  args.virtualInfo.blockIndexes = [1, 2];\n  args.virtualInfo.page = 1;\n\n  if (!args.renderMovableContent) {\n    args.virtualInfo.columnIndexes = [];\n  }\n\n  var virtualRows = virtualRenderer.vgenerator.generateRows(firstPageRecords, args);\n  rows = splitReorderedRows(virtualRows, parent, freezeRowGenerator);\n  args.virtualInfo.blockIndexes = bIndex;\n  args.virtualInfo.columnIndexes = colIndex;\n  args.virtualInfo.page = page;\n  return rows.splice(0, parent.frozenRows);\n}\n/** @hidden */\n\nexport function splitReorderedRows(rows, parent, freezeRowGenerator) {\n  var tableName = getFrozenTableName(parent, parent.tableIndex);\n\n  for (var i = 0, len = rows.length; i < len; i++) {\n    rows[i].cells = splitFrozenRowObjectCells(parent, rows[i].cells, tableName);\n  }\n\n  return rows;\n}\n/** @hidden */\n\nexport function isXaxis(virtualRenderer) {\n  var value = false;\n\n  if (virtualRenderer) {\n    value = virtualRenderer.requestType === 'virtualscroll' && virtualRenderer.currentInfo.sentinelInfo.axis === 'X';\n  }\n\n  return value;\n}\n/** @hidden */\n\nexport function getHeaderCells(virtualRenderer, parent) {\n  var content = isXaxis(virtualRenderer) ? parent.getMovableVirtualHeader() : parent.getHeaderContent();\n  return content ? [].slice.call(content.querySelectorAll('.e-headercell:not(.e-stackedheadercell)')) : [];\n}\n/** @hidden */\n\nexport function getVirtualFreezeHeader(virtualRenderer, parent) {\n  var headerTable;\n\n  if (isXaxis(virtualRenderer)) {\n    headerTable = parent.getMovableVirtualHeader().querySelector('.e-table');\n  } else {\n    headerTable = parent.getFrozenVirtualHeader().querySelector('.e-table');\n  }\n\n  return headerTable;\n}\n/** @hidden */\n\nexport function ensureFrozenCols(columns, parent) {\n  var frozenCols = parent.columns.slice(0, parent.getFrozenColumns());\n  columns = frozenCols.concat(columns);\n  return columns;\n}\n/** @hidden */\n\nexport function setColGroup(colGroup, virtualRenderer, instance) {\n  if (!isXaxis(virtualRenderer)) {\n    if (!isNullOrUndefined(colGroup)) {\n      colGroup.id = 'content-' + colGroup.id;\n    }\n\n    instance.colgroup = colGroup;\n  }\n\n  return instance.colgroup;\n}\n/** @hidden */\n\nexport function setCache(instance, index) {\n  if (instance.virtualRenderer.vgenerator.cache[1]) {\n    instance.virtualRenderer.vgenerator.cache[1][index] = instance.frzRows[index];\n  } else {\n    instance.virtualRenderer.vgenerator.cache[1] = instance.frzRows;\n  }\n\n  if (instance.virtualRenderer.vgenerator.movableCache[1]) {\n    instance.virtualRenderer.vgenerator.movableCache[1][index] = instance.mvblRows[index];\n  } else {\n    instance.virtualRenderer.vgenerator.movableCache[1] = instance.mvblRows;\n  }\n}\n/** @hidden */\n\nexport function setDebounce(parent, virtualRenderer, scrollbar, mCont) {\n  var debounceEvent = parent.dataSource instanceof DataManager && !parent.dataSource.dataSource.offline;\n  var opt = {\n    container: virtualRenderer.content,\n    pageHeight: virtualRenderer.getBlockHeight() * 2,\n    debounceEvent: debounceEvent,\n    axes: parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y'],\n    scrollbar: scrollbar,\n    movableContainer: mCont\n  };\n  virtualRenderer.observer = new InterSectionObserver(virtualRenderer.virtualEle.wrapper, opt, virtualRenderer.virtualEle.movableWrapper);\n}\n/**\n * ColumnVirtualFreezeRenderer is used to render the virtual table within the frozen and movable content table\n * @hidden\n */\n\nvar ColumnVirtualFreezeRenderer =\n/** @class */\nfunction (_super) {\n  __extends(ColumnVirtualFreezeRenderer, _super);\n\n  function ColumnVirtualFreezeRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n    /** @hidden */\n\n\n    _this.frRows = [];\n    /** @hidden */\n\n    _this.frzRows = [];\n    /** @hidden */\n\n    _this.mvblRows = [];\n    _this.serviceLoc = locator;\n\n    _this.eventListener('on');\n\n    _this.rowModelGenerator = new RowModelGenerator(_this.parent);\n    return _this;\n  }\n\n  ColumnVirtualFreezeRenderer.prototype.actionComplete = function (args) {\n    if (args.requestType === 'delete' && this.parent.frozenRows) {\n      for (var i = 0; i < this.parent.frozenRows; i++) {\n        if (this.virtualRenderer.vgenerator.frozenRightCache[1]) {\n          this.virtualRenderer.vgenerator.frozenRightCache[1][i] = this.frRows.length ? this.frRows[i] : this.frzRows[i];\n        } else {\n          this.virtualRenderer.vgenerator.frozenRightCache[1] = this.frRows.length ? this.frRows : this.frzRows;\n          break;\n        }\n\n        setCache(this, i);\n      }\n    }\n  };\n\n  ColumnVirtualFreezeRenderer.prototype.eventListener = function (action) {\n    this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n    this.parent[action](events.refreshVirtualFrozenRows, this.refreshVirtualFrozenRows, this);\n    this.parent[action](events.getVirtualData, this.getVirtualData, this);\n    this.parent[action](events.setFreezeSelection, this.setFreezeSelection, this);\n  };\n\n  ColumnVirtualFreezeRenderer.prototype.refreshVirtualFrozenRows = function (args) {\n    var _this = this;\n\n    if (args.requestType === 'delete' && this.parent.frozenRows) {\n      args.isFrozenRowsRender = true;\n      var query = this.parent.renderModule.data.generateQuery(true).clone();\n      query.page(1, this.parent.pageSettings.pageSize);\n      var selectedIdx_2 = this.parent.getSelectedRowIndexes();\n      this.parent.renderModule.data.getData({}, query).then(function (e) {\n        renderFrozenRows(args, e.result, selectedIdx_2, _this.parent, _this.rowModelGenerator, _this.serviceLoc, _this.virtualRenderer, _this);\n      });\n    }\n  };\n\n  ColumnVirtualFreezeRenderer.prototype.setFreezeSelection = function (args) {\n    setFreezeSelection(args, this.virtualRenderer);\n  };\n\n  ColumnVirtualFreezeRenderer.prototype.getVirtualData = function (data) {\n    this.virtualRenderer.getVirtualData(data);\n  };\n\n  ColumnVirtualFreezeRenderer.prototype.renderNextFrozentPart = function (e) {\n    if (this.parent.getFrozenMode() === 'Left' || this.parent.getFrozenMode() === 'Right') {\n      if (this.parent.tableIndex === 1) {\n        e.renderMovableContent = true;\n        this.refreshContentRows(extend({}, e));\n      }\n    }\n\n    if (this.parent.getFrozenMode() === 'Left-Right') {\n      if (this.parent.tableIndex === 1 || this.parent.tableIndex === 2) {\n        e.renderMovableContent = this.parent.tableIndex === 1;\n        e.renderFrozenRightContent = this.parent.tableIndex === 2;\n        this.refreshContentRows(extend({}, e));\n      }\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnVirtualFreezeRenderer.prototype.renderTable = function () {\n    this.virtualRenderer = new VirtualContentRenderer(this.parent, this.serviceLoc);\n    this.virtualRenderer.header = this.serviceLoc.getService('rendererFactory').getRenderer(RenderType.Header).virtualHdrRenderer;\n    this.freezeRowGenerator = new FreezeRowModelGenerator(this.parent);\n\n    _super.prototype.renderTable.call(this);\n\n    this.virtualRenderer.setPanel(this.parent.getContent());\n    this.scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n    var frozenRightCont = this.getFrozenRightContent();\n    var frzCont = this.getFrozenContent();\n    var movableCont = this.getMovableContent();\n\n    if (this.parent.getFrozenMode() === 'Right') {\n      frzCont = frozenRightCont;\n    }\n\n    this.virtualRenderer.virtualEle.content = this.virtualRenderer.content = this.getPanel().querySelector('.e-content');\n    this.virtualRenderer.virtualEle.content.style.overflowX = 'hidden';\n    var minHeight = this.parent.height;\n    this.virtualRenderer.virtualEle.renderFrozenWrapper(minHeight);\n    this.virtualRenderer.virtualEle.renderFrozenPlaceHolder();\n    this.renderVirtualFrozenLeft(frzCont, movableCont);\n    this.renderVirtualFrozenRight(frzCont, movableCont);\n    this.renderVirtualFrozenLeftRight(frzCont, movableCont, frozenRightCont);\n    this.virtualRenderer.virtualEle.table = this.getTable();\n    setDebounce(this.parent, this.virtualRenderer, this.scrollbar, this.getMovableContent());\n  };\n\n  ColumnVirtualFreezeRenderer.prototype.renderVirtualFrozenLeft = function (frzCont, movableCont) {\n    if (this.parent.getFrozenMode() === 'Left') {\n      this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n      this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n    }\n  };\n\n  ColumnVirtualFreezeRenderer.prototype.renderVirtualFrozenRight = function (frzCont, movableCont) {\n    if (this.parent.getFrozenMode() === 'Right') {\n      this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n      this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n    }\n  };\n\n  ColumnVirtualFreezeRenderer.prototype.renderVirtualFrozenLeftRight = function (frzCont, movableCont, frozenRightCont) {\n    if (this.parent.getFrozenMode() === 'Left-Right') {\n      this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n      this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n      this.virtualRenderer.virtualEle.wrapper.appendChild(frozenRightCont);\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnVirtualFreezeRenderer.prototype.appendContent = function (target, newChild, e) {\n    appendContent(this.virtualRenderer, this.widthService, target, newChild, e);\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnVirtualFreezeRenderer.prototype.generateRows = function (data, e) {\n    if (!this.firstPageRecords) {\n      this.firstPageRecords = data;\n    }\n\n    return generateRows(this.virtualRenderer, data, e, this.freezeRowGenerator, this.parent);\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnVirtualFreezeRenderer.prototype.getRowByIndex = function (index) {\n    return this.virtualRenderer.getRowByIndex(index);\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnVirtualFreezeRenderer.prototype.getFrozenRightRowByIndex = function (index) {\n    return this.virtualRenderer.getFrozenRightVirtualRowByIndex(index);\n  };\n\n  ColumnVirtualFreezeRenderer.prototype.collectRows = function (tableName) {\n    return collectRows(tableName, this.virtualRenderer, this.parent);\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnVirtualFreezeRenderer.prototype.getMovableRowByIndex = function (index) {\n    return this.virtualRenderer.getMovableVirtualRowByIndex(index);\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnVirtualFreezeRenderer.prototype.getFrozenRightRows = function () {\n    return this.collectRows('frozen-right');\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnVirtualFreezeRenderer.prototype.getMovableRows = function () {\n    return this.collectRows('movable');\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnVirtualFreezeRenderer.prototype.getColGroup = function () {\n    var mCol = this.parent.getMovableVirtualContent();\n    return isXaxis(this.virtualRenderer) ? mCol.querySelector('colgroup') : this.colgroup;\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnVirtualFreezeRenderer.prototype.getRows = function () {\n    return this.collectRows(this.parent.getFrozenMode() === 'Right' ? 'frozen-right' : 'frozen-left');\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnVirtualFreezeRenderer.prototype.getReorderedFrozenRows = function (args) {\n    return getReorderedFrozenRows(args, this.virtualRenderer, this.parent, this.freezeRowGenerator, this.firstPageRecords);\n  };\n\n  ColumnVirtualFreezeRenderer.prototype.getHeaderCells = function () {\n    return getHeaderCells(this.virtualRenderer, this.parent);\n  };\n\n  ColumnVirtualFreezeRenderer.prototype.isXaxis = function () {\n    return isXaxis(this.virtualRenderer);\n  };\n\n  ColumnVirtualFreezeRenderer.prototype.getVirtualFreezeHeader = function () {\n    return getVirtualFreezeHeader(this.virtualRenderer, this.parent);\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnVirtualFreezeRenderer.prototype.getRowObjectByIndex = function (index) {\n    return this.virtualRenderer.getRowObjectByIndex(index);\n  };\n\n  ColumnVirtualFreezeRenderer.prototype.ensureFrozenCols = function (columns) {\n    return ensureFrozenCols(columns, this.parent);\n  };\n  /**\n   * Set the header colgroup element\n   * @param {Element} colgroup\n   * @returns {Element}\n   */\n\n\n  ColumnVirtualFreezeRenderer.prototype.setColGroup = function (colGroup) {\n    return setColGroup(colGroup, this.virtualRenderer, this);\n  };\n\n  return ColumnVirtualFreezeRenderer;\n}(ColumnFreezeContentRenderer);\n\nexport { ColumnVirtualFreezeRenderer };","map":{"version":3,"sources":["C:/Users/appsk/Documents/Projects/PredictiveMaintenance/React PDM/env/frontend/node_modules/@syncfusion/ej2-grids/src/grid/renderer/virtual-freeze-renderer.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","extend","isNullOrUndefined","DataManager","FreezeContentRender","FreezeRender","ColumnFreezeContentRenderer","VirtualContentRenderer","VirtualHeaderRenderer","RowRenderer","FreezeRowModelGenerator","RowModelGenerator","RenderType","InterSectionObserver","events","getFrozenTableName","splitFrozenRowObjectCells","VirtualFreezeRenderer","_super","parent","locator","_this","call","frzRows","mvblRows","frRows","serviceLoc","eventListener","rowModelGenerator","action","getVirtualData","setFreezeSelection","refreshVirtualFrozenRows","addEventListener","actionComplete","bind","args","requestType","frozenRows","i","setCache","gObj","isFrozenRowsRender","selectedIdx_1","getSelectedRowIndexes","query","renderModule","data","generateQuery","clone","page","pageSettings","pageSize","getData","then","e","renderFrozenRows","result","virtualRenderer","renderTable","freezeRowGenerator","header","getService","getRenderer","Header","virtualHdrRenderer","setPanel","getContent","scrollbar","querySelector","frzCont","getFrozenContent","movableCont","getMovableContent","minHeight","height","virtualEle","content","getPanel","style","overflowX","renderFrozenWrapper","renderFrozenPlaceHolder","enableColumnVirtualization","movableContent","renderMovableWrapper","renderMovablePlaceHolder","tbl","movableTable","movableWrapper","appendChild","movablePlaceholder","wrapper","table","getTable","setDebounce","appendContent","target","newChild","widthService","generateRows","notifyArgs","firstPageRecords","getRowByIndex","index","getMovableRowByIndex","getMovableVirtualRowByIndex","collectRows","tableName","getMovableRows","getRows","getColGroup","mCol","getMovableVirtualContent","isXaxis","colgroup","getReorderedFrozenRows","getHeaderCells","getVirtualFreezeHeader","ensureFrozenCols","columns","getRowObjectByIndex","setColGroup","colGroup","VirtualFreezeHdrRenderer","gen","refreshColOffsets","setColumnIndexesInView","getColumnIndexes","getHeaderContent","rfshMovable","getFrozenHeader","createTable","getMovableHeader","selectedIdx","instance","clearSelection","startIndex","rowRenderer","rows","renderMovableContent","vgenerator","movableCache","getMovableRowsObject","renderFrozenRightContent","cache","getRowsObject","frozenRightCache","getFrozenRightRowsObject","hdr","innerHTML","render","getColumns","indexOf","isSelected","k","cells","length","getFrozenMode","splitCells","push","keys","concat","leftKeys","movableKeys","rightKeys","selectFreezeRows","filter","row","clearAll","uid","j","set","refreshFrozenScrollbar","virtualRows","arr","map","currentPage","slice","bIndex","virtualInfo","blockIndexes","colIndex","columnIndexes","splitReorderedRows","splice","tableIndex","len","value","currentInfo","sentinelInfo","axis","getMovableVirtualHeader","querySelectorAll","headerTable","getFrozenVirtualHeader","frozenCols","getFrozenColumns","id","mCont","debounceEvent","dataSource","offline","opt","container","pageHeight","getBlockHeight","axes","movableContainer","observer","ColumnVirtualFreezeRenderer","selectedIdx_2","renderNextFrozentPart","refreshContentRows","frozenRightCont","getFrozenRightContent","renderVirtualFrozenLeft","renderVirtualFrozenRight","renderVirtualFrozenLeftRight","getFrozenRightRowByIndex","getFrozenRightVirtualRowByIndex","getFrozenRightRows"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { FreezeContentRender, FreezeRender } from './freeze-renderer';\nimport { ColumnFreezeContentRenderer } from './column-freeze-renderer';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from './virtual-content-renderer';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { RenderType } from '../base/enum';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport * as events from '../base/constant';\nimport { getFrozenTableName, splitFrozenRowObjectCells } from '../base/util';\n/**\n * VirtualFreezeRenderer is used to render the virtual table within the frozen and movable content table\n * @hidden\n */\nvar VirtualFreezeRenderer = /** @class */ (function (_super) {\n    __extends(VirtualFreezeRenderer, _super);\n    function VirtualFreezeRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        /** @hidden */\n        _this.frzRows = [];\n        /** @hidden */\n        _this.mvblRows = [];\n        /** @hidden */\n        _this.frRows = [];\n        _this.serviceLoc = locator;\n        _this.eventListener('on');\n        _this.rowModelGenerator = new RowModelGenerator(_this.parent);\n        return _this;\n    }\n    VirtualFreezeRenderer.prototype.eventListener = function (action) {\n        this.parent[action](events.getVirtualData, this.getVirtualData, this);\n        this.parent[action](events.setFreezeSelection, this.setFreezeSelection, this);\n        this.parent[action](events.refreshVirtualFrozenRows, this.refreshVirtualFrozenRows, this);\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n    };\n    VirtualFreezeRenderer.prototype.actionComplete = function (args) {\n        if (args.requestType === 'delete' && this.parent.frozenRows) {\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                setCache(this, i);\n            }\n        }\n    };\n    VirtualFreezeRenderer.prototype.refreshVirtualFrozenRows = function (args) {\n        var _this = this;\n        var gObj = this.parent;\n        if (args.requestType === 'delete' && gObj.frozenRows) {\n            args.isFrozenRowsRender = true;\n            var selectedIdx_1 = gObj.getSelectedRowIndexes();\n            var query = gObj.renderModule.data.generateQuery(true).clone();\n            query.page(1, gObj.pageSettings.pageSize);\n            gObj.renderModule.data.getData({}, query).then(function (e) {\n                renderFrozenRows(args, e.result, selectedIdx_1, gObj, _this.rowModelGenerator, _this.serviceLoc, _this.virtualRenderer, _this);\n            });\n        }\n    };\n    VirtualFreezeRenderer.prototype.getVirtualData = function (data) {\n        this.virtualRenderer.getVirtualData(data);\n    };\n    VirtualFreezeRenderer.prototype.setFreezeSelection = function (args) {\n        setFreezeSelection(args, this.virtualRenderer);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.renderTable = function () {\n        this.freezeRowGenerator = new FreezeRowModelGenerator(this.parent);\n        this.virtualRenderer = new VirtualContentRenderer(this.parent, this.serviceLoc);\n        this.virtualRenderer.header = this.serviceLoc.getService('rendererFactory')\n            .getRenderer(RenderType.Header).virtualHdrRenderer;\n        _super.prototype.renderTable.call(this);\n        this.virtualRenderer.setPanel(this.parent.getContent());\n        this.scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n        var frzCont = this.getFrozenContent();\n        var movableCont = this.getMovableContent();\n        var minHeight = this.parent.height;\n        this.virtualRenderer.virtualEle.content = this.virtualRenderer.content = this.getPanel().querySelector('.e-content');\n        this.virtualRenderer.virtualEle.content.style.overflowX = 'hidden';\n        this.virtualRenderer.virtualEle.renderFrozenWrapper(minHeight);\n        this.virtualRenderer.virtualEle.renderFrozenPlaceHolder();\n        if (this.parent.enableColumnVirtualization) {\n            this.virtualRenderer.virtualEle.movableContent = this.virtualRenderer.movableContent\n                = this.getPanel().querySelector('.e-movablecontent');\n            this.virtualRenderer.virtualEle.renderMovableWrapper(minHeight);\n            this.virtualRenderer.virtualEle.renderMovablePlaceHolder();\n            var tbl = movableCont.querySelector('table');\n            this.virtualRenderer.virtualEle.movableTable = tbl;\n            this.virtualRenderer.virtualEle.movableWrapper.appendChild(tbl);\n            movableCont.appendChild(this.virtualRenderer.virtualEle.movableWrapper);\n            movableCont.appendChild(this.virtualRenderer.virtualEle.movablePlaceholder);\n        }\n        this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n        this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n        this.virtualRenderer.virtualEle.table = this.getTable();\n        setDebounce(this.parent, this.virtualRenderer, this.scrollbar, this.getMovableContent());\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.appendContent = function (target, newChild, e) {\n        appendContent(this.virtualRenderer, this.widthService, target, newChild, e);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.generateRows = function (data, notifyArgs) {\n        if (!this.firstPageRecords) {\n            this.firstPageRecords = data;\n        }\n        return generateRows(this.virtualRenderer, data, notifyArgs, this.freezeRowGenerator, this.parent);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getRowByIndex = function (index) {\n        return this.virtualRenderer.getRowByIndex(index);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getMovableRowByIndex = function (index) {\n        return this.virtualRenderer.getMovableVirtualRowByIndex(index);\n    };\n    VirtualFreezeRenderer.prototype.collectRows = function (tableName) {\n        return collectRows(tableName, this.virtualRenderer, this.parent);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getMovableRows = function () {\n        return this.collectRows('movable');\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getRows = function () {\n        return this.collectRows('frozen-left');\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getColGroup = function () {\n        var mCol = this.parent.getMovableVirtualContent();\n        return this.isXaxis() ? mCol.querySelector('colgroup') : this.colgroup;\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getReorderedFrozenRows = function (args) {\n        return getReorderedFrozenRows(args, this.virtualRenderer, this.parent, this.freezeRowGenerator, this.firstPageRecords);\n    };\n    VirtualFreezeRenderer.prototype.isXaxis = function () {\n        return isXaxis(this.virtualRenderer);\n    };\n    VirtualFreezeRenderer.prototype.getHeaderCells = function () {\n        return getHeaderCells(this.virtualRenderer, this.parent);\n    };\n    VirtualFreezeRenderer.prototype.getVirtualFreezeHeader = function () {\n        return getVirtualFreezeHeader(this.virtualRenderer, this.parent);\n    };\n    VirtualFreezeRenderer.prototype.ensureFrozenCols = function (columns) {\n        return ensureFrozenCols(columns, this.parent);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getRowObjectByIndex = function (index) {\n        return this.virtualRenderer.getRowObjectByIndex(index);\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    VirtualFreezeRenderer.prototype.setColGroup = function (colGroup) {\n        return setColGroup(colGroup, this.virtualRenderer, this);\n    };\n    return VirtualFreezeRenderer;\n}(FreezeContentRender));\nexport { VirtualFreezeRenderer };\n/**\n * VirtualFreezeHdrRenderer is used to render the virtual table within the frozen and movable header table\n * @hidden\n */\nvar VirtualFreezeHdrRenderer = /** @class */ (function (_super) {\n    __extends(VirtualFreezeHdrRenderer, _super);\n    function VirtualFreezeHdrRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.serviceLoc = locator;\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    VirtualFreezeHdrRenderer.prototype.renderTable = function () {\n        this.virtualHdrRenderer = new VirtualHeaderRenderer(this.parent, this.serviceLoc);\n        this.virtualHdrRenderer.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.virtualHdrRenderer.gen.getColumnIndexes(this.getPanel()\n            .querySelector('.e-headercontent')));\n        this.virtualHdrRenderer.virtualEle.content = this.getPanel().querySelector('.e-headercontent');\n        this.virtualHdrRenderer.virtualEle.renderFrozenWrapper();\n        this.virtualHdrRenderer.virtualEle.renderFrozenPlaceHolder();\n        if (this.parent.enableColumnVirtualization) {\n            this.virtualHdrRenderer.virtualEle.movableContent = this.getPanel().querySelector('.e-movableheader');\n            this.virtualHdrRenderer.virtualEle.renderMovableWrapper();\n            this.virtualHdrRenderer.virtualEle.renderMovablePlaceHolder();\n        }\n        _super.prototype.renderTable.call(this);\n        this.virtualHdrRenderer.setPanel(this.parent.getHeaderContent());\n    };\n    VirtualFreezeHdrRenderer.prototype.rfshMovable = function () {\n        this.getFrozenHeader().appendChild(this.getTable());\n        this.virtualHdrRenderer.virtualEle.wrapper.appendChild(this.getFrozenHeader());\n        if (this.parent.enableColumnVirtualization) {\n            this.virtualHdrRenderer.virtualEle.movableWrapper.appendChild(this.createTable());\n        }\n        else {\n            this.getMovableHeader().appendChild(this.createTable());\n        }\n        this.virtualHdrRenderer.virtualEle.wrapper.appendChild(this.getMovableHeader());\n    };\n    return VirtualFreezeHdrRenderer;\n}(FreezeRender));\nexport { VirtualFreezeHdrRenderer };\n/** @hidden */\nexport function renderFrozenRows(args, data, selectedIdx, parent, rowModelGenerator, locator, virtualRenderer, instance) {\n    parent.clearSelection();\n    args.startIndex = 0;\n    var rowRenderer = new RowRenderer(locator, null, parent);\n    var rows = rowModelGenerator.generateRows(data, args);\n    if (args.renderMovableContent) {\n        virtualRenderer.vgenerator.movableCache[1] = rows;\n        rows = parent.getMovableRowsObject();\n    }\n    else if (!args.renderFrozenRightContent && !args.renderMovableContent) {\n        virtualRenderer.vgenerator.cache[1] = rows;\n        rows = parent.getRowsObject();\n    }\n    else if (args.renderFrozenRightContent) {\n        virtualRenderer.vgenerator.frozenRightCache[1] = rows;\n        rows = parent.getFrozenRightRowsObject();\n    }\n    var hdr = !args.renderMovableContent && !args.renderFrozenRightContent\n        ? parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody') : args.renderMovableContent\n        ? parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody')\n        : parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector('tbody');\n    hdr.innerHTML = '';\n    for (var i = 0; i < parent.frozenRows; i++) {\n        hdr.appendChild(rowRenderer.render(rows[i], parent.getColumns()));\n        if (selectedIdx.indexOf(i) > -1) {\n            rows[i].isSelected = true;\n            for (var k = 0; k < rows[i].cells.length; k++) {\n                rows[i].cells[k].isSelected = true;\n            }\n        }\n    }\n    if (args.renderMovableContent) {\n        instance.mvblRows = virtualRenderer.vgenerator.movableCache[1];\n    }\n    else if (!args.renderMovableContent && !args.renderFrozenRightContent) {\n        instance.frzRows = virtualRenderer.vgenerator.cache[1];\n    }\n    else if (args.renderFrozenRightContent) {\n        instance.frRows = virtualRenderer.vgenerator.frozenRightCache[1];\n    }\n    args.renderMovableContent = !args.renderMovableContent && !args.renderFrozenRightContent;\n    args.renderFrozenRightContent = parent.getFrozenMode() === 'Left-Right'\n        && !args.renderMovableContent && !args.renderFrozenRightContent;\n    if (args.renderMovableContent || args.renderFrozenRightContent) {\n        renderFrozenRows(args, data, selectedIdx, parent, rowModelGenerator, locator, virtualRenderer, instance);\n        if (!args.renderMovableContent && !args.renderFrozenRightContent) {\n            args.isFrozenRowsRender = false;\n        }\n    }\n}\n/** @hidden */\nexport function splitCells(data, tableName, parent) {\n    var rows = [];\n    for (var i = 0; i < data.length; i++) {\n        rows.push(extend({}, data[i]));\n        rows[i].cells = splitFrozenRowObjectCells(parent, rows[i].cells, tableName);\n    }\n    return rows;\n}\n/** @hidden */\nexport function collectRows(tableName, virtualRenderer, parent) {\n    var rows = [];\n    var cache;\n    if (tableName === 'frozen-left') {\n        cache = virtualRenderer.vgenerator.cache;\n    }\n    else if (tableName === 'movable') {\n        cache = virtualRenderer.vgenerator.movableCache;\n    }\n    else if (tableName === 'frozen-right') {\n        cache = parent.getFrozenMode() === 'Right' ? virtualRenderer.vgenerator.cache : virtualRenderer.vgenerator.frozenRightCache;\n    }\n    var keys = Object.keys(cache);\n    for (var i = 0; i < keys.length; i++) {\n        rows = rows.concat(splitCells(cache[keys[i]], tableName, parent));\n    }\n    return rows;\n}\n/** @hidden */\nexport function setFreezeSelection(args, virtualRenderer) {\n    var leftKeys = Object.keys(virtualRenderer.vgenerator.cache);\n    var movableKeys = Object.keys(virtualRenderer.vgenerator.movableCache);\n    var rightKeys = Object.keys(virtualRenderer.vgenerator.frozenRightCache);\n    for (var i = 0; i < leftKeys.length; i++) {\n        selectFreezeRows(args, virtualRenderer.vgenerator.cache[leftKeys[i]]);\n    }\n    for (var i = 0; i < movableKeys.length; i++) {\n        selectFreezeRows(args, virtualRenderer.vgenerator.movableCache[movableKeys[i]]);\n    }\n    for (var i = 0; i < rightKeys.length; i++) {\n        selectFreezeRows(args, virtualRenderer.vgenerator.frozenRightCache[rightKeys[i]]);\n    }\n}\n/** @hidden */\nexport function selectFreezeRows(args, cache) {\n    var rows = cache.filter(function (row) { return args.clearAll || args.uid === row.uid; });\n    for (var j = 0; j < rows.length; j++) {\n        rows[j].isSelected = args.set;\n        var cells = rows[j].cells;\n        for (var k = 0; k < cells.length; k++) {\n            cells[k].isSelected = args.set;\n        }\n    }\n}\n/** @hidden */\nexport function appendContent(virtualRenderer, widthService, target, newChild, e) {\n    virtualRenderer.appendContent(target, newChild, e);\n    widthService.refreshFrozenScrollbar();\n}\n/** @hidden */\nexport function generateRows(virtualRenderer, data, notifyArgs, freezeRowGenerator, parent) {\n    var virtualRows = virtualRenderer.vgenerator.generateRows(data, notifyArgs);\n    var arr = [];\n    arr = virtualRows.map(function (row) { return extend({}, row); });\n    var rows = freezeRowGenerator.generateRows(data, notifyArgs, arr);\n    if (parent.frozenRows && notifyArgs.requestType === 'delete' && parent.pageSettings.currentPage === 1) {\n        rows = rows.slice(parent.frozenRows);\n    }\n    return rows;\n}\n/** @hidden */\nexport function getReorderedFrozenRows(args, virtualRenderer, parent, freezeRowGenerator, firstPageRecords) {\n    var rows;\n    var bIndex = args.virtualInfo.blockIndexes;\n    var colIndex = args.virtualInfo.columnIndexes;\n    var page = args.virtualInfo.page;\n    args.virtualInfo.blockIndexes = [1, 2];\n    args.virtualInfo.page = 1;\n    if (!args.renderMovableContent) {\n        args.virtualInfo.columnIndexes = [];\n    }\n    var virtualRows = virtualRenderer.vgenerator.generateRows(firstPageRecords, args);\n    rows = splitReorderedRows(virtualRows, parent, freezeRowGenerator);\n    args.virtualInfo.blockIndexes = bIndex;\n    args.virtualInfo.columnIndexes = colIndex;\n    args.virtualInfo.page = page;\n    return rows.splice(0, parent.frozenRows);\n}\n/** @hidden */\nexport function splitReorderedRows(rows, parent, freezeRowGenerator) {\n    var tableName = getFrozenTableName(parent, parent.tableIndex);\n    for (var i = 0, len = rows.length; i < len; i++) {\n        rows[i].cells = splitFrozenRowObjectCells(parent, rows[i].cells, tableName);\n    }\n    return rows;\n}\n/** @hidden */\nexport function isXaxis(virtualRenderer) {\n    var value = false;\n    if (virtualRenderer) {\n        value = virtualRenderer.requestType === 'virtualscroll'\n            && virtualRenderer.currentInfo.sentinelInfo.axis === 'X';\n    }\n    return value;\n}\n/** @hidden */\nexport function getHeaderCells(virtualRenderer, parent) {\n    var content = isXaxis(virtualRenderer) ? parent.getMovableVirtualHeader() : parent.getHeaderContent();\n    return content ? [].slice.call(content.querySelectorAll('.e-headercell:not(.e-stackedheadercell)')) : [];\n}\n/** @hidden */\nexport function getVirtualFreezeHeader(virtualRenderer, parent) {\n    var headerTable;\n    if (isXaxis(virtualRenderer)) {\n        headerTable = parent.getMovableVirtualHeader().querySelector('.e-table');\n    }\n    else {\n        headerTable = parent.getFrozenVirtualHeader().querySelector('.e-table');\n    }\n    return headerTable;\n}\n/** @hidden */\nexport function ensureFrozenCols(columns, parent) {\n    var frozenCols = parent.columns.slice(0, parent.getFrozenColumns());\n    columns = frozenCols.concat(columns);\n    return columns;\n}\n/** @hidden */\nexport function setColGroup(colGroup, virtualRenderer, instance) {\n    if (!isXaxis(virtualRenderer)) {\n        if (!isNullOrUndefined(colGroup)) {\n            colGroup.id = 'content-' + colGroup.id;\n        }\n        instance.colgroup = colGroup;\n    }\n    return instance.colgroup;\n}\n/** @hidden */\nexport function setCache(instance, index) {\n    if (instance.virtualRenderer.vgenerator.cache[1]) {\n        instance.virtualRenderer.vgenerator.cache[1][index] = instance.frzRows[index];\n    }\n    else {\n        instance.virtualRenderer.vgenerator.cache[1] = instance.frzRows;\n    }\n    if (instance.virtualRenderer.vgenerator.movableCache[1]) {\n        instance.virtualRenderer.vgenerator.movableCache[1][index] = instance.mvblRows[index];\n    }\n    else {\n        instance.virtualRenderer.vgenerator.movableCache[1] = instance.mvblRows;\n    }\n}\n/** @hidden */\nexport function setDebounce(parent, virtualRenderer, scrollbar, mCont) {\n    var debounceEvent = (parent.dataSource instanceof DataManager && !parent.dataSource.dataSource.offline);\n    var opt = {\n        container: virtualRenderer.content, pageHeight: virtualRenderer.getBlockHeight() * 2, debounceEvent: debounceEvent,\n        axes: parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y'], scrollbar: scrollbar,\n        movableContainer: mCont\n    };\n    virtualRenderer.observer = new InterSectionObserver(virtualRenderer.virtualEle.wrapper, opt, virtualRenderer.virtualEle.movableWrapper);\n}\n/**\n * ColumnVirtualFreezeRenderer is used to render the virtual table within the frozen and movable content table\n * @hidden\n */\nvar ColumnVirtualFreezeRenderer = /** @class */ (function (_super) {\n    __extends(ColumnVirtualFreezeRenderer, _super);\n    function ColumnVirtualFreezeRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        /** @hidden */\n        _this.frRows = [];\n        /** @hidden */\n        _this.frzRows = [];\n        /** @hidden */\n        _this.mvblRows = [];\n        _this.serviceLoc = locator;\n        _this.eventListener('on');\n        _this.rowModelGenerator = new RowModelGenerator(_this.parent);\n        return _this;\n    }\n    ColumnVirtualFreezeRenderer.prototype.actionComplete = function (args) {\n        if (args.requestType === 'delete' && this.parent.frozenRows) {\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                if (this.virtualRenderer.vgenerator.frozenRightCache[1]) {\n                    this.virtualRenderer.vgenerator.frozenRightCache[1][i] = this.frRows.length ? this.frRows[i] : this.frzRows[i];\n                }\n                else {\n                    this.virtualRenderer.vgenerator.frozenRightCache[1] = this.frRows.length ? this.frRows : this.frzRows;\n                    break;\n                }\n                setCache(this, i);\n            }\n        }\n    };\n    ColumnVirtualFreezeRenderer.prototype.eventListener = function (action) {\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent[action](events.refreshVirtualFrozenRows, this.refreshVirtualFrozenRows, this);\n        this.parent[action](events.getVirtualData, this.getVirtualData, this);\n        this.parent[action](events.setFreezeSelection, this.setFreezeSelection, this);\n    };\n    ColumnVirtualFreezeRenderer.prototype.refreshVirtualFrozenRows = function (args) {\n        var _this = this;\n        if (args.requestType === 'delete' && this.parent.frozenRows) {\n            args.isFrozenRowsRender = true;\n            var query = this.parent.renderModule.data.generateQuery(true).clone();\n            query.page(1, this.parent.pageSettings.pageSize);\n            var selectedIdx_2 = this.parent.getSelectedRowIndexes();\n            this.parent.renderModule.data.getData({}, query).then(function (e) {\n                renderFrozenRows(args, e.result, selectedIdx_2, _this.parent, _this.rowModelGenerator, _this.serviceLoc, _this.virtualRenderer, _this);\n            });\n        }\n    };\n    ColumnVirtualFreezeRenderer.prototype.setFreezeSelection = function (args) {\n        setFreezeSelection(args, this.virtualRenderer);\n    };\n    ColumnVirtualFreezeRenderer.prototype.getVirtualData = function (data) {\n        this.virtualRenderer.getVirtualData(data);\n    };\n    ColumnVirtualFreezeRenderer.prototype.renderNextFrozentPart = function (e) {\n        if (this.parent.getFrozenMode() === 'Left' || this.parent.getFrozenMode() === 'Right') {\n            if (this.parent.tableIndex === 1) {\n                e.renderMovableContent = true;\n                this.refreshContentRows(extend({}, e));\n            }\n        }\n        if (this.parent.getFrozenMode() === 'Left-Right') {\n            if (this.parent.tableIndex === 1 || this.parent.tableIndex === 2) {\n                e.renderMovableContent = this.parent.tableIndex === 1;\n                e.renderFrozenRightContent = this.parent.tableIndex === 2;\n                this.refreshContentRows(extend({}, e));\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.renderTable = function () {\n        this.virtualRenderer = new VirtualContentRenderer(this.parent, this.serviceLoc);\n        this.virtualRenderer.header = this.serviceLoc.getService('rendererFactory')\n            .getRenderer(RenderType.Header).virtualHdrRenderer;\n        this.freezeRowGenerator = new FreezeRowModelGenerator(this.parent);\n        _super.prototype.renderTable.call(this);\n        this.virtualRenderer.setPanel(this.parent.getContent());\n        this.scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n        var frozenRightCont = this.getFrozenRightContent();\n        var frzCont = this.getFrozenContent();\n        var movableCont = this.getMovableContent();\n        if (this.parent.getFrozenMode() === 'Right') {\n            frzCont = frozenRightCont;\n        }\n        this.virtualRenderer.virtualEle.content = this.virtualRenderer.content = this.getPanel().querySelector('.e-content');\n        this.virtualRenderer.virtualEle.content.style.overflowX = 'hidden';\n        var minHeight = this.parent.height;\n        this.virtualRenderer.virtualEle.renderFrozenWrapper(minHeight);\n        this.virtualRenderer.virtualEle.renderFrozenPlaceHolder();\n        this.renderVirtualFrozenLeft(frzCont, movableCont);\n        this.renderVirtualFrozenRight(frzCont, movableCont);\n        this.renderVirtualFrozenLeftRight(frzCont, movableCont, frozenRightCont);\n        this.virtualRenderer.virtualEle.table = this.getTable();\n        setDebounce(this.parent, this.virtualRenderer, this.scrollbar, this.getMovableContent());\n    };\n    ColumnVirtualFreezeRenderer.prototype.renderVirtualFrozenLeft = function (frzCont, movableCont) {\n        if (this.parent.getFrozenMode() === 'Left') {\n            this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n            this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n        }\n    };\n    ColumnVirtualFreezeRenderer.prototype.renderVirtualFrozenRight = function (frzCont, movableCont) {\n        if (this.parent.getFrozenMode() === 'Right') {\n            this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n            this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n        }\n    };\n    ColumnVirtualFreezeRenderer.prototype.renderVirtualFrozenLeftRight = function (frzCont, movableCont, frozenRightCont) {\n        if (this.parent.getFrozenMode() === 'Left-Right') {\n            this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n            this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n            this.virtualRenderer.virtualEle.wrapper.appendChild(frozenRightCont);\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.appendContent = function (target, newChild, e) {\n        appendContent(this.virtualRenderer, this.widthService, target, newChild, e);\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.generateRows = function (data, e) {\n        if (!this.firstPageRecords) {\n            this.firstPageRecords = data;\n        }\n        return generateRows(this.virtualRenderer, data, e, this.freezeRowGenerator, this.parent);\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getRowByIndex = function (index) {\n        return this.virtualRenderer.getRowByIndex(index);\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getFrozenRightRowByIndex = function (index) {\n        return this.virtualRenderer.getFrozenRightVirtualRowByIndex(index);\n    };\n    ColumnVirtualFreezeRenderer.prototype.collectRows = function (tableName) {\n        return collectRows(tableName, this.virtualRenderer, this.parent);\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getMovableRowByIndex = function (index) {\n        return this.virtualRenderer.getMovableVirtualRowByIndex(index);\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getFrozenRightRows = function () {\n        return this.collectRows('frozen-right');\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getMovableRows = function () {\n        return this.collectRows('movable');\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getColGroup = function () {\n        var mCol = this.parent.getMovableVirtualContent();\n        return isXaxis(this.virtualRenderer) ? mCol.querySelector('colgroup') : this.colgroup;\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getRows = function () {\n        return this.collectRows(this.parent.getFrozenMode() === 'Right' ? 'frozen-right' : 'frozen-left');\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getReorderedFrozenRows = function (args) {\n        return getReorderedFrozenRows(args, this.virtualRenderer, this.parent, this.freezeRowGenerator, this.firstPageRecords);\n    };\n    ColumnVirtualFreezeRenderer.prototype.getHeaderCells = function () {\n        return getHeaderCells(this.virtualRenderer, this.parent);\n    };\n    ColumnVirtualFreezeRenderer.prototype.isXaxis = function () {\n        return isXaxis(this.virtualRenderer);\n    };\n    ColumnVirtualFreezeRenderer.prototype.getVirtualFreezeHeader = function () {\n        return getVirtualFreezeHeader(this.virtualRenderer, this.parent);\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getRowObjectByIndex = function (index) {\n        return this.virtualRenderer.getRowObjectByIndex(index);\n    };\n    ColumnVirtualFreezeRenderer.prototype.ensureFrozenCols = function (columns) {\n        return ensureFrozenCols(columns, this.parent);\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    ColumnVirtualFreezeRenderer.prototype.setColGroup = function (colGroup) {\n        return setColGroup(colGroup, this.virtualRenderer, this);\n    };\n    return ColumnVirtualFreezeRenderer;\n}(ColumnFreezeContentRenderer));\nexport { ColumnVirtualFreezeRenderer };\n"]},"metadata":{},"sourceType":"module"}