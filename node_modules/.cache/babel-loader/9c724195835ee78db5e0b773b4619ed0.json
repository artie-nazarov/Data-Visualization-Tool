{"ast":null,"code":"import { extend, isBlazor, select } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined, updateBlazorTemplate, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { parentsUntil, isGroupAdaptive, refreshForeignData, getObject, gridActionHandler } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * `NormalEdit` module is used to handle normal('inline, dialog, external') editing actions.\n * @hidden\n */\n\nvar NormalEdit =\n/** @class */\nfunction () {\n  function NormalEdit(parent, serviceLocator, renderer) {\n    this.args = {};\n    this.currentVirtualData = {};\n    this.parent = parent;\n    this.renderer = renderer;\n    this.serviceLocator = serviceLocator;\n    this.addEventListener();\n  }\n\n  NormalEdit.prototype.clickHandler = function (e) {\n    var target = e.target;\n    var gObj = this.parent;\n\n    if ((parentsUntil(target, 'e-gridcontent') && parentsUntil(parentsUntil(target, 'e-gridcontent'), 'e-grid').id === gObj.element.id || gObj.frozenRows && parentsUntil(target, 'e-headercontent')) && !parentsUntil(target, 'e-unboundcelldiv')) {\n      this.rowIndex = parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n\n      if (gObj.isEdit) {\n        gObj.editModule.endEdit();\n      }\n    }\n  };\n\n  NormalEdit.prototype.dblClickHandler = function (e) {\n    if (parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n      this.parent.editModule.startEdit(parentsUntil(e.target, 'e-row'));\n    }\n  };\n  /**\n   * The function used to trigger editComplete\n   * @return {void}\n   * @hidden\n   */\n\n\n  NormalEdit.prototype.editComplete = function (e) {\n    this.parent.isEdit = false;\n    var action = 'action';\n\n    if (isBlazor() && !this.parent.isJsComponent) {\n      e.rows = null;\n    }\n\n    switch (e.requestType) {\n      case 'save':\n        if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple') || !this.parent.isPersistSelection) {\n          if (e[action] !== 'edit') {\n            this.parent.selectRow(0);\n          }\n        }\n\n        this.parent.trigger(events.actionComplete, extend(e, {\n          requestType: 'save',\n          type: events.actionComplete\n        }));\n        break;\n\n      case 'delete':\n        if (isBlazor() && !this.parent.isJsComponent) {\n          var d = 'data';\n          e[d] = e[d][0];\n        }\n\n        this.parent.trigger(events.actionComplete, extend(e, {\n          requestType: 'delete',\n          type: events.actionComplete\n        }));\n\n        if (!this.parent.isCheckBoxSelection) {\n          this.parent.selectRow(this.editRowIndex);\n        }\n\n        break;\n    }\n  };\n\n  NormalEdit.prototype.startEdit = function (tr) {\n    var _this = this;\n\n    var gObj = this.parent;\n    var primaryKeys = gObj.getPrimaryKeyFieldNames();\n    var primaryKeyValues = [];\n    this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\n    if (gObj.enableVirtualization || gObj.enableInfiniteScrolling) {\n      var selector = '.e-row[aria-rowindex=\"' + this.rowIndex + '\"]';\n      var virtualRow = this.parent.element.querySelector(selector);\n\n      if (!virtualRow) {\n        return;\n      }\n    }\n\n    if (isBlazor()) {\n      var cols = this.parent.getColumns();\n\n      for (var i = 0; i < cols.length; i++) {\n        var col = cols[i];\n\n        if (col.template) {\n          resetBlazorTemplate(gObj.element.id + col.uid, 'Template', this.rowIndex);\n        }\n      }\n    }\n\n    if (isGroupAdaptive(gObj)) {\n      var rObj = gObj.getRowObjectFromUID(tr.getAttribute('data-uid'));\n      this.previousData = rObj.data;\n    } else if (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) {\n      var e = {\n        data: this.previousData,\n        index: this.rowIndex\n      };\n      this.parent.notify(events.virtualScrollEditActionBegin, e);\n      this.previousData = e.data;\n    } else {\n      this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n    }\n\n    for (var i = 0; i < primaryKeys.length; i++) {\n      primaryKeyValues.push(getObject(primaryKeys[i], this.previousData));\n    }\n\n    this.uid = tr.getAttribute('data-uid');\n    var rowObj = gObj.getRowObjectFromUID(this.uid);\n    var args = {\n      primaryKey: primaryKeys,\n      primaryKeyValue: primaryKeyValues,\n      requestType: 'beginEdit',\n      rowData: this.previousData,\n      rowIndex: this.rowIndex,\n      type: 'edit',\n      cancel: false,\n      foreignKeyData: rowObj && rowObj.foreignKeyData,\n      target: undefined\n    };\n\n    if (!isBlazor() || this.parent.isJsComponent) {\n      args.row = tr;\n    }\n\n    gObj.trigger(events.beginEdit, args, function (begineditargs) {\n      begineditargs.type = 'actionBegin';\n      gObj.trigger(events.actionBegin, begineditargs, function (editargs) {\n        if (!editargs.cancel) {\n          var cloneRow = 'cloneRow';\n          var frozen = 'frozen';\n          var cloneFrozen = 'cloneFrozen';\n          gObj.isEdit = true;\n          editargs.row = editargs.row ? editargs.row : tr;\n\n          if (isBlazor() && gObj.isServerRendered) {\n            _this.originalRow = editargs.row;\n            _this.cloneRow = editargs.row.cloneNode(true);\n            editargs[cloneRow] = _this.cloneRow;\n          }\n\n          if (gObj.editSettings.mode !== 'Dialog') {\n            gObj.clearSelection();\n          }\n\n          if (gObj.editSettings.mode === 'Dialog' && gObj.selectionModule) {\n            gObj.selectionModule.preventFocus = true;\n            editargs.row.classList.add('e-dlgeditrow');\n          }\n\n          _this.renderer.update(editargs);\n\n          if (isBlazor()) {\n            editargs.form = null;\n            _this.cloneFrozen = editargs[cloneFrozen];\n            _this.frozen = editargs[frozen];\n            _this.cloneRow = editargs[cloneRow];\n            _this.originalRow = editargs.row;\n          }\n\n          _this.uid = tr.getAttribute('data-uid');\n          gObj.editModule.applyFormValidation();\n          editargs.type = 'actionComplete';\n          gObj.trigger(events.actionComplete, editargs);\n          _this.args = editargs;\n\n          if (_this.parent.allowTextWrap) {\n            _this.parent.notify(events.freezeRender, {\n              case: 'textwrap'\n            });\n          }\n\n          if (isBlazor()) {\n            _this.parent.notify(events.toolbarRefresh, {});\n\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\n            _this.parent.notify('start-edit', {});\n          }\n        }\n      });\n    });\n  };\n\n  NormalEdit.prototype.updateRow = function (index, data) {\n    var _this = this;\n\n    var gObj = this.parent;\n    this.editRowIndex = index;\n    var args = {\n      requestType: 'save',\n      action: 'edit',\n      type: events.actionBegin,\n      data: data,\n      cancel: false,\n      previousData: gObj.getCurrentViewRecords()[index],\n      row: gObj.getRowByIndex(index)\n    };\n    gObj.showSpinner();\n    gObj.notify(events.updateData, args);\n\n    if (args.promise) {\n      args.promise.then(function () {\n        return gObj.refresh();\n      }).catch(function (e) {\n        return _this.edFail(e);\n      });\n    } else {\n      gObj.refresh();\n    }\n  };\n\n  NormalEdit.prototype.editFormValidate = function () {\n    var gObj = this.parent;\n    var form1 = gObj.editModule.formObj.validate();\n    var form2 = gObj.editModule.mFormObj ? gObj.editModule.mFormObj.validate() : true;\n    var form3 = gObj.editModule.frFormObj ? gObj.editModule.frFormObj.validate() : true;\n    return form1 && form2 && form3;\n  };\n\n  NormalEdit.prototype.endEdit = function () {\n    var gObj = this.parent;\n\n    if (!this.parent.isEdit || !this.editFormValidate()) {\n      return;\n    }\n\n    var editedData = extend({}, {}, this.previousData, true);\n    var args = extend(this.args, {\n      requestType: 'save',\n      type: events.actionBegin,\n      data: editedData,\n      cancel: false,\n      previousData: this.previousData,\n      selectedRow: gObj.selectedRowIndex,\n      foreignKeyData: {}\n    });\n    var index = gObj.getFrozenMode() === 'Right' ? 1 : 0;\n    var isDlg = gObj.editSettings.mode === 'Dialog';\n    var dlgWrapper = select('#' + gObj.element.id + '_dialogEdit_wrapper', document);\n    var dlgForm = isDlg ? dlgWrapper.querySelector('.e-gridform') : gObj.element.querySelectorAll('.e-gridform')[index];\n    var data = {\n      virtualData: {},\n      isAdd: false\n    };\n    this.parent.notify(events.getVirtualData, data);\n\n    if ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && this.parent.editSettings.mode === 'Normal' && !dlgForm) {\n      if (this.parent.isEdit) {\n        this.currentVirtualData = editedData = args.data = data.virtualData;\n      }\n    } else {\n      editedData = gObj.editModule.getCurrentEditedData(dlgForm, editedData);\n    }\n\n    if (gObj.isFrozenGrid() && gObj.editSettings.mode === 'Normal') {\n      var mhdrFrm = gObj.getMovableVirtualHeader().querySelector('.e-gridform');\n      var mCntFrm = gObj.getMovableVirtualContent().querySelector('.e-gridform');\n      var mvblEle = [mhdrFrm || mCntFrm];\n      var frHdrFrm = void 0;\n      var frCntFrm = void 0;\n      var frEle = [];\n\n      if (gObj.getFrozenMode() === 'Left-Right') {\n        frHdrFrm = gObj.getFrozenRightHeader().querySelector('.e-gridform');\n        frCntFrm = gObj.getFrozenRightContent().querySelector('.e-gridform');\n        frEle = [frHdrFrm || frCntFrm];\n      }\n\n      gridActionHandler(this.parent, function (tableName, elements) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n          var ele = elements_1[_i];\n\n          if (ele) {\n            editedData = gObj.editModule.getCurrentEditedData(ele, editedData);\n          }\n        }\n      }, [[], mvblEle, frEle]);\n    }\n\n    if (isBlazor()) {\n      var form = 'form';\n      var movableForm = 'movableForm';\n      args[form] = null;\n      args[movableForm] = null;\n      args.row = {};\n    }\n\n    var eleLength = [].slice.call(gObj.element.querySelectorAll('.e-editedrow')).length;\n\n    if (!data.isAdd && Object.keys(this.currentVirtualData).length && !eleLength) {\n      eleLength = 1;\n    }\n\n    if (isDlg ? dlgWrapper.querySelectorAll('.e-editedrow').length : eleLength) {\n      args.action = 'edit';\n      gObj.trigger(events.actionBegin, args, function (endEditArgs) {\n        if (endEditArgs.cancel) {\n          return;\n        }\n\n        gObj.showSpinner();\n        gObj.notify(events.updateData, endEditArgs);\n      });\n    } else {\n      args.action = 'add';\n      args.selectedRow = 0;\n      args.index = this.addedRowIndex;\n      gObj.notify(events.virtualScrollEditSuccess, {});\n      gObj.notify(events.modelChanged, args);\n      this.addedRowIndex = null;\n\n      if (args.cancel) {\n        return;\n      }\n    }\n  };\n\n  NormalEdit.prototype.destroyElements = function () {\n    var gObj = this.parent;\n    gObj.editModule.destroyWidgets();\n    gObj.editModule.destroyForm();\n    this.parent.notify(events.dialogDestroy, {});\n  };\n\n  NormalEdit.prototype.editHandler = function (args) {\n    var _this = this;\n\n    if (args.promise) {\n      args.promise.then(function (e) {\n        return _this.edSucc(e, args);\n      }).catch(function (e) {\n        return _this.edFail(e);\n      });\n    } else {\n      this.editSuccess(args.data, args);\n    }\n  };\n\n  NormalEdit.prototype.edSucc = function (e, args) {\n    this.editSuccess(e, args);\n  };\n\n  NormalEdit.prototype.edFail = function (e) {\n    if (isBlazor() && this.parent.isServerRendered) {\n      var error = 'error';\n      var message = 'message';\n\n      if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n        e[error] = e[error][message];\n      }\n    }\n\n    this.editFailure(e);\n  };\n\n  NormalEdit.prototype.updateCurrentViewData = function (data) {\n    if (!this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling) {\n      this.parent.getCurrentViewRecords()[this.editRowIndex] = data;\n    }\n  };\n\n  NormalEdit.prototype.requestSuccess = function (args) {\n    if (this.parent.editModule.formObj && !this.parent.editModule.formObj.isDestroyed) {\n      this.destroyElements();\n      this.stopEditStatus();\n\n      if (this.parent.editSettings.mode === 'Dialog' && args.action !== 'add') {\n        this.parent.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n      }\n    }\n  };\n\n  NormalEdit.prototype.editSuccess = function (e, args) {\n    if (!isNullOrUndefined(e) && !(e instanceof Array)) {\n      var rowData = 'rowData';\n      args.data = extend({}, extend({}, args[rowData], args.data), e);\n    }\n\n    var editArgs;\n    this.requestSuccess(args);\n    this.parent.trigger(events.beforeDataBound, args);\n    args.type = events.actionComplete;\n    this.parent.isEdit = false;\n\n    if (isBlazor() && this.parent.isServerRendered) {\n      this.closeForm();\n      var rowIndex = 'rowIndex';\n      var action = 'action';\n      var data = 'data';\n      editArgs = {\n        requestType: args.requestType,\n        rowIndex: args[rowIndex],\n        action: args[action],\n        data: args[data]\n      };\n      this.parent.notify('editsuccess', editArgs);\n    } else {\n      this.refreshRow(args.data);\n    }\n\n    this.parent.notify(events.virtualScrollEditSuccess, args);\n    this.parent.editModule.checkLastRow(args.row);\n    this.parent.editModule.isLastRow = false;\n    this.updateCurrentViewData(args.data);\n    this.blazorTemplate();\n\n    if (!(isBlazor() && this.parent.isServerRendered)) {\n      this.editRowIndex = null;\n      this.parent.trigger(events.actionComplete, args);\n    }\n\n    if (isBlazor()) {\n      this.parent.notify(events.toolbarRefresh, {});\n    }\n\n    if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple') || !this.parent.isPersistSelection && !this.parent.selectionSettings.checkboxOnly) {\n      if (this.parent.editSettings.mode !== 'Dialog') {\n        if (isBlazor() && this.parent.isServerRendered) {\n          var rowIndex = 'editRowIndex';\n          editArgs[rowIndex] = this.rowIndex > -1 ? this.rowIndex : this.editRowIndex;\n        } else {\n          this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n        }\n      }\n    }\n\n    this.parent.hideSpinner();\n  };\n\n  NormalEdit.prototype.closeForm = function () {\n    if (!this.cloneRow && this.parent.isEdit) {\n      this.stopEditStatus();\n    }\n\n    if (this.cloneRow) {\n      this.cloneRow.remove();\n      this.cloneRow = null;\n      this.originalRow.classList.remove('e-hiddenrow');\n    }\n\n    if (this.parent.isFrozenGrid() && this.cloneFrozen) {\n      this.cloneFrozen.remove();\n      this.frozen.classList.remove('e-hiddenrow');\n    }\n  };\n\n  NormalEdit.prototype.blazorTemplate = function () {\n    var cols = this.parent.getColumns();\n\n    if (this.parent.editSettings.template && this.parent.editSettings.mode === 'Normal') {\n      updateBlazorTemplate(this.parent.element.id + 'editSettingsTemplate', 'Template', this.parent.editSettings);\n    }\n\n    for (var i = 0; i < cols.length; i++) {\n      var col = cols[i];\n\n      if (col.template) {\n        updateBlazorTemplate(this.parent.element.id + col.uid, 'Template', col, false);\n      }\n\n      if (col.editTemplate) {\n        updateBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate', col);\n      }\n    }\n  };\n\n  NormalEdit.prototype.editFailure = function (e) {\n    this.parent.trigger(events.actionFailure, isBlazor() && e instanceof Array ? e[0] : {\n      error: e\n    });\n    this.parent.hideSpinner();\n    this.parent.log('actionfailure', {\n      error: e\n    });\n  };\n\n  NormalEdit.prototype.needRefresh = function () {\n    var refresh = true;\n    var editedRow = this.parent.element.querySelector('.e-gridform');\n\n    if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache) && this.parent.editSettings.mode === 'Normal' && !editedRow) {\n      refresh = false;\n    }\n\n    return refresh;\n  };\n\n  NormalEdit.prototype.refreshRow = function (data) {\n    var frzCols = this.parent.isFrozenGrid();\n    var row = new RowRenderer(this.serviceLocator, null, this.parent);\n    var rowObj = this.parent.getRowObjectFromUID(this.uid);\n\n    if (rowObj) {\n      rowObj.changes = data;\n      this.parent.notify(events.refreshVirtualCache, data);\n      refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n\n      if (this.needRefresh()) {\n        row.refresh(rowObj, this.parent.getColumns(), true);\n      }\n\n      var tr = [].slice.call(this.parent.element.querySelectorAll('[aria-rowindex=\"' + rowObj.index + '\"]'));\n\n      if (frzCols && tr.length) {\n        for (var i = 0; i < tr.length; i++) {\n          var rowUid = tr[i].getAttribute('data-uid');\n\n          if (rowUid !== this.uid) {\n            rowObj = this.parent.getRowObjectFromUID(rowUid);\n            rowObj.changes = data;\n            row.refresh(rowObj, this.parent.getColumns(), true);\n            this.parent.editModule.checkLastRow(tr[i]);\n          }\n        }\n      }\n    }\n  };\n\n  NormalEdit.prototype.closeEdit = function () {\n    var _this = this;\n\n    if (!this.parent.isEdit) {\n      return;\n    }\n\n    var gObj = this.parent;\n    var args = extend(this.args, {\n      requestType: 'cancel',\n      type: events.actionBegin,\n      cancel: false,\n      data: this.previousData,\n      selectedRow: gObj.selectedRowIndex\n    });\n    gObj.notify(events.virtualScrollEditCancel, args);\n    this.blazorTemplate();\n\n    if (isBlazor()) {\n      var form = 'form';\n      args[form] = null;\n    }\n\n    gObj.trigger(events.actionBegin, args, function (closeEditArgs) {\n      if (closeEditArgs.cancel) {\n        return;\n      }\n\n      if (_this.parent.editSettings.mode === 'Dialog') {\n        _this.parent.notify(events.dialogDestroy, {});\n      }\n\n      gObj.isEdit = false;\n\n      _this.stopEditStatus();\n\n      closeEditArgs.type = events.actionComplete;\n\n      if (gObj.editSettings.mode !== 'Dialog') {\n        if (isBlazor() && gObj.isServerRendered) {\n          _this.closeForm();\n        } else {\n          _this.refreshRow(closeEditArgs.data);\n        }\n      }\n\n      var isLazyLoad = gObj.groupSettings.enableLazyLoading && gObj.groupSettings.columns.length && !gObj.getContentTable().querySelector('tr.e-emptyrow');\n\n      if (!gObj.getContentTable().querySelector('tr.e-emptyrow') && !gObj.getContentTable().querySelector('tr.e-row') && !isLazyLoad) {\n        gObj.renderModule.emptyRow();\n      }\n\n      if (gObj.editSettings.mode !== 'Dialog') {\n        gObj.selectRow(_this.rowIndex);\n      }\n\n      gObj.trigger(events.actionComplete, closeEditArgs);\n\n      if (isBlazor()) {\n        _this.parent.notify(events.toolbarRefresh, {});\n\n        _this.parent.notify('close-edit', {});\n      }\n    });\n  };\n\n  NormalEdit.prototype.addRecord = function (data, index) {\n    var _this = this;\n\n    var gObj = this.parent;\n    this.addedRowIndex = index = !isNullOrUndefined(index) ? index : 0;\n\n    if (data) {\n      gObj.notify(events.modelChanged, {\n        requestType: 'save',\n        type: events.actionBegin,\n        data: data,\n        selectedRow: 0,\n        action: 'add',\n        index: index\n      });\n      return;\n    }\n\n    if (gObj.isEdit) {\n      return;\n    }\n\n    this.previousData = {};\n    this.uid = '';\n    var cols = gObj.columnModel;\n\n    for (var i = 0; i < cols.length; i++) {\n      if (cols[i].field) {\n        DataUtil.setValue(cols[i].field, cols[i].defaultValue, this.previousData);\n      }\n    }\n\n    var args = {\n      cancel: false,\n      foreignKeyData: {},\n      requestType: 'add',\n      data: this.previousData,\n      type: events.actionBegin,\n      index: index,\n      rowData: this.previousData,\n      target: undefined\n    };\n    var rowData = {\n      virtualData: {}\n    };\n    this.parent.notify(events.getVirtualData, rowData);\n\n    if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache) && Object.keys(rowData.virtualData).length) {\n      args.data = args.rowData = rowData.virtualData;\n    }\n\n    if (isBlazor()) {\n      var form = 'form';\n      args[form] = null;\n    }\n\n    gObj.trigger(events.actionBegin, args, function (addArgs) {\n      if (addArgs.cancel) {\n        return;\n      }\n\n      gObj.isEdit = true;\n\n      if (gObj.editSettings.mode !== 'Dialog') {\n        gObj.clearSelection();\n      }\n\n      _this.renderer.addNew(addArgs);\n\n      gObj.editModule.applyFormValidation();\n      addArgs.type = events.actionComplete;\n      addArgs.row = gObj.element.querySelector('.e-addedrow');\n      gObj.trigger(events.actionComplete, addArgs);\n\n      if (isBlazor()) {\n        _this.parent.notify(events.toolbarRefresh, {});\n\n        _this.parent.notify('start-add', {});\n      }\n\n      _this.args = addArgs;\n    });\n  };\n\n  NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n    this.editRowIndex = this.parent.selectedRowIndex;\n\n    if (data) {\n      data = data instanceof Array ? data : [data];\n      var gObj = this.parent;\n      var index = 0;\n      var dataLen = Object.keys(data).length;\n      fieldname = fieldname || this.parent.getPrimaryKeyFieldNames()[0];\n\n      var _loop_1 = function (i) {\n        var _a;\n\n        var tmpRecord;\n        var contained = gObj.currentViewData.some(function (record) {\n          tmpRecord = record;\n          return data[i] === getObject(fieldname, record) || data[i] === record;\n        });\n        data[i] = contained ? tmpRecord : (_a = {}, _a[fieldname] = data[i], _a);\n      };\n\n      for (var i = 0; i < dataLen; i++) {\n        _loop_1(i);\n      }\n    }\n\n    var args = {\n      requestType: 'delete',\n      type: events.actionBegin,\n      foreignKeyData: {},\n      data: data ? data : this.parent.getSelectedRecords(),\n      tr: this.parent.getSelectedRows(),\n      cancel: false\n    };\n\n    if (!isNullOrUndefined(this.parent.commandDelIndex)) {\n      args.data[0] = this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute('data-uid')).data;\n    }\n\n    if (this.parent.enableVirtualization && args.data.length > 1) {\n      var uid = this.parent.getSelectedRows()[0].getAttribute('data-uid');\n      args.data = [this.parent.getRowObjectFromUID(uid).data];\n    }\n\n    var dataInString = 'data';\n\n    if (isBlazor() && !this.parent.isJsComponent) {\n      args[dataInString] = args[dataInString][0];\n    }\n\n    this.parent.notify(events.modelChanged, args);\n  };\n\n  NormalEdit.prototype.stopEditStatus = function () {\n    var gObj = this.parent;\n    var addElements = [].slice.call(gObj.element.querySelectorAll('.e-addedrow'));\n    var editElements = [].slice.call(gObj.element.querySelectorAll('.e-editedrow'));\n\n    for (var i = 0; i < addElements.length; i++) {\n      remove(addElements[i]);\n    }\n\n    for (var i = 0; i < editElements.length; i++) {\n      editElements[i].classList.remove('e-editedrow');\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  NormalEdit.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.crudAction, this.editHandler, this);\n    this.parent.on(events.doubleTap, this.dblClickHandler, this);\n    this.parent.on(events.click, this.clickHandler, this);\n    this.parent.on(events.recordAdded, this.requestSuccess, this);\n    this.parent.on(events.dblclick, this.dblClickHandler, this);\n    this.parent.on(events.deleteComplete, this.editComplete, this);\n    this.parent.on(events.saveComplete, this.editComplete, this);\n    this.parent.on('closeinline', this.closeForm, this);\n  };\n  /**\n   * @hidden\n   */\n\n\n  NormalEdit.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.crudAction, this.editHandler);\n    this.parent.off(events.doubleTap, this.dblClickHandler);\n    this.parent.off(events.click, this.clickHandler);\n    this.parent.off(events.recordAdded, this.requestSuccess);\n    this.parent.off(events.dblclick, this.dblClickHandler);\n    this.parent.off(events.deleteComplete, this.editComplete);\n    this.parent.off(events.saveComplete, this.editComplete);\n    this.parent.off('closeinline', this.closeForm);\n  };\n  /**\n   * @hidden\n   */\n\n\n  NormalEdit.prototype.destroy = function () {\n    this.removeEventListener();\n    this.renderer.destroy();\n  };\n\n  return NormalEdit;\n}();\n\nexport { NormalEdit };","map":{"version":3,"sources":["C:/Users/appsk/Documents/Projects/PredictiveMaintenance/React PDM/env/frontend/node_modules/@syncfusion/ej2-grids/src/grid/actions/normal-edit.js"],"names":["extend","isBlazor","select","remove","isNullOrUndefined","updateBlazorTemplate","resetBlazorTemplate","parentsUntil","isGroupAdaptive","refreshForeignData","getObject","gridActionHandler","events","RowRenderer","DataUtil","NormalEdit","parent","serviceLocator","renderer","args","currentVirtualData","addEventListener","prototype","clickHandler","e","target","gObj","id","element","frozenRows","rowIndex","parseInt","parentElement","getAttribute","isEdit","editModule","endEdit","dblClickHandler","editSettings","allowEditOnDblClick","startEdit","editComplete","action","isJsComponent","rows","requestType","isCheckBoxSelection","selectionSettings","type","isPersistSelection","selectRow","trigger","actionComplete","d","editRowIndex","tr","_this","primaryKeys","getPrimaryKeyFieldNames","primaryKeyValues","enableVirtualization","enableInfiniteScrolling","selector","virtualRow","querySelector","cols","getColumns","i","length","col","template","uid","rObj","getRowObjectFromUID","previousData","data","index","notify","virtualScrollEditActionBegin","getCurrentViewRecords","push","rowObj","primaryKey","primaryKeyValue","rowData","cancel","foreignKeyData","undefined","row","beginEdit","begineditargs","actionBegin","editargs","cloneRow","frozen","cloneFrozen","isServerRendered","originalRow","cloneNode","mode","clearSelection","selectionModule","preventFocus","classList","add","update","form","applyFormValidation","allowTextWrap","freezeRender","case","toolbarRefresh","style","display","updateRow","getRowByIndex","showSpinner","updateData","promise","then","refresh","catch","edFail","editFormValidate","form1","formObj","validate","form2","mFormObj","form3","frFormObj","editedData","selectedRow","selectedRowIndex","getFrozenMode","isDlg","dlgWrapper","document","dlgForm","querySelectorAll","virtualData","isAdd","getVirtualData","getCurrentEditedData","isFrozenGrid","mhdrFrm","getMovableVirtualHeader","mCntFrm","getMovableVirtualContent","mvblEle","frHdrFrm","frCntFrm","frEle","getFrozenRightHeader","getFrozenRightContent","tableName","elements","_i","elements_1","ele","movableForm","eleLength","slice","call","Object","keys","endEditArgs","addedRowIndex","virtualScrollEditSuccess","modelChanged","destroyElements","destroyWidgets","destroyForm","dialogDestroy","editHandler","edSucc","editSuccess","error","message","editFailure","updateCurrentViewData","requestSuccess","isDestroyed","stopEditStatus","Array","editArgs","beforeDataBound","closeForm","refreshRow","checkLastRow","isLastRow","blazorTemplate","checkboxOnly","hideSpinner","editTemplate","actionFailure","log","needRefresh","editedRow","infiniteScrollSettings","enableCache","frzCols","changes","refreshVirtualCache","getForeignKeyColumns","rowUid","closeEdit","virtualScrollEditCancel","closeEditArgs","isLazyLoad","groupSettings","enableLazyLoading","columns","getContentTable","renderModule","emptyRow","addRecord","columnModel","field","setValue","defaultValue","addArgs","addNew","deleteRecord","fieldname","dataLen","_loop_1","_a","tmpRecord","contained","currentViewData","some","record","getSelectedRecords","getSelectedRows","commandDelIndex","dataInString","addElements","editElements","on","crudAction","doubleTap","click","recordAdded","dblclick","deleteComplete","saveComplete","removeEventListener","off","destroy"],"mappings":"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","sourcesContent":["import { extend, isBlazor, select } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined, updateBlazorTemplate, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { parentsUntil, isGroupAdaptive, refreshForeignData, getObject, gridActionHandler } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * `NormalEdit` module is used to handle normal('inline, dialog, external') editing actions.\n * @hidden\n */\nvar NormalEdit = /** @class */ (function () {\n    function NormalEdit(parent, serviceLocator, renderer) {\n        this.args = {};\n        this.currentVirtualData = {};\n        this.parent = parent;\n        this.renderer = renderer;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    NormalEdit.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        if ((((parentsUntil(target, 'e-gridcontent') &&\n            parentsUntil(parentsUntil(target, 'e-gridcontent'), 'e-grid').id === gObj.element.id)) || (gObj.frozenRows\n            && parentsUntil(target, 'e-headercontent'))) && !parentsUntil(target, 'e-unboundcelldiv')) {\n            this.rowIndex = parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n            if (gObj.isEdit) {\n                gObj.editModule.endEdit();\n            }\n        }\n    };\n    NormalEdit.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n            this.parent.editModule.startEdit(parentsUntil(e.target, 'e-row'));\n        }\n    };\n    /**\n     * The function used to trigger editComplete\n     * @return {void}\n     * @hidden\n     */\n    NormalEdit.prototype.editComplete = function (e) {\n        this.parent.isEdit = false;\n        var action = 'action';\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        switch (e.requestType) {\n            case 'save':\n                if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n                    || (!this.parent.isPersistSelection)) {\n                    if (e[action] !== 'edit') {\n                        this.parent.selectRow(0);\n                    }\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'save',\n                    type: events.actionComplete\n                }));\n                break;\n            case 'delete':\n                if (isBlazor() && !this.parent.isJsComponent) {\n                    var d = 'data';\n                    e[d] = e[d][0];\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'delete',\n                    type: events.actionComplete\n                }));\n                if (!this.parent.isCheckBoxSelection) {\n                    this.parent.selectRow(this.editRowIndex);\n                }\n                break;\n        }\n    };\n    NormalEdit.prototype.startEdit = function (tr) {\n        var _this = this;\n        var gObj = this.parent;\n        var primaryKeys = gObj.getPrimaryKeyFieldNames();\n        var primaryKeyValues = [];\n        this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n        if (gObj.enableVirtualization || gObj.enableInfiniteScrolling) {\n            var selector = '.e-row[aria-rowindex=\"' + this.rowIndex + '\"]';\n            var virtualRow = this.parent.element.querySelector(selector);\n            if (!virtualRow) {\n                return;\n            }\n        }\n        if (isBlazor()) {\n            var cols = this.parent.getColumns();\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                if (col.template) {\n                    resetBlazorTemplate(gObj.element.id + col.uid, 'Template', this.rowIndex);\n                }\n            }\n        }\n        if (isGroupAdaptive(gObj)) {\n            var rObj = gObj.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            this.previousData = rObj.data;\n        }\n        else if (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) {\n            var e = { data: this.previousData, index: this.rowIndex };\n            this.parent.notify(events.virtualScrollEditActionBegin, e);\n            this.previousData = e.data;\n        }\n        else {\n            this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n        }\n        for (var i = 0; i < primaryKeys.length; i++) {\n            primaryKeyValues.push(getObject(primaryKeys[i], this.previousData));\n        }\n        this.uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(this.uid);\n        var args = {\n            primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n            rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false,\n            foreignKeyData: rowObj && rowObj.foreignKeyData, target: undefined\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.row = tr;\n        }\n        gObj.trigger(events.beginEdit, args, function (begineditargs) {\n            begineditargs.type = 'actionBegin';\n            gObj.trigger(events.actionBegin, begineditargs, function (editargs) {\n                if (!editargs.cancel) {\n                    var cloneRow = 'cloneRow';\n                    var frozen = 'frozen';\n                    var cloneFrozen = 'cloneFrozen';\n                    gObj.isEdit = true;\n                    editargs.row = editargs.row ? editargs.row : tr;\n                    if (isBlazor() && gObj.isServerRendered) {\n                        _this.originalRow = editargs.row;\n                        _this.cloneRow = editargs.row.cloneNode(true);\n                        editargs[cloneRow] = _this.cloneRow;\n                    }\n                    if (gObj.editSettings.mode !== 'Dialog') {\n                        gObj.clearSelection();\n                    }\n                    if (gObj.editSettings.mode === 'Dialog' && gObj.selectionModule) {\n                        gObj.selectionModule.preventFocus = true;\n                        editargs.row.classList.add('e-dlgeditrow');\n                    }\n                    _this.renderer.update(editargs);\n                    if (isBlazor()) {\n                        editargs.form = null;\n                        _this.cloneFrozen = editargs[cloneFrozen];\n                        _this.frozen = editargs[frozen];\n                        _this.cloneRow = editargs[cloneRow];\n                        _this.originalRow = editargs.row;\n                    }\n                    _this.uid = tr.getAttribute('data-uid');\n                    gObj.editModule.applyFormValidation();\n                    editargs.type = 'actionComplete';\n                    gObj.trigger(events.actionComplete, editargs);\n                    _this.args = editargs;\n                    if (_this.parent.allowTextWrap) {\n                        _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                    }\n                    if (isBlazor()) {\n                        _this.parent.notify(events.toolbarRefresh, {});\n                        gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n                        _this.parent.notify('start-edit', {});\n                    }\n                }\n            });\n        });\n    };\n    NormalEdit.prototype.updateRow = function (index, data) {\n        var _this = this;\n        var gObj = this.parent;\n        this.editRowIndex = index;\n        var args = {\n            requestType: 'save', action: 'edit', type: events.actionBegin, data: data, cancel: false,\n            previousData: gObj.getCurrentViewRecords()[index],\n            row: gObj.getRowByIndex(index)\n        };\n        gObj.showSpinner();\n        gObj.notify(events.updateData, args);\n        if (args.promise) {\n            args.promise.then(function () { return gObj.refresh(); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            gObj.refresh();\n        }\n    };\n    NormalEdit.prototype.editFormValidate = function () {\n        var gObj = this.parent;\n        var form1 = gObj.editModule.formObj.validate();\n        var form2 = gObj.editModule.mFormObj ? gObj.editModule.mFormObj.validate() : true;\n        var form3 = gObj.editModule.frFormObj ? gObj.editModule.frFormObj.validate() : true;\n        return (form1 && form2 && form3);\n    };\n    NormalEdit.prototype.endEdit = function () {\n        var gObj = this.parent;\n        if (!this.parent.isEdit || !this.editFormValidate()) {\n            return;\n        }\n        var editedData = extend({}, {}, this.previousData, true);\n        var args = extend(this.args, {\n            requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n            previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n        });\n        var index = gObj.getFrozenMode() === 'Right' ? 1 : 0;\n        var isDlg = gObj.editSettings.mode === 'Dialog';\n        var dlgWrapper = select('#' + gObj.element.id + '_dialogEdit_wrapper', document);\n        var dlgForm = isDlg ? dlgWrapper.querySelector('.e-gridform') : gObj.element.querySelectorAll('.e-gridform')[index];\n        var data = { virtualData: {}, isAdd: false };\n        this.parent.notify(events.getVirtualData, data);\n        if ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)\n            && this.parent.editSettings.mode === 'Normal' && !dlgForm) {\n            if (this.parent.isEdit) {\n                this.currentVirtualData = editedData = args.data = data.virtualData;\n            }\n        }\n        else {\n            editedData = gObj.editModule.getCurrentEditedData(dlgForm, editedData);\n        }\n        if (gObj.isFrozenGrid() && gObj.editSettings.mode === 'Normal') {\n            var mhdrFrm = gObj.getMovableVirtualHeader().querySelector('.e-gridform');\n            var mCntFrm = gObj.getMovableVirtualContent().querySelector('.e-gridform');\n            var mvblEle = [mhdrFrm || mCntFrm];\n            var frHdrFrm = void 0;\n            var frCntFrm = void 0;\n            var frEle = [];\n            if (gObj.getFrozenMode() === 'Left-Right') {\n                frHdrFrm = gObj.getFrozenRightHeader().querySelector('.e-gridform');\n                frCntFrm = gObj.getFrozenRightContent().querySelector('.e-gridform');\n                frEle = [frHdrFrm || frCntFrm];\n            }\n            gridActionHandler(this.parent, function (tableName, elements) {\n                for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                    var ele = elements_1[_i];\n                    if (ele) {\n                        editedData = gObj.editModule.getCurrentEditedData(ele, editedData);\n                    }\n                }\n            }, [[], mvblEle, frEle]);\n        }\n        if (isBlazor()) {\n            var form = 'form';\n            var movableForm = 'movableForm';\n            args[form] = null;\n            args[movableForm] = null;\n            args.row = {};\n        }\n        var eleLength = [].slice.call(gObj.element.querySelectorAll('.e-editedrow')).length;\n        if (!data.isAdd && Object.keys(this.currentVirtualData).length && !eleLength) {\n            eleLength = 1;\n        }\n        if (isDlg ? dlgWrapper.querySelectorAll('.e-editedrow').length : eleLength) {\n            args.action = 'edit';\n            gObj.trigger(events.actionBegin, args, function (endEditArgs) {\n                if (endEditArgs.cancel) {\n                    return;\n                }\n                gObj.showSpinner();\n                gObj.notify(events.updateData, endEditArgs);\n            });\n        }\n        else {\n            args.action = 'add';\n            args.selectedRow = 0;\n            args.index = this.addedRowIndex;\n            gObj.notify(events.virtualScrollEditSuccess, {});\n            gObj.notify(events.modelChanged, args);\n            this.addedRowIndex = null;\n            if (args.cancel) {\n                return;\n            }\n        }\n    };\n    NormalEdit.prototype.destroyElements = function () {\n        var gObj = this.parent;\n        gObj.editModule.destroyWidgets();\n        gObj.editModule.destroyForm();\n        this.parent.notify(events.dialogDestroy, {});\n    };\n    NormalEdit.prototype.editHandler = function (args) {\n        var _this = this;\n        if (args.promise) {\n            args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            this.editSuccess(args.data, args);\n        }\n    };\n    NormalEdit.prototype.edSucc = function (e, args) {\n        this.editSuccess(e, args);\n    };\n    NormalEdit.prototype.edFail = function (e) {\n        if (isBlazor() && this.parent.isServerRendered) {\n            var error = 'error';\n            var message = 'message';\n            if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n                e[error] = e[error][message];\n            }\n        }\n        this.editFailure(e);\n    };\n    NormalEdit.prototype.updateCurrentViewData = function (data) {\n        if (!this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling) {\n            this.parent.getCurrentViewRecords()[this.editRowIndex] = data;\n        }\n    };\n    NormalEdit.prototype.requestSuccess = function (args) {\n        if (this.parent.editModule.formObj && !this.parent.editModule.formObj.isDestroyed) {\n            this.destroyElements();\n            this.stopEditStatus();\n            if (this.parent.editSettings.mode === 'Dialog' && args.action !== 'add') {\n                this.parent.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n            }\n        }\n    };\n    NormalEdit.prototype.editSuccess = function (e, args) {\n        if (!isNullOrUndefined(e) && !(e instanceof Array)) {\n            var rowData = 'rowData';\n            args.data = extend({}, extend({}, args[rowData], args.data), e);\n        }\n        var editArgs;\n        this.requestSuccess(args);\n        this.parent.trigger(events.beforeDataBound, args);\n        args.type = events.actionComplete;\n        this.parent.isEdit = false;\n        if (isBlazor() && this.parent.isServerRendered) {\n            this.closeForm();\n            var rowIndex = 'rowIndex';\n            var action = 'action';\n            var data = 'data';\n            editArgs = { requestType: args.requestType,\n                rowIndex: args[rowIndex], action: args[action], data: args[data] };\n            this.parent.notify('editsuccess', editArgs);\n        }\n        else {\n            this.refreshRow(args.data);\n        }\n        this.parent.notify(events.virtualScrollEditSuccess, args);\n        this.parent.editModule.checkLastRow(args.row);\n        this.parent.editModule.isLastRow = false;\n        this.updateCurrentViewData(args.data);\n        this.blazorTemplate();\n        if (!(isBlazor() && this.parent.isServerRendered)) {\n            this.editRowIndex = null;\n            this.parent.trigger(events.actionComplete, args);\n        }\n        if (isBlazor()) {\n            this.parent.notify(events.toolbarRefresh, {});\n        }\n        if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n            || (!this.parent.isPersistSelection) && !this.parent.selectionSettings.checkboxOnly) {\n            if (this.parent.editSettings.mode !== 'Dialog') {\n                if (isBlazor() && this.parent.isServerRendered) {\n                    var rowIndex = 'editRowIndex';\n                    editArgs[rowIndex] = this.rowIndex > -1 ? this.rowIndex : this.editRowIndex;\n                }\n                else {\n                    this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n                }\n            }\n        }\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.closeForm = function () {\n        if (!this.cloneRow && this.parent.isEdit) {\n            this.stopEditStatus();\n        }\n        if (this.cloneRow) {\n            this.cloneRow.remove();\n            this.cloneRow = null;\n            this.originalRow.classList.remove('e-hiddenrow');\n        }\n        if (this.parent.isFrozenGrid() && this.cloneFrozen) {\n            this.cloneFrozen.remove();\n            this.frozen.classList.remove('e-hiddenrow');\n        }\n    };\n    NormalEdit.prototype.blazorTemplate = function () {\n        var cols = this.parent.getColumns();\n        if (this.parent.editSettings.template && this.parent.editSettings.mode === 'Normal') {\n            updateBlazorTemplate(this.parent.element.id + 'editSettingsTemplate', 'Template', this.parent.editSettings);\n        }\n        for (var i = 0; i < cols.length; i++) {\n            var col = cols[i];\n            if (col.template) {\n                updateBlazorTemplate(this.parent.element.id + col.uid, 'Template', col, false);\n            }\n            if (col.editTemplate) {\n                updateBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate', col);\n            }\n        }\n    };\n    NormalEdit.prototype.editFailure = function (e) {\n        this.parent.trigger(events.actionFailure, ((isBlazor() && e instanceof Array) ? e[0] : { error: e }));\n        this.parent.hideSpinner();\n        this.parent.log('actionfailure', { error: e });\n    };\n    NormalEdit.prototype.needRefresh = function () {\n        var refresh = true;\n        var editedRow = this.parent.element.querySelector('.e-gridform');\n        if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache)\n            && this.parent.editSettings.mode === 'Normal' && !editedRow) {\n            refresh = false;\n        }\n        return refresh;\n    };\n    NormalEdit.prototype.refreshRow = function (data) {\n        var frzCols = this.parent.isFrozenGrid();\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var rowObj = this.parent.getRowObjectFromUID(this.uid);\n        if (rowObj) {\n            rowObj.changes = data;\n            this.parent.notify(events.refreshVirtualCache, data);\n            refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n            if (this.needRefresh()) {\n                row.refresh(rowObj, this.parent.getColumns(), true);\n            }\n            var tr = [].slice.call(this.parent.element.querySelectorAll('[aria-rowindex=\"' + rowObj.index + '\"]'));\n            if (frzCols && tr.length) {\n                for (var i = 0; i < tr.length; i++) {\n                    var rowUid = tr[i].getAttribute('data-uid');\n                    if (rowUid !== this.uid) {\n                        rowObj = this.parent.getRowObjectFromUID(rowUid);\n                        rowObj.changes = data;\n                        row.refresh(rowObj, this.parent.getColumns(), true);\n                        this.parent.editModule.checkLastRow(tr[i]);\n                    }\n                }\n            }\n        }\n    };\n    NormalEdit.prototype.closeEdit = function () {\n        var _this = this;\n        if (!this.parent.isEdit) {\n            return;\n        }\n        var gObj = this.parent;\n        var args = extend(this.args, {\n            requestType: 'cancel', type: events.actionBegin, cancel: false, data: this.previousData, selectedRow: gObj.selectedRowIndex\n        });\n        gObj.notify(events.virtualScrollEditCancel, args);\n        this.blazorTemplate();\n        if (isBlazor()) {\n            var form = 'form';\n            args[form] = null;\n        }\n        gObj.trigger(events.actionBegin, args, function (closeEditArgs) {\n            if (closeEditArgs.cancel) {\n                return;\n            }\n            if (_this.parent.editSettings.mode === 'Dialog') {\n                _this.parent.notify(events.dialogDestroy, {});\n            }\n            gObj.isEdit = false;\n            _this.stopEditStatus();\n            closeEditArgs.type = events.actionComplete;\n            if (gObj.editSettings.mode !== 'Dialog') {\n                if (isBlazor() && gObj.isServerRendered) {\n                    _this.closeForm();\n                }\n                else {\n                    _this.refreshRow(closeEditArgs.data);\n                }\n            }\n            var isLazyLoad = gObj.groupSettings.enableLazyLoading && gObj.groupSettings.columns.length\n                && !gObj.getContentTable().querySelector('tr.e-emptyrow');\n            if (!gObj.getContentTable().querySelector('tr.e-emptyrow') &&\n                !gObj.getContentTable().querySelector('tr.e-row') && !isLazyLoad) {\n                gObj.renderModule.emptyRow();\n            }\n            if (gObj.editSettings.mode !== 'Dialog') {\n                gObj.selectRow(_this.rowIndex);\n            }\n            gObj.trigger(events.actionComplete, closeEditArgs);\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('close-edit', {});\n            }\n        });\n    };\n    NormalEdit.prototype.addRecord = function (data, index) {\n        var _this = this;\n        var gObj = this.parent;\n        this.addedRowIndex = index = !isNullOrUndefined(index) ? index : 0;\n        if (data) {\n            gObj.notify(events.modelChanged, {\n                requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add', index: index\n            });\n            return;\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.previousData = {};\n        this.uid = '';\n        var cols = (gObj.columnModel);\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].field) {\n                DataUtil.setValue(cols[i].field, cols[i].defaultValue, this.previousData);\n            }\n        }\n        var args = {\n            cancel: false, foreignKeyData: {},\n            requestType: 'add', data: this.previousData, type: events.actionBegin, index: index,\n            rowData: this.previousData, target: undefined\n        };\n        var rowData = { virtualData: {} };\n        this.parent.notify(events.getVirtualData, rowData);\n        if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache)\n            && Object.keys(rowData.virtualData).length) {\n            args.data = args.rowData = rowData.virtualData;\n        }\n        if (isBlazor()) {\n            var form = 'form';\n            args[form] = null;\n        }\n        gObj.trigger(events.actionBegin, args, function (addArgs) {\n            if (addArgs.cancel) {\n                return;\n            }\n            gObj.isEdit = true;\n            if (gObj.editSettings.mode !== 'Dialog') {\n                gObj.clearSelection();\n            }\n            _this.renderer.addNew(addArgs);\n            gObj.editModule.applyFormValidation();\n            addArgs.type = events.actionComplete;\n            addArgs.row = gObj.element.querySelector('.e-addedrow');\n            gObj.trigger(events.actionComplete, addArgs);\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('start-add', {});\n            }\n            _this.args = addArgs;\n        });\n    };\n    NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.editRowIndex = this.parent.selectedRowIndex;\n        if (data) {\n            data = (data instanceof Array) ? data : [data];\n            var gObj = this.parent;\n            var index = 0;\n            var dataLen = Object.keys(data).length;\n            fieldname = fieldname || this.parent.getPrimaryKeyFieldNames()[0];\n            var _loop_1 = function (i) {\n                var _a;\n                var tmpRecord;\n                var contained = gObj.currentViewData.some(function (record) {\n                    tmpRecord = record;\n                    return data[i] === getObject(fieldname, record) || data[i] === record;\n                });\n                data[i] = contained ? tmpRecord : (_a = {}, _a[fieldname] = data[i], _a);\n            };\n            for (var i = 0; i < dataLen; i++) {\n                _loop_1(i);\n            }\n        }\n        var args = {\n            requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n            data: data ? data : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n        };\n        if (!isNullOrUndefined(this.parent.commandDelIndex)) {\n            args.data[0] =\n                this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute('data-uid')).data;\n        }\n        if (this.parent.enableVirtualization && args.data.length > 1) {\n            var uid = this.parent.getSelectedRows()[0].getAttribute('data-uid');\n            args.data = [this.parent.getRowObjectFromUID(uid).data];\n        }\n        var dataInString = 'data';\n        if (isBlazor() && !this.parent.isJsComponent) {\n            args[dataInString] = args[dataInString][0];\n        }\n        this.parent.notify(events.modelChanged, args);\n    };\n    NormalEdit.prototype.stopEditStatus = function () {\n        var gObj = this.parent;\n        var addElements = [].slice.call(gObj.element.querySelectorAll('.e-addedrow'));\n        var editElements = [].slice.call(gObj.element.querySelectorAll('.e-editedrow'));\n        for (var i = 0; i < addElements.length; i++) {\n            remove(addElements[i]);\n        }\n        for (var i = 0; i < editElements.length; i++) {\n            editElements[i].classList.remove('e-editedrow');\n        }\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.crudAction, this.editHandler, this);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.recordAdded, this.requestSuccess, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.deleteComplete, this.editComplete, this);\n        this.parent.on(events.saveComplete, this.editComplete, this);\n        this.parent.on('closeinline', this.closeForm, this);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.crudAction, this.editHandler);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.recordAdded, this.requestSuccess);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.deleteComplete, this.editComplete);\n        this.parent.off(events.saveComplete, this.editComplete);\n        this.parent.off('closeinline', this.closeForm);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.destroy = function () {\n        this.removeEventListener();\n        this.renderer.destroy();\n    };\n    return NormalEdit;\n}());\nexport { NormalEdit };\n"]},"metadata":{},"sourceType":"module"}