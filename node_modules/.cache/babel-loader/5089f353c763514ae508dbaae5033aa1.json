{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { remove, addClass, isNullOrUndefined, isBlazor, extend, isUndefined } from '@syncfusion/ej2-base';\nimport { HeaderRender } from './header-renderer';\nimport { ContentRender } from './content-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport * as events from '../base/constant';\nimport { renderMovable, getScrollBarWidth, wrap } from '../base/util';\nimport { Input } from '@syncfusion/ej2-inputs';\n/**\n * Freeze module is used to render grid content with frozen rows and columns\n * @hidden\n */\n\nvar FreezeContentRender =\n/** @class */\nfunction (_super) {\n  __extends(FreezeContentRender, _super);\n\n  function FreezeContentRender(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n\n    _this.isInitialRender = true;\n    _this.widthService = locator.getService('widthService');\n\n    _this.addEventListener();\n\n    return _this;\n  }\n\n  FreezeContentRender.prototype.addEventListener = function () {\n    this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n    this.parent.addEventListener(events.batchAdd, this.batchAdd.bind(this));\n    this.parent.on(events.batchCancel, this.batchAdd.bind(this));\n    this.parent.addEventListener(events.batchDelete, this.batchAdd.bind(this));\n    this.parent.on(events.setHeightToFrozenElement, this.refreshScrollOffset);\n    this.parent.on(events.columnVisibilityChanged, this.widthService.refreshFrozenScrollbar, this);\n  };\n\n  FreezeContentRender.prototype.batchAdd = function (args) {\n    var isAdd = args.name !== 'batchCancel' && !(this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top');\n\n    if (this.parent.height !== 'auto' && (isAdd || args.name === 'batchCancel' || args.name === 'batchDelete')) {\n      this.refreshScrollOffset();\n      var height = this.getTable().offsetHeight;\n\n      if (args.name === 'add' && this.parent.editSettings.newRowPosition === 'Bottom') {\n        this.parent.getContent().firstChild.scroll(0, height);\n      }\n    }\n  };\n\n  FreezeContentRender.prototype.setHeightToContent = function (height) {\n    this.getFrozenContent().style.height = height.toString() + 'px';\n    this.getMovableContent().style.height = height.toString() + 'px';\n  };\n\n  FreezeContentRender.prototype.actionComplete = function (args) {\n    if (this.parent.editSettings.mode !== 'Dialog' && (args.requestType === 'add' || args.requestType === 'cancel' && args.row.classList.contains('e-addedrow')) && (!this.parent.frozenRows || this.parent.editSettings.newRowPosition === 'Bottom') && this.parent.height !== 'auto') {\n      this.refreshScrollOffset();\n      var height = this.getTable().offsetHeight;\n\n      if (args.requestType === 'add' && this.parent.editSettings.newRowPosition === 'Bottom') {\n        this.parent.getContent().firstChild.scroll(0, height);\n      }\n    }\n  };\n\n  FreezeContentRender.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.removeEventListener(events.actionComplete, this.actionComplete);\n    this.parent.removeEventListener(events.batchAdd, this.batchAdd);\n    this.parent.off(events.columnVisibilityChanged, this.widthService.refreshFrozenScrollbar);\n  };\n\n  FreezeContentRender.prototype.renderPanel = function () {\n    _super.prototype.renderPanel.call(this);\n\n    var fDiv = this.parent.element.querySelector('.e-frozencontent');\n    var mDiv = this.parent.element.querySelector('.e-movablecontent');\n\n    if (isNullOrUndefined(fDiv)) {\n      fDiv = this.parent.createElement('div', {\n        className: 'e-frozencontent e-frozen-left-content'\n      });\n      mDiv = this.parent.createElement('div', {\n        className: 'e-movablecontent'\n      });\n      this.getPanel().querySelector('.e-content').appendChild(fDiv);\n      this.getPanel().querySelector('.e-content').appendChild(mDiv);\n    }\n\n    this.setFrozenContent(fDiv);\n    this.setMovableContent(mDiv);\n  };\n\n  FreezeContentRender.prototype.renderFrozenRigthPanel = function () {\n    _super.prototype.renderPanel.call(this);\n  };\n\n  FreezeContentRender.prototype.renderEmpty = function (tbody) {\n    if (isBlazor() && !this.parent.isJsComponent) {\n      return;\n    }\n\n    _super.prototype.renderEmpty.call(this, tbody);\n\n    this.getMovableContent().querySelector('tbody').innerHTML = '<tr><td></td></tr>';\n    addClass([this.getMovableContent().querySelector('tbody').querySelector('tr')], ['e-emptyrow']);\n    this.getFrozenContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getFrozenLeftCount();\n    this.getFrozenContent().style.borderRightWidth = '0px';\n\n    if (this.parent.frozenRows) {\n      this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').innerHTML = '';\n      this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').innerHTML = '';\n    }\n  };\n\n  FreezeContentRender.prototype.renderFrozenRightEmpty = function (tbody) {\n    _super.prototype.renderEmpty.call(this, tbody);\n  };\n\n  FreezeContentRender.prototype.setFrozenContent = function (ele) {\n    this.frozenContent = ele;\n  };\n  /**\n   * @hidden\n   */\n\n\n  FreezeContentRender.prototype.setMovableContent = function (ele) {\n    this.movableContent = ele;\n  };\n\n  FreezeContentRender.prototype.getFrozenContent = function () {\n    return this.frozenContent;\n  };\n\n  FreezeContentRender.prototype.getMovableContent = function () {\n    return this.movableContent;\n  };\n\n  FreezeContentRender.prototype.getModelGenerator = function () {\n    return new FreezeRowModelGenerator(this.parent);\n  };\n\n  FreezeContentRender.prototype.renderFrozenRightTable = function () {\n    _super.prototype.renderTable.call(this);\n  };\n\n  FreezeContentRender.prototype.renderTable = function () {\n    var mTbl;\n\n    if (this.getFrozenContent().querySelector('.e-table') == null) {\n      _super.prototype.renderTable.call(this);\n\n      this.getFrozenContent().appendChild(this.getTable());\n      mTbl = this.getTable().cloneNode(true);\n      this.getMovableContent().appendChild(mTbl);\n    } else {\n      this.setTable(this.getFrozenContent().querySelector('.e-table'));\n      this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n      this.getFrozenContent().querySelector('.e-table').appendChild(this.getColGroup());\n      mTbl = this.getMovableContent().querySelector('.e-table');\n\n      if (this.parent.frozenRows) {\n        this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n      }\n    }\n\n    if (this.getMovableContent().querySelector('colgroup')) {\n      remove(this.getMovableContent().querySelector('colgroup'));\n    }\n\n    var colGroup = this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup').cloneNode(true);\n    mTbl.insertBefore(colGroup, mTbl.querySelector('tbody'));\n    var style = this.parent.enableVirtualization ? '' : 'flex';\n    this.getPanel().firstChild.style.display = style;\n    this.renderHorizontalScrollbar('e-frozenscrollbar e-frozen-left-scrollbar', this.getScrollbarDisplay());\n  };\n\n  FreezeContentRender.prototype.getScrollbarDisplay = function () {\n    var frozenDisplay = '';\n\n    if (this.parent.getFrozenColumns() && !this.parent.getVisibleFrozenColumns() || this.parent.getFrozenLeftColumnsCount() && !this.parent.getVisibleFrozenLeftCount()) {\n      frozenDisplay = 'none';\n    }\n\n    return frozenDisplay;\n  };\n\n  FreezeContentRender.prototype.renderHorizontalScrollbar = function (className, display, isRight) {\n    var left = this.parent.createElement('div', {\n      className: className,\n      styles: 'display:' + display\n    });\n    var movable = this.parent.createElement('div', {\n      className: 'e-movablescrollbar'\n    });\n    var child = this.parent.createElement('div', {\n      className: 'e-movablechild'\n    });\n    var scrollbarHeight = getScrollBarWidth().toString();\n    this.setScrollbarHeight(movable, scrollbarHeight);\n    this.setScrollbarHeight(child, scrollbarHeight);\n    movable.appendChild(child);\n    this.appendScrollbar(left, movable, isRight);\n  };\n\n  FreezeContentRender.prototype.appendScrollbar = function (frozen, movable, isRight) {\n    var parent = this.parent.createElement('div', {\n      className: 'e-scrollbar',\n      styles: 'display: flex'\n    });\n    parent.appendChild(frozen);\n    parent.appendChild(movable);\n    this.parent.getContent().appendChild(parent);\n  };\n\n  FreezeContentRender.prototype.setScrollbarHeight = function (ele, height) {\n    ele.style.minHeight = height + 'px';\n    ele.style.maxHeight = height + 'px';\n  };\n  /**\n   * @hidden\n   */\n\n\n  FreezeContentRender.prototype.setIsFrozen = function (args, tableName) {\n    args.isFrozen = !args.isFrozen;\n  };\n  /**\n   * @hidden\n   */\n\n\n  FreezeContentRender.prototype.setTbody = function (modelData, args) {\n    var tableName;\n\n    if (isNullOrUndefined(modelData[0].cells[0])) {\n      this.getMovableContent().querySelector('tbody').innerHTML = '';\n    }\n\n    var cell = modelData[0].cells[0];\n    var idx = cell.index;\n\n    if (isUndefined(idx) && this.parent.isRowDragable()) {\n      cell = modelData[0].cells[1];\n      idx = cell.index;\n    }\n\n    if (idx === 0) {\n      this.getPanel().firstChild.style.overflowX = 'hidden';\n    }\n\n    if (this.parent.enableColumnVirtualization && args.renderMovableContent && args.requestType === 'virtualscroll' && this.getMovableContent().scrollLeft > 0 && args.virtualInfo.columnIndexes[0] !== 0) {\n      idx = this.parent.getFrozenColumns();\n    }\n\n    if (cell && cell.column) {\n      tableName = cell.column.getFreezeTableName();\n    }\n\n    this.setIdx(idx);\n    return tableName;\n  };\n  /**\n   * @hidden\n   */\n\n\n  FreezeContentRender.prototype.splitRows = function (tableName) {\n    if (tableName === 'frozen-left') {\n      this.freezeRows = this.rows;\n      this.freezeRowElements = this.rowElements;\n    } else {\n      this.movableRows = this.rows;\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  FreezeContentRender.prototype.renderNextFrozentPart = function (args, tableName) {\n    var isVFTable = this.parent.enableVirtualization;\n\n    if (tableName === 'frozen-left') {\n      if (isVFTable) {\n        args.renderMovableContent = true;\n      }\n\n      this.refreshContentRows(extend({}, args));\n    }\n  };\n\n  FreezeContentRender.prototype.appendContent = function (tbody, frag, args, tableName) {\n    if (this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate)) {\n      tbody = frag;\n    } else {\n      tbody.appendChild(frag);\n    }\n\n    if (tableName === 'frozen-left') {\n      this.isLoaded = false;\n      this.getFrozenContent().querySelector('table').appendChild(tbody);\n    } else {\n      this.refreshTbody(tbody);\n      this.isLoaded = true;\n      this.getMovableContent().querySelector('table').appendChild(tbody);\n      this.refreshHeight();\n      this.refreshScrollOffset();\n      this.widthService.refreshFrozenScrollbar();\n    }\n\n    if (this.isInitialRender) {\n      this.parent.scrollModule.setHeight();\n      this.isInitialRender = false;\n    }\n  };\n\n  FreezeContentRender.prototype.refreshScrollOffset = function () {\n    if (this.parent.height !== 'auto') {\n      var height = this.getTable().offsetHeight + 1;\n      this.setHeightToContent(height);\n    }\n\n    this.parent.notify(events.refreshFrozenHeight, {});\n  };\n  /**\n   * @hidden\n   */\n\n\n  FreezeContentRender.prototype.getFrozenHeader = function (tableName) {\n    if (tableName === 'frozen-left') {\n      return this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody');\n    } else {\n      return this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n    }\n  };\n\n  FreezeContentRender.prototype.refreshTbody = function (tbody) {\n    if (tbody.childElementCount < 1) {\n      tbody.appendChild(this.parent.createElement('tr').appendChild(this.parent.createElement('td')));\n    }\n  };\n\n  FreezeContentRender.prototype.refreshHeight = function () {\n    if (!this.parent.allowTextWrap) {\n      this.parent.notify(events.freezeRender, {\n        case: 'refreshHeight'\n      });\n    }\n\n    this.getFrozenContent().style.borderRightWidth = '1px';\n  };\n\n  FreezeContentRender.prototype.setIdx = function (idx) {\n    this.idx = idx;\n  };\n\n  FreezeContentRender.prototype.getIdx = function () {\n    return this.idx;\n  };\n  /**\n   * @hidden\n   */\n\n\n  FreezeContentRender.prototype.getTbody = function (tableName) {\n    if (tableName === 'frozen-left') {\n      return this.getTable().querySelector('tbody');\n    } else {\n      return this.getMovableContent().querySelector('tbody');\n    }\n  };\n\n  return FreezeContentRender;\n}(ContentRender);\n\nexport { FreezeContentRender };\n\nvar FreezeRender =\n/** @class */\nfunction (_super) {\n  __extends(FreezeRender, _super);\n\n  function FreezeRender(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n\n    _this.addEventListener();\n\n    return _this;\n  }\n\n  FreezeRender.prototype.addEventListener = function () {\n    this.parent.on(events.freezeRender, this.refreshFreeze, this);\n    this.parent.on(events.frozenHeight, this.setFrozenHeight, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n  };\n\n  FreezeRender.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.frozenHeight, this.setFrozenHeight);\n    this.parent.off(events.uiUpdate, this.enableAfterRender);\n  };\n\n  FreezeRender.prototype.renderTable = function () {\n    if (!isBlazor()) {\n      _super.prototype.renderTable.call(this);\n    } else {\n      this.setTable(this.createTable(this.getFrozenHeader().querySelector('.e-table')));\n      this.parent.notify(events.headerRefreshed, {\n        rows: this.rows,\n        args: {\n          isFrozen: true\n        }\n      });\n      this.createTable(this.getMovableHeader().querySelector('.e-table'));\n    }\n\n    this.rfshMovable();\n    this.updateColgroup();\n    this.initializeHeaderDrag();\n    this.initializeHeaderDrop();\n    this.parent.notify(events.headerRefreshed, {\n      rows: this.rows,\n      args: {\n        isFrozen: false\n      }\n    });\n  };\n\n  FreezeRender.prototype.renderPanel = function () {\n    var fDiv = this.parent.element.querySelector('.e-frozenheader');\n    var mDiv = this.parent.element.querySelector('.e-movableheader');\n\n    _super.prototype.renderPanel.call(this);\n\n    if (isNullOrUndefined(fDiv)) {\n      fDiv = this.parent.createElement('div', {\n        className: 'e-frozenheader e-frozen-left-header'\n      });\n      mDiv = this.parent.createElement('div', {\n        className: 'e-movableheader'\n      });\n      this.getPanel().querySelector('.e-headercontent').appendChild(fDiv);\n      this.getPanel().querySelector('.e-headercontent').appendChild(mDiv);\n    }\n\n    this.setFrozenHeader(fDiv);\n    this.setMovableHeader(mDiv);\n  };\n\n  FreezeRender.prototype.renderFrozenRightPanel = function () {\n    _super.prototype.renderPanel.call(this);\n  };\n\n  FreezeRender.prototype.renderFrozenRightTable = function () {\n    _super.prototype.renderTable.call(this);\n  };\n\n  FreezeRender.prototype.refreshUI = function () {\n    if (!(isBlazor() && this.parent.isServerRendered) || this.parent.frozenRows === 0) {\n      var tbody = this.getMovableHeader().querySelector('tbody');\n      remove(this.getMovableHeader().querySelector('table'));\n\n      _super.prototype.refreshUI.call(this);\n\n      this.rfshMovable();\n      this.getMovableHeader().querySelector('tbody').innerHTML = tbody.innerHTML;\n    } else {\n      if (this.parent.getFrozenColumns() && this.freezeReorder) {\n        _super.prototype.refreshUI.call(this);\n\n        this.freezeReorder = false;\n\n        _super.prototype.refreshUI.call(this);\n      }\n\n      this.rfshMovable();\n    }\n\n    if (!isBlazor() || this.parent.frozenRows === 0) {\n      this.updateColgroup();\n    }\n\n    if (!this.parent.enableVirtualization) {\n      this.widthService.setWidthToTable();\n    }\n\n    if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n      wrap([].slice.call(this.movableHeader.querySelectorAll('tr.e-columnheader')), true);\n    }\n\n    this.parent.updateDefaultCursor();\n\n    if (!isBlazor() || this.parent.frozenRows === 0) {\n      renderMovable(this.parent.getContentTable().querySelector('colgroup'), this.parent.getFrozenColumns(), this.parent);\n    }\n\n    this.widthService.refreshFrozenScrollbar();\n    this.initializeHeaderDrag();\n    this.parent.notify(events.headerRefreshed, {\n      rows: this.rows,\n      args: {\n        isFrozen: false\n      }\n    });\n  };\n\n  FreezeRender.prototype.refreshFrozenLeftUI = function () {\n    _super.prototype.refreshUI.call(this);\n  };\n\n  FreezeRender.prototype.rfshMovable = function () {\n    if (!isBlazor() || this.parent.frozenRows === 0) {\n      this.getFrozenHeader().appendChild(this.getTable());\n      this.getMovableHeader().appendChild(this.createTable());\n    }\n\n    this.refreshStackedHdrHgt();\n    this.addMovableFirstCls();\n  };\n\n  FreezeRender.prototype.addMovableFirstCls = function () {\n    if (this.parent.getVisibleFrozenColumns()) {\n      var movablefirstcell = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader');\n      var len = movablefirstcell.length;\n\n      for (var i = 0; i < len; i++) {\n        var cells = 'cells';\n        var element = movablefirstcell[i][cells][0];\n\n        if (element) {\n          addClass([element], ['e-movablefirst']);\n\n          if (movablefirstcell[i][cells][0].rowSpan > 1) {\n            i = i + (movablefirstcell[i][cells][0].rowSpan - 1);\n          }\n        }\n      }\n    }\n  };\n\n  FreezeRender.prototype.refreshFreeze = function (obj) {\n    if (obj.case === 'filter') {\n      var filterRow = this.getTable().querySelector('.e-filterbar');\n\n      if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n        this.getMovableHeader().querySelector('thead').appendChild(this.filterRenderer(filterRow, this.parent.getFrozenColumns()));\n        var elements = [].slice.call(this.getMovableHeader().querySelectorAll('thead .e-filterbarcell .e-input'));\n\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n          var elem = elements_1[_i];\n          var args = {\n            element: elem,\n            floatLabelType: 'Never',\n            properties: {\n              enableRtl: this.parent.enableRtl,\n              showClearButton: true\n            }\n          };\n          Input.bindInitialEvent(args);\n        }\n      }\n    } else if (obj.case === 'textwrap' || obj.case === 'refreshHeight') {\n      this.refreshHeight(obj);\n      this.parent.contentModule.refreshScrollOffset();\n    }\n  };\n\n  FreezeRender.prototype.refreshHeight = function (obj) {\n    var fRows;\n    var mRows;\n    var fHdr = this.getFrozenHeader();\n    var mHdr = this.getMovableHeader();\n    var cont = this.parent.getContent();\n    var wrapMode = this.parent.textWrapSettings.wrapMode;\n    var hdrClassList = this.parent.getHeaderContent().querySelector('.e-headercontent').classList;\n\n    if (obj.case === 'textwrap') {\n      if (wrapMode !== 'Header' || obj.isModeChg) {\n        fRows = cont.querySelector('.e-frozencontent').querySelectorAll('tr');\n        mRows = cont.querySelector('.e-movablecontent').querySelectorAll('tr');\n        this.setWrapHeight(fRows, mRows, obj.isModeChg, true);\n      }\n\n      if (wrapMode === 'Content' && this.parent.allowTextWrap) {\n        hdrClassList.add('e-wrap');\n      } else {\n        hdrClassList.remove('e-wrap');\n      }\n\n      if (wrapMode === 'Both' || obj.isModeChg) {\n        fRows = fHdr.querySelectorAll('tr');\n        mRows = mHdr.querySelectorAll('tr');\n      } else {\n        mRows = mHdr.querySelector(wrapMode === 'Content' ? 'tbody' : 'thead').querySelectorAll('tr');\n        fRows = fHdr.querySelector(wrapMode === 'Content' ? 'tbody' : 'thead').querySelectorAll('tr');\n      }\n\n      if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n        this.setWrapHeight(fRows, mRows, obj.isModeChg, false, this.colDepth > 1);\n      }\n\n      this.refreshStackedHdrHgt();\n    } else if (obj.case === 'refreshHeight') {\n      this.setWrapHeight(cont.querySelector('.e-frozencontent').querySelectorAll('tr'), cont.querySelector('.e-movablecontent').querySelectorAll('tr'), obj.isModeChg);\n\n      if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n        this.setWrapHeight(fHdr.querySelectorAll('tr'), mHdr.querySelectorAll('tr'), obj.isModeChg);\n      }\n    }\n  };\n\n  FreezeRender.prototype.enableAfterRender = function (e) {\n    if (e.module === 'scroll') {\n      this.setFrozenHeight();\n    }\n  };\n\n  FreezeRender.prototype.updateResizeHandler = function () {\n    var elements = [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-rhandler'));\n\n    for (var i = 0; i < elements.length; i++) {\n      elements[i].style.height = elements[i].parentElement.offsetHeight + 'px';\n    }\n  };\n\n  FreezeRender.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset, isStackedHdr) {\n    var fRowHgt;\n    var mRowHgt;\n    var isWrap = this.parent.allowTextWrap;\n    var wrapMode = this.parent.textWrapSettings.wrapMode;\n    var tHead = this.parent.getHeaderContent().querySelector('thead');\n    var tBody = this.parent.getHeaderContent().querySelector('tbody');\n    var height = [];\n    var width = [];\n\n    for (var i = 0, len = fRows.length; i < len; i++) {\n      //separate loop for performance issue \n      if (!isNullOrUndefined(fRows[i]) && !isNullOrUndefined(mRows[i])) {\n        height[i] = fRows[i].getBoundingClientRect().height; //https://pagebuildersandwich.com/increased-plugins-performance-200/\n\n        width[i] = mRows[i].getBoundingClientRect().height;\n      }\n    }\n\n    for (var i = 0, len = fRows.length; i < len; i++) {\n      if (isModeChg && (wrapMode === 'Header' && isContReset || wrapMode === 'Content' && tHead.contains(fRows[i]) || wrapMode === 'Header' && tBody.contains(fRows[i])) || isStackedHdr) {\n        fRows[i].style.height = null;\n        mRows[i].style.height = null;\n      }\n\n      fRowHgt = height[i];\n      mRowHgt = width[i];\n\n      if (!isNullOrUndefined(fRows[i]) && fRows[i].childElementCount && (isWrap && fRowHgt < mRowHgt || !isWrap && fRowHgt < mRowHgt || this.parent.allowResizing && this.parent.resizeModule && this.parent.resizeModule.isFrozenColResized === false)) {\n        fRows[i].style.height = mRowHgt + 'px';\n      }\n\n      if (mRows && !isNullOrUndefined(mRows[i]) && mRows[i].childElementCount && (isWrap && fRowHgt > mRowHgt || !isWrap && fRowHgt > mRowHgt || this.parent.allowResizing && this.parent.resizeModule && this.parent.resizeModule.isFrozenColResized === true)) {\n        mRows[i].style.height = fRowHgt + 'px';\n      }\n    }\n\n    if (isWrap) {\n      this.setFrozenHeight();\n    }\n  };\n\n  FreezeRender.prototype.setFrozenHeight = function (height) {\n    if (height === void 0) {\n      height = getScrollBarWidth();\n    }\n\n    var movableContentHeight = this.parent.element.querySelector('.e-movablecontent').getBoundingClientRect().height;\n    var movableContent = this.parent.element.querySelector('.e-movablecontent');\n    var frozenContent = this.parent.element.querySelector('.e-frozencontent');\n    var contentScrollWidth = this.parent.getContent().scrollWidth;\n    var contentTableScrollWidth = this.parent.element.querySelector('.e-movablecontent table').scrollWidth + this.parent.getContentTable().scrollWidth;\n\n    if (movableContent.scrollWidth - movableContent.clientWidth) {\n      frozenContent.style.height = movableContentHeight - height + 'px';\n      frozenContent.style.borderBottom = '';\n    } else {\n      frozenContent.style.height = movableContentHeight + 'px';\n\n      if ((frozenContent.scrollHeight <= frozenContent.clientHeight || movableContent.scrollHeight <= movableContent.clientHeight) && contentScrollWidth === contentTableScrollWidth) {\n        this.parent.scrollModule.removePadding();\n      }\n\n      frozenContent.style.borderBottom = '0px';\n    }\n  };\n\n  FreezeRender.prototype.refreshStackedHdrHgt = function () {\n    var fRowSpan;\n    var mRowSpan;\n    var fTr = this.getFrozenHeader().querySelectorAll('.e-columnheader');\n    var mTr = this.getMovableHeader().querySelectorAll('.e-columnheader');\n\n    for (var i = 0, len = fTr.length; i < len; i++) {\n      fRowSpan = this.getRowSpan(fTr[i]);\n      mRowSpan = this.getRowSpan(mTr[i]);\n\n      if (fRowSpan.min > 1) {\n        this.updateStackedHdrRowHgt(i, fRowSpan.max, fTr[i], mTr);\n      } else if (mRowSpan.min > 1) {\n        this.updateStackedHdrRowHgt(i, mRowSpan.max, mTr[i], fTr);\n      }\n    }\n\n    if (this.parent.allowResizing) {\n      this.updateResizeHandler();\n    }\n  };\n\n  FreezeRender.prototype.getRowSpan = function (row) {\n    var rSpan;\n    var minRowSpan;\n    var maxRowSpan;\n\n    for (var i = 0, len = row.childElementCount; i < len; i++) {\n      if (i === 0) {\n        minRowSpan = row.children[0].rowSpan;\n      }\n\n      rSpan = row.children[i].rowSpan;\n      minRowSpan = Math.min(rSpan, minRowSpan);\n      maxRowSpan = Math.max(rSpan, minRowSpan);\n    }\n\n    return {\n      min: minRowSpan,\n      max: maxRowSpan\n    };\n  };\n\n  FreezeRender.prototype.updateStackedHdrRowHgt = function (idx, maxRowSpan, row, rows) {\n    var height = 0;\n\n    for (var i = 0; i < maxRowSpan; i++) {\n      height += rows[idx + i].style.height ? parseInt(rows[idx + i].style.height, 10) : rows[idx + i].offsetHeight;\n    }\n\n    row.style.height = height + 'px';\n  };\n\n  FreezeRender.prototype.setFrozenHeader = function (ele) {\n    this.frozenHeader = ele;\n  };\n  /**\n   * @hidden\n   */\n\n\n  FreezeRender.prototype.setMovableHeader = function (ele) {\n    this.movableHeader = ele;\n  };\n\n  FreezeRender.prototype.getFrozenHeader = function () {\n    return this.frozenHeader;\n  };\n\n  FreezeRender.prototype.getMovableHeader = function () {\n    return this.movableHeader;\n  };\n  /**\n   * @hidden\n   */\n\n\n  FreezeRender.prototype.updateColgroup = function () {\n    var mTable = this.getMovableHeader().querySelector('table');\n    remove(this.getMovableHeader().querySelector('colgroup'));\n    mTable.insertBefore(renderMovable(this.getFrozenHeader().querySelector('colgroup'), this.parent.getFrozenColumns(), this.parent), mTable.querySelector('thead'));\n  };\n\n  FreezeRender.prototype.filterRenderer = function (ele, frozenColumn, total) {\n    var clone = ele.cloneNode(true);\n    clone.innerHTML = '';\n    var end = total ? total : this.parent.getColumns().length;\n\n    for (var i = frozenColumn; i < end; i++) {\n      clone.appendChild(ele.removeChild(ele.children[frozenColumn]));\n    }\n\n    return clone;\n  };\n\n  return FreezeRender;\n}(HeaderRender);\n\nexport { FreezeRender };","map":{"version":3,"sources":["C:/Users/appsk/Documents/Projects/PredictiveMaintenance/React PDM/env/frontend/node_modules/@syncfusion/ej2-grids/src/grid/renderer/freeze-renderer.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","remove","addClass","isNullOrUndefined","isBlazor","extend","isUndefined","HeaderRender","ContentRender","FreezeRowModelGenerator","events","renderMovable","getScrollBarWidth","wrap","Input","FreezeContentRender","_super","parent","locator","_this","call","isInitialRender","widthService","getService","addEventListener","actionComplete","bind","batchAdd","on","batchCancel","batchDelete","setHeightToFrozenElement","refreshScrollOffset","columnVisibilityChanged","refreshFrozenScrollbar","args","isAdd","name","frozenRows","editSettings","newRowPosition","height","getTable","offsetHeight","getContent","firstChild","scroll","setHeightToContent","getFrozenContent","style","toString","getMovableContent","mode","requestType","row","classList","contains","removeEventListener","isDestroyed","off","renderPanel","fDiv","element","querySelector","mDiv","createElement","className","getPanel","appendChild","setFrozenContent","setMovableContent","renderFrozenRigthPanel","renderEmpty","tbody","isJsComponent","innerHTML","colSpan","getFrozenLeftCount","borderRightWidth","getHeaderContent","renderFrozenRightEmpty","ele","frozenContent","movableContent","getModelGenerator","renderFrozenRightTable","renderTable","mTbl","cloneNode","setTable","setColGroup","getColGroup","add","colGroup","insertBefore","enableVirtualization","display","renderHorizontalScrollbar","getScrollbarDisplay","frozenDisplay","getFrozenColumns","getVisibleFrozenColumns","getFrozenLeftColumnsCount","getVisibleFrozenLeftCount","isRight","left","styles","movable","child","scrollbarHeight","setScrollbarHeight","appendScrollbar","frozen","minHeight","maxHeight","setIsFrozen","tableName","isFrozen","setTbody","modelData","cells","cell","idx","index","isRowDragable","overflowX","enableColumnVirtualization","renderMovableContent","scrollLeft","virtualInfo","columnIndexes","column","getFreezeTableName","setIdx","splitRows","freezeRows","rows","freezeRowElements","rowElements","movableRows","renderNextFrozentPart","isVFTable","refreshContentRows","appendContent","frag","isReact","rowTemplate","isLoaded","refreshTbody","refreshHeight","scrollModule","setHeight","notify","refreshFrozenHeight","getFrozenHeader","childElementCount","allowTextWrap","freezeRender","case","getIdx","getTbody","FreezeRender","refreshFreeze","frozenHeight","setFrozenHeight","uiUpdate","enableAfterRender","createTable","headerRefreshed","getMovableHeader","rfshMovable","updateColgroup","initializeHeaderDrag","initializeHeaderDrop","setFrozenHeader","setMovableHeader","renderFrozenRightPanel","refreshUI","isServerRendered","freezeReorder","setWidthToTable","textWrapSettings","wrapMode","slice","movableHeader","querySelectorAll","updateDefaultCursor","getContentTable","refreshFrozenLeftUI","refreshStackedHdrHgt","addMovableFirstCls","movablefirstcell","len","length","i","rowSpan","obj","filterRow","allowFiltering","filterRenderer","elements","_i","elements_1","elem","floatLabelType","properties","enableRtl","showClearButton","bindInitialEvent","contentModule","fRows","mRows","fHdr","mHdr","cont","hdrClassList","isModeChg","setWrapHeight","colDepth","e","module","updateResizeHandler","parentElement","isContReset","isStackedHdr","fRowHgt","mRowHgt","isWrap","tHead","tBody","width","getBoundingClientRect","allowResizing","resizeModule","isFrozenColResized","movableContentHeight","contentScrollWidth","scrollWidth","contentTableScrollWidth","clientWidth","borderBottom","scrollHeight","clientHeight","removePadding","fRowSpan","mRowSpan","fTr","mTr","getRowSpan","min","updateStackedHdrRowHgt","max","rSpan","minRowSpan","maxRowSpan","children","Math","parseInt","frozenHeader","mTable","frozenColumn","total","clone","end","getColumns","removeChild"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, addClass, isNullOrUndefined, isBlazor, extend, isUndefined } from '@syncfusion/ej2-base';\nimport { HeaderRender } from './header-renderer';\nimport { ContentRender } from './content-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport * as events from '../base/constant';\nimport { renderMovable, getScrollBarWidth, wrap } from '../base/util';\nimport { Input } from '@syncfusion/ej2-inputs';\n/**\n * Freeze module is used to render grid content with frozen rows and columns\n * @hidden\n */\nvar FreezeContentRender = /** @class */ (function (_super) {\n    __extends(FreezeContentRender, _super);\n    function FreezeContentRender(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.isInitialRender = true;\n        _this.widthService = locator.getService('widthService');\n        _this.addEventListener();\n        return _this;\n    }\n    FreezeContentRender.prototype.addEventListener = function () {\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.addEventListener(events.batchAdd, this.batchAdd.bind(this));\n        this.parent.on(events.batchCancel, this.batchAdd.bind(this));\n        this.parent.addEventListener(events.batchDelete, this.batchAdd.bind(this));\n        this.parent.on(events.setHeightToFrozenElement, this.refreshScrollOffset);\n        this.parent.on(events.columnVisibilityChanged, this.widthService.refreshFrozenScrollbar, this);\n    };\n    FreezeContentRender.prototype.batchAdd = function (args) {\n        var isAdd = args.name !== 'batchCancel'\n            && !(this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top');\n        if (this.parent.height !== 'auto' && (isAdd || args.name === 'batchCancel' || args.name === 'batchDelete')) {\n            this.refreshScrollOffset();\n            var height = this.getTable().offsetHeight;\n            if (args.name === 'add' && this.parent.editSettings.newRowPosition === 'Bottom') {\n                this.parent.getContent().firstChild.scroll(0, height);\n            }\n        }\n    };\n    FreezeContentRender.prototype.setHeightToContent = function (height) {\n        this.getFrozenContent().style.height = height.toString() + 'px';\n        this.getMovableContent().style.height = height.toString() + 'px';\n    };\n    FreezeContentRender.prototype.actionComplete = function (args) {\n        if (this.parent.editSettings.mode !== 'Dialog' && (args.requestType === 'add' || (args.requestType === 'cancel'\n            && args.row.classList.contains('e-addedrow')))\n            && (!this.parent.frozenRows || this.parent.editSettings.newRowPosition === 'Bottom') && this.parent.height !== 'auto') {\n            this.refreshScrollOffset();\n            var height = this.getTable().offsetHeight;\n            if (args.requestType === 'add' && this.parent.editSettings.newRowPosition === 'Bottom') {\n                this.parent.getContent().firstChild.scroll(0, height);\n            }\n        }\n    };\n    FreezeContentRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.removeEventListener(events.actionComplete, this.actionComplete);\n        this.parent.removeEventListener(events.batchAdd, this.batchAdd);\n        this.parent.off(events.columnVisibilityChanged, this.widthService.refreshFrozenScrollbar);\n    };\n    FreezeContentRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = this.parent.element.querySelector('.e-frozencontent');\n        var mDiv = this.parent.element.querySelector('.e-movablecontent');\n        if (isNullOrUndefined(fDiv)) {\n            fDiv = this.parent.createElement('div', { className: 'e-frozencontent e-frozen-left-content' });\n            mDiv = this.parent.createElement('div', { className: 'e-movablecontent' });\n            this.getPanel().querySelector('.e-content').appendChild(fDiv);\n            this.getPanel().querySelector('.e-content').appendChild(mDiv);\n        }\n        this.setFrozenContent(fDiv);\n        this.setMovableContent(mDiv);\n    };\n    FreezeContentRender.prototype.renderFrozenRigthPanel = function () {\n        _super.prototype.renderPanel.call(this);\n    };\n    FreezeContentRender.prototype.renderEmpty = function (tbody) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            return;\n        }\n        _super.prototype.renderEmpty.call(this, tbody);\n        this.getMovableContent().querySelector('tbody').innerHTML = '<tr><td></td></tr>';\n        addClass([this.getMovableContent().querySelector('tbody').querySelector('tr')], ['e-emptyrow']);\n        this.getFrozenContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getFrozenLeftCount();\n        this.getFrozenContent().style.borderRightWidth = '0px';\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').innerHTML = '';\n            this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').innerHTML = '';\n        }\n    };\n    FreezeContentRender.prototype.renderFrozenRightEmpty = function (tbody) {\n        _super.prototype.renderEmpty.call(this, tbody);\n    };\n    FreezeContentRender.prototype.setFrozenContent = function (ele) {\n        this.frozenContent = ele;\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.setMovableContent = function (ele) {\n        this.movableContent = ele;\n    };\n    FreezeContentRender.prototype.getFrozenContent = function () {\n        return this.frozenContent;\n    };\n    FreezeContentRender.prototype.getMovableContent = function () {\n        return this.movableContent;\n    };\n    FreezeContentRender.prototype.getModelGenerator = function () {\n        return new FreezeRowModelGenerator(this.parent);\n    };\n    FreezeContentRender.prototype.renderFrozenRightTable = function () {\n        _super.prototype.renderTable.call(this);\n    };\n    FreezeContentRender.prototype.renderTable = function () {\n        var mTbl;\n        if (this.getFrozenContent().querySelector('.e-table') == null) {\n            _super.prototype.renderTable.call(this);\n            this.getFrozenContent().appendChild(this.getTable());\n            mTbl = this.getTable().cloneNode(true);\n            this.getMovableContent().appendChild(mTbl);\n        }\n        else {\n            this.setTable(this.getFrozenContent().querySelector('.e-table'));\n            this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n            this.getFrozenContent().querySelector('.e-table').appendChild(this.getColGroup());\n            mTbl = this.getMovableContent().querySelector('.e-table');\n            if (this.parent.frozenRows) {\n                this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n            }\n        }\n        if (this.getMovableContent().querySelector('colgroup')) {\n            remove(this.getMovableContent().querySelector('colgroup'));\n        }\n        var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n        mTbl.insertBefore(colGroup, mTbl.querySelector('tbody'));\n        var style = this.parent.enableVirtualization ? '' : 'flex';\n        this.getPanel().firstChild.style.display = style;\n        this.renderHorizontalScrollbar('e-frozenscrollbar e-frozen-left-scrollbar', this.getScrollbarDisplay());\n    };\n    FreezeContentRender.prototype.getScrollbarDisplay = function () {\n        var frozenDisplay = '';\n        if ((this.parent.getFrozenColumns() && !this.parent.getVisibleFrozenColumns())\n            || (this.parent.getFrozenLeftColumnsCount() && !this.parent.getVisibleFrozenLeftCount())) {\n            frozenDisplay = 'none';\n        }\n        return frozenDisplay;\n    };\n    FreezeContentRender.prototype.renderHorizontalScrollbar = function (className, display, isRight) {\n        var left = this.parent.createElement('div', { className: className, styles: 'display:' + display });\n        var movable = this.parent.createElement('div', { className: 'e-movablescrollbar' });\n        var child = this.parent.createElement('div', { className: 'e-movablechild' });\n        var scrollbarHeight = getScrollBarWidth().toString();\n        this.setScrollbarHeight(movable, scrollbarHeight);\n        this.setScrollbarHeight(child, scrollbarHeight);\n        movable.appendChild(child);\n        this.appendScrollbar(left, movable, isRight);\n    };\n    FreezeContentRender.prototype.appendScrollbar = function (frozen, movable, isRight) {\n        var parent = this.parent.createElement('div', { className: 'e-scrollbar', styles: 'display: flex' });\n        parent.appendChild(frozen);\n        parent.appendChild(movable);\n        this.parent.getContent().appendChild(parent);\n    };\n    FreezeContentRender.prototype.setScrollbarHeight = function (ele, height) {\n        ele.style.minHeight = height + 'px';\n        ele.style.maxHeight = height + 'px';\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.setIsFrozen = function (args, tableName) {\n        args.isFrozen = !args.isFrozen;\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.setTbody = function (modelData, args) {\n        var tableName;\n        if (isNullOrUndefined(modelData[0].cells[0])) {\n            this.getMovableContent().querySelector('tbody').innerHTML = '';\n        }\n        var cell = modelData[0].cells[0];\n        var idx = cell.index;\n        if (isUndefined(idx) && this.parent.isRowDragable()) {\n            cell = modelData[0].cells[1];\n            idx = cell.index;\n        }\n        if (idx === 0) {\n            this.getPanel().firstChild.style.overflowX = 'hidden';\n        }\n        if (this.parent.enableColumnVirtualization && args.renderMovableContent\n            && args.requestType === 'virtualscroll' && this.getMovableContent().scrollLeft > 0 && args.virtualInfo.columnIndexes[0] !== 0) {\n            idx = this.parent.getFrozenColumns();\n        }\n        if (cell && cell.column) {\n            tableName = cell.column.getFreezeTableName();\n        }\n        this.setIdx(idx);\n        return tableName;\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.splitRows = function (tableName) {\n        if (tableName === 'frozen-left') {\n            this.freezeRows = this.rows;\n            this.freezeRowElements = this.rowElements;\n        }\n        else {\n            this.movableRows = this.rows;\n        }\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.renderNextFrozentPart = function (args, tableName) {\n        var isVFTable = this.parent.enableVirtualization;\n        if (tableName === 'frozen-left') {\n            if (isVFTable) {\n                args.renderMovableContent = true;\n            }\n            this.refreshContentRows(extend({}, args));\n        }\n    };\n    FreezeContentRender.prototype.appendContent = function (tbody, frag, args, tableName) {\n        if (this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate)) {\n            tbody = frag;\n        }\n        else {\n            tbody.appendChild(frag);\n        }\n        if (tableName === 'frozen-left') {\n            this.isLoaded = false;\n            this.getFrozenContent().querySelector('table').appendChild(tbody);\n        }\n        else {\n            this.refreshTbody(tbody);\n            this.isLoaded = true;\n            this.getMovableContent().querySelector('table').appendChild(tbody);\n            this.refreshHeight();\n            this.refreshScrollOffset();\n            this.widthService.refreshFrozenScrollbar();\n        }\n        if (this.isInitialRender) {\n            this.parent.scrollModule.setHeight();\n            this.isInitialRender = false;\n        }\n    };\n    FreezeContentRender.prototype.refreshScrollOffset = function () {\n        if (this.parent.height !== 'auto') {\n            var height = this.getTable().offsetHeight + 1;\n            this.setHeightToContent(height);\n        }\n        this.parent.notify(events.refreshFrozenHeight, {});\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.getFrozenHeader = function (tableName) {\n        if (tableName === 'frozen-left') {\n            return this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody');\n        }\n        else {\n            return this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n        }\n    };\n    FreezeContentRender.prototype.refreshTbody = function (tbody) {\n        if (tbody.childElementCount < 1) {\n            tbody.appendChild(this.parent.createElement('tr').appendChild(this.parent.createElement('td')));\n        }\n    };\n    FreezeContentRender.prototype.refreshHeight = function () {\n        if (!this.parent.allowTextWrap) {\n            this.parent.notify(events.freezeRender, { case: 'refreshHeight' });\n        }\n        this.getFrozenContent().style.borderRightWidth = '1px';\n    };\n    FreezeContentRender.prototype.setIdx = function (idx) {\n        this.idx = idx;\n    };\n    FreezeContentRender.prototype.getIdx = function () {\n        return this.idx;\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.getTbody = function (tableName) {\n        if (tableName === 'frozen-left') {\n            return this.getTable().querySelector('tbody');\n        }\n        else {\n            return this.getMovableContent().querySelector('tbody');\n        }\n    };\n    return FreezeContentRender;\n}(ContentRender));\nexport { FreezeContentRender };\nvar FreezeRender = /** @class */ (function (_super) {\n    __extends(FreezeRender, _super);\n    function FreezeRender(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.addEventListener();\n        return _this;\n    }\n    FreezeRender.prototype.addEventListener = function () {\n        this.parent.on(events.freezeRender, this.refreshFreeze, this);\n        this.parent.on(events.frozenHeight, this.setFrozenHeight, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    };\n    FreezeRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.frozenHeight, this.setFrozenHeight);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n    };\n    FreezeRender.prototype.renderTable = function () {\n        if (!isBlazor()) {\n            _super.prototype.renderTable.call(this);\n        }\n        else {\n            this.setTable(this.createTable(this.getFrozenHeader().querySelector('.e-table')));\n            this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: true } });\n            this.createTable(this.getMovableHeader().querySelector('.e-table'));\n        }\n        this.rfshMovable();\n        this.updateColgroup();\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.renderPanel = function () {\n        var fDiv = this.parent.element.querySelector('.e-frozenheader');\n        var mDiv = this.parent.element.querySelector('.e-movableheader');\n        _super.prototype.renderPanel.call(this);\n        if (isNullOrUndefined(fDiv)) {\n            fDiv = this.parent.createElement('div', { className: 'e-frozenheader e-frozen-left-header' });\n            mDiv = this.parent.createElement('div', { className: 'e-movableheader' });\n            this.getPanel().querySelector('.e-headercontent').appendChild(fDiv);\n            this.getPanel().querySelector('.e-headercontent').appendChild(mDiv);\n        }\n        this.setFrozenHeader(fDiv);\n        this.setMovableHeader(mDiv);\n    };\n    FreezeRender.prototype.renderFrozenRightPanel = function () {\n        _super.prototype.renderPanel.call(this);\n    };\n    FreezeRender.prototype.renderFrozenRightTable = function () {\n        _super.prototype.renderTable.call(this);\n    };\n    FreezeRender.prototype.refreshUI = function () {\n        if (!(isBlazor() && this.parent.isServerRendered) || this.parent.frozenRows === 0) {\n            var tbody = this.getMovableHeader().querySelector('tbody');\n            remove(this.getMovableHeader().querySelector('table'));\n            _super.prototype.refreshUI.call(this);\n            this.rfshMovable();\n            this.getMovableHeader().querySelector('tbody').innerHTML = tbody.innerHTML;\n        }\n        else {\n            if (this.parent.getFrozenColumns() && this.freezeReorder) {\n                _super.prototype.refreshUI.call(this);\n                this.freezeReorder = false;\n                _super.prototype.refreshUI.call(this);\n            }\n            this.rfshMovable();\n        }\n        if (!isBlazor() || this.parent.frozenRows === 0) {\n            this.updateColgroup();\n        }\n        if (!this.parent.enableVirtualization) {\n            this.widthService.setWidthToTable();\n        }\n        if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n            wrap([].slice.call(this.movableHeader.querySelectorAll('tr.e-columnheader')), true);\n        }\n        this.parent.updateDefaultCursor();\n        if (!isBlazor() || this.parent.frozenRows === 0) {\n            renderMovable(this.parent.getContentTable().querySelector('colgroup'), this.parent.getFrozenColumns(), this.parent);\n        }\n        this.widthService.refreshFrozenScrollbar();\n        this.initializeHeaderDrag();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.refreshFrozenLeftUI = function () {\n        _super.prototype.refreshUI.call(this);\n    };\n    FreezeRender.prototype.rfshMovable = function () {\n        if (!isBlazor() || this.parent.frozenRows === 0) {\n            this.getFrozenHeader().appendChild(this.getTable());\n            this.getMovableHeader().appendChild(this.createTable());\n        }\n        this.refreshStackedHdrHgt();\n        this.addMovableFirstCls();\n    };\n    FreezeRender.prototype.addMovableFirstCls = function () {\n        if (this.parent.getVisibleFrozenColumns()) {\n            var movablefirstcell = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader');\n            var len = movablefirstcell.length;\n            for (var i = 0; i < len; i++) {\n                var cells = 'cells';\n                var element = movablefirstcell[i][cells][0];\n                if (element) {\n                    addClass([element], ['e-movablefirst']);\n                    if (movablefirstcell[i][cells][0].rowSpan > 1) {\n                        i = i + (movablefirstcell[i][cells][0].rowSpan - 1);\n                    }\n                }\n            }\n        }\n    };\n    FreezeRender.prototype.refreshFreeze = function (obj) {\n        if (obj.case === 'filter') {\n            var filterRow = this.getTable().querySelector('.e-filterbar');\n            if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n                this.getMovableHeader().querySelector('thead')\n                    .appendChild(this.filterRenderer(filterRow, this.parent.getFrozenColumns()));\n                var elements = [].slice.call(this.getMovableHeader().\n                    querySelectorAll('thead .e-filterbarcell .e-input'));\n                for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                    var elem = elements_1[_i];\n                    var args = {\n                        element: elem, floatLabelType: 'Never',\n                        properties: {\n                            enableRtl: this.parent.enableRtl, showClearButton: true\n                        }\n                    };\n                    Input.bindInitialEvent(args);\n                }\n            }\n        }\n        else if (obj.case === 'textwrap' || obj.case === 'refreshHeight') {\n            this.refreshHeight(obj);\n            this.parent.contentModule.refreshScrollOffset();\n        }\n    };\n    FreezeRender.prototype.refreshHeight = function (obj) {\n        var fRows;\n        var mRows;\n        var fHdr = this.getFrozenHeader();\n        var mHdr = this.getMovableHeader();\n        var cont = this.parent.getContent();\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var hdrClassList = this.parent.getHeaderContent().querySelector('.e-headercontent').classList;\n        if (obj.case === 'textwrap') {\n            if (wrapMode !== 'Header' || obj.isModeChg) {\n                fRows = cont.querySelector('.e-frozencontent').querySelectorAll('tr');\n                mRows = cont.querySelector('.e-movablecontent').querySelectorAll('tr');\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, true);\n            }\n            if (wrapMode === 'Content' && this.parent.allowTextWrap) {\n                hdrClassList.add('e-wrap');\n            }\n            else {\n                hdrClassList.remove('e-wrap');\n            }\n            if (wrapMode === 'Both' || obj.isModeChg) {\n                fRows = fHdr.querySelectorAll('tr');\n                mRows = mHdr.querySelectorAll('tr');\n            }\n            else {\n                mRows = mHdr.querySelector(wrapMode === 'Content' ?\n                    'tbody' : 'thead').querySelectorAll('tr');\n                fRows = fHdr.querySelector(wrapMode === 'Content' ?\n                    'tbody' : 'thead').querySelectorAll('tr');\n            }\n            if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, false, this.colDepth > 1);\n            }\n            this.refreshStackedHdrHgt();\n        }\n        else if (obj.case === 'refreshHeight') {\n            this.setWrapHeight(cont.querySelector('.e-frozencontent').querySelectorAll('tr'), cont.querySelector('.e-movablecontent').querySelectorAll('tr'), obj.isModeChg);\n            if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                this.setWrapHeight(fHdr.querySelectorAll('tr'), mHdr.querySelectorAll('tr'), obj.isModeChg);\n            }\n        }\n    };\n    FreezeRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'scroll') {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.updateResizeHandler = function () {\n        var elements = [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-rhandler'));\n        for (var i = 0; i < elements.length; i++) {\n            elements[i].style.height = elements[i].parentElement.offsetHeight + 'px';\n        }\n    };\n    FreezeRender.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset, isStackedHdr) {\n        var fRowHgt;\n        var mRowHgt;\n        var isWrap = this.parent.allowTextWrap;\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var tHead = this.parent.getHeaderContent().querySelector('thead');\n        var tBody = this.parent.getHeaderContent().querySelector('tbody');\n        var height = [];\n        var width = [];\n        for (var i = 0, len = fRows.length; i < len; i++) { //separate loop for performance issue \n            if (!isNullOrUndefined(fRows[i]) && !isNullOrUndefined(mRows[i])) {\n                height[i] = fRows[i].getBoundingClientRect().height; //https://pagebuildersandwich.com/increased-plugins-performance-200/\n                width[i] = mRows[i].getBoundingClientRect().height;\n            }\n        }\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            if (isModeChg && ((wrapMode === 'Header' && isContReset) || ((wrapMode === 'Content' && tHead.contains(fRows[i]))\n                || (wrapMode === 'Header' && tBody.contains(fRows[i])))) || isStackedHdr) {\n                fRows[i].style.height = null;\n                mRows[i].style.height = null;\n            }\n            fRowHgt = height[i];\n            mRowHgt = width[i];\n            if (!isNullOrUndefined(fRows[i]) && fRows[i].childElementCount && ((isWrap && fRowHgt < mRowHgt) ||\n                (!isWrap && fRowHgt < mRowHgt) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === false))) {\n                fRows[i].style.height = mRowHgt + 'px';\n            }\n            if (mRows && !isNullOrUndefined(mRows[i]) && mRows[i].childElementCount && ((isWrap && fRowHgt > mRowHgt) ||\n                (!isWrap && fRowHgt > mRowHgt) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === true))) {\n                mRows[i].style.height = fRowHgt + 'px';\n            }\n        }\n        if (isWrap) {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.setFrozenHeight = function (height) {\n        if (height === void 0) { height = getScrollBarWidth(); }\n        var movableContentHeight = this.parent.element.querySelector('.e-movablecontent').getBoundingClientRect().height;\n        var movableContent = this.parent.element.querySelector('.e-movablecontent');\n        var frozenContent = this.parent.element.querySelector('.e-frozencontent');\n        var contentScrollWidth = this.parent.getContent().scrollWidth;\n        var contentTableScrollWidth = this.parent.element.querySelector('.e-movablecontent table').scrollWidth +\n            this.parent.getContentTable().scrollWidth;\n        if (movableContent.scrollWidth - movableContent.clientWidth) {\n            frozenContent.style.height = movableContentHeight -\n                height + 'px';\n            frozenContent.style.borderBottom = '';\n        }\n        else {\n            frozenContent.style.height = movableContentHeight + 'px';\n            if (((frozenContent.scrollHeight <= frozenContent.clientHeight) ||\n                (movableContent.scrollHeight <= movableContent.clientHeight))\n                && contentScrollWidth === contentTableScrollWidth) {\n                this.parent.scrollModule.removePadding();\n            }\n            frozenContent.style.borderBottom = '0px';\n        }\n    };\n    FreezeRender.prototype.refreshStackedHdrHgt = function () {\n        var fRowSpan;\n        var mRowSpan;\n        var fTr = this.getFrozenHeader().querySelectorAll('.e-columnheader');\n        var mTr = this.getMovableHeader().querySelectorAll('.e-columnheader');\n        for (var i = 0, len = fTr.length; i < len; i++) {\n            fRowSpan = this.getRowSpan(fTr[i]);\n            mRowSpan = this.getRowSpan(mTr[i]);\n            if (fRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, fRowSpan.max, fTr[i], mTr);\n            }\n            else if (mRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, mRowSpan.max, mTr[i], fTr);\n            }\n        }\n        if (this.parent.allowResizing) {\n            this.updateResizeHandler();\n        }\n    };\n    FreezeRender.prototype.getRowSpan = function (row) {\n        var rSpan;\n        var minRowSpan;\n        var maxRowSpan;\n        for (var i = 0, len = row.childElementCount; i < len; i++) {\n            if (i === 0) {\n                minRowSpan = row.children[0].rowSpan;\n            }\n            rSpan = row.children[i].rowSpan;\n            minRowSpan = Math.min(rSpan, minRowSpan);\n            maxRowSpan = Math.max(rSpan, minRowSpan);\n        }\n        return { min: minRowSpan, max: maxRowSpan };\n    };\n    FreezeRender.prototype.updateStackedHdrRowHgt = function (idx, maxRowSpan, row, rows) {\n        var height = 0;\n        for (var i = 0; i < maxRowSpan; i++) {\n            height += rows[idx + i].style.height ?\n                parseInt(rows[idx + i].style.height, 10) : rows[idx + i].offsetHeight;\n        }\n        row.style.height = height + 'px';\n    };\n    FreezeRender.prototype.setFrozenHeader = function (ele) {\n        this.frozenHeader = ele;\n    };\n    /**\n     * @hidden\n     */\n    FreezeRender.prototype.setMovableHeader = function (ele) {\n        this.movableHeader = ele;\n    };\n    FreezeRender.prototype.getFrozenHeader = function () {\n        return this.frozenHeader;\n    };\n    FreezeRender.prototype.getMovableHeader = function () {\n        return this.movableHeader;\n    };\n    /**\n     * @hidden\n     */\n    FreezeRender.prototype.updateColgroup = function () {\n        var mTable = this.getMovableHeader().querySelector('table');\n        remove(this.getMovableHeader().querySelector('colgroup'));\n        mTable.insertBefore(renderMovable(this.getFrozenHeader().querySelector('colgroup'), this.parent.getFrozenColumns(), this.parent), mTable.querySelector('thead'));\n    };\n    FreezeRender.prototype.filterRenderer = function (ele, frozenColumn, total) {\n        var clone = ele.cloneNode(true);\n        clone.innerHTML = '';\n        var end = total ? total : this.parent.getColumns().length;\n        for (var i = frozenColumn; i < end; i++) {\n            clone.appendChild(ele.removeChild(ele.children[frozenColumn]));\n        }\n        return clone;\n    };\n    return FreezeRender;\n}(HeaderRender));\nexport { FreezeRender };\n"]},"metadata":{},"sourceType":"module"}